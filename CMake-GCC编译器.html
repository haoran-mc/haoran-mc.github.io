<!DOCTYPE html>
<html lang="zh">
<head>
<!-- 2022-03-31 Thu 21:24 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>GCC编译器</title>
<meta name="generator" content="Org mode">
<meta name="author" content="L.M.haoran &lt;haoran.mc@outlook.com&gt;">
<meta name="description" content="Copyright © 2021, L.M.haoran, all rights reserved."
>

                <link rel="stylesheet" href="static/css/org.css" type="text/css"  />
                <script type="module" src="static/js/main.js" defer></script>
                <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
</head>
<body>
<div id="content">
<h1 class="title">GCC编译器</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org1181577">GCC编译器</a></li>
<li><a href="#orgb390b52">编译过程</a></li>
<li><a href="#org233feb8">编译参数</a>
<ul>
<li><a href="#org6c2bd63">-g     编译带调试信息的可执行文件</a></li>
<li><a href="#orgfc29467">-O[n]  优化源代码</a></li>
<li><a href="#org063ccc0">-l和-L        指定库文件  |  指定库文件路径</a></li>
<li><a href="#orgfc6ea1f">-I     指定头文件搜索目录</a></li>
<li><a href="#org28afce9">-Wall  打印警告信息</a></li>
<li><a href="#org87ec1ac">-w     关闭警告信息</a></li>
<li><a href="#org2b1670e">-std=c++11    设置编译标准</a></li>
<li><a href="#org0bd8a0b">-o     指定输出文件名</a></li>
<li><a href="#org60fd2d3">-D     定义宏</a></li>
</ul>
</li>
<li><a href="#orgc805ad7">[实战]g++命令行编译</a>
<ul>
<li><a href="#orgfc2554b">直接编译</a>
<ul>
<li><a href="#org19fd74d">最简单的编译，并运行</a></li>
<li><a href="#org1e9e0ee">增加参数编译，并运行</a></li>
</ul>
</li>
<li><a href="#org7b4e1c0">生成库文件并编译</a>
<ul>
<li><a href="#org19bbea5">链接静态库生成可执行文件①</a></li>
<li><a href="#orgc20d2df">链接动态库生成可执行文件②</a></li>
<li><a href="#org4a778c8">编译完成后的目录结构</a></li>
</ul>
</li>
<li><a href="#orgbc04616">运行可执行文件</a>
<ul>
<li><a href="#org816f0a4">运行可执行文件①</a></li>
<li><a href="#orgc81ec60">运行可执行文件②</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-org1181577" class="outline-2">
<h2 id="org1181577">GCC编译器</h2>
<div class="outline-text-2" id="text-org1181577">
<p>
前言：<br>
</p>
<ul class="org-ul">
<li>GCC 编译器支持编译 Go、Objective-C，Objective-C ++，Fortran，Ada，D 和 BRIG（HSAIL）等程序；<br></li>
<li><span class="underline">Linux 开发C/C++ 一定要熟悉 GCC</span><br></li>
<li>VSCode是通过调用GCC编译器来实现C/C++的编译工作的；<br></li>
</ul>

<p>
实际使用中：<br>
</p>
<ul class="org-ul">
<li>使用 gcc 指令编译 C 代码<br></li>
<li>使用 g++指令编译 C++ 代码<br></li>
</ul>
</div>
</div>
<div id="outline-container-orgb390b52" class="outline-2">
<h2 id="orgb390b52">编译过程</h2>
<div class="outline-text-2" id="text-orgb390b52">
<ol class="org-ol">
<li><p>
预处理（Pre-Processing <code>.i文件</code> ）<br>
</p>
<ul class="org-ul">
<li><code>-E</code> 选项指示编译器仅对输入文件进行预处理<br></li>
</ul>

<div class="org-src-container">
<pre class="src src-bash">g++ -E test.cpp -o test.i   <span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">.i&#25991;&#20214;</span>
</pre>
</div></li>
<li><p>
编译（Compiling <code>.s文件</code> ）<br>
</p>
<ul class="org-ul">
<li><code>-S</code> 编译选项告诉 g++ 在为 C++ 代码产生了汇编语言文件后停止编译<br></li>
<li>g++ 产生的汇编语言文件的缺省扩展名是 .s<br></li>
</ul>

<div class="org-src-container">
<pre class="src src-bash">g++ -S test.i -o test.s
</pre>
</div></li>
<li><p>
汇编（Assembling <code>.o文件</code> ）<br>
</p>
<ul class="org-ul">
<li><code>-c</code> 选项告诉 g++ 仅把源代码编译为机器语言的目标代码<br></li>
<li>缺省时 g++ 建立的目标代码文件有一个 .o 的扩展名<br></li>
</ul>

<div class="org-src-container">
<pre class="src src-bash">g++ -c test.s -o test.o
</pre>
</div></li>
<li><p>
链接（Linking <code>bin文件</code> ）<br>
</p>
<ul class="org-ul">
<li><code>-o</code> 编译选项来为将产生的可执行文件用指定的文件名<br></li>
</ul>

<div class="org-src-container">
<pre class="src src-bash">g++  test.o  -o  test
</pre>
</div></li>
</ol>
</div>
</div>
<div id="outline-container-org233feb8" class="outline-2">
<h2 id="org233feb8">编译参数</h2>
<div class="outline-text-2" id="text-org233feb8">
</div>
<div id="outline-container-org6c2bd63" class="outline-3">
<h3 id="org6c2bd63">-g     编译带调试信息的可执行文件</h3>
<div class="outline-text-3" id="text-org6c2bd63">
<div class="org-src-container">
<pre class="src src-bash"><span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">-g &#36873;&#39033;&#21578;&#35785; GCC &#20135;&#29983;&#33021;&#34987; GNU &#35843;&#35797;&#22120; GDB &#20351;&#29992;&#30340;&#35843;&#35797;&#20449;&#24687;&#65292;&#20197;&#35843;&#35797;&#31243;&#24207;&#12290;</span>
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#20135;&#29983;&#24102;&#35843;&#35797;&#20449;&#24687;&#30340;&#21487;&#25191;&#34892;&#25991;&#20214; test</span>
g++ -g test.cpp
</pre>
</div>
</div>
</div>
<div id="outline-container-orgfc29467" class="outline-3">
<h3 id="orgfc29467">-O[n]  优化源代码</h3>
<div class="outline-text-3" id="text-orgfc29467">
<div class="org-src-container">
<pre class="src src-bash"><span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#25152;&#35859;&#20248;&#21270;&#65292;&#20363;&#22914;&#30465;&#30053;&#25481;&#20195;&#30721;&#20013;&#20174;&#26410;&#20351;&#29992;&#36807;&#30340;&#21464;&#37327;&#12289;&#30452;&#25509;&#23558;&#24120;&#37327;&#34920;&#36798;&#24335;&#29992;&#32467;&#26524;&#20540;&#20195;&#26367;&#31561;&#31561;&#65292;&#36825;&#20123;&#25805;&#20316;&#20250;&#32553;&#20943;&#30446;&#26631;&#25991;&#20214;&#25152;&#21253;&#21547;&#30340;&#20195;&#30721;&#37327;&#65292;&#25552;&#39640;&#26368;&#32456;&#29983;&#25104;&#30340;&#21487;&#25191;&#34892;&#25991;&#20214;&#30340;&#36816;&#34892;&#25928;&#29575;&#12290;</span>

<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">-O &#36873;&#39033;&#21578;&#35785; g++ &#23545;&#28304;&#20195;&#30721;&#36827;&#34892;&#22522;&#26412;&#20248;&#21270;&#12290;&#36825;&#20123;&#20248;&#21270;&#22312;&#22823;&#22810;&#25968;&#24773;&#20917;&#19979;&#37117;&#20250;&#20351;&#31243;&#24207;&#25191;&#34892;&#30340;&#26356;&#24555;&#12290; -O2 &#36873;&#39033;&#21578;&#35785; g++ &#20135;&#29983;&#23613;&#21487;&#33021;&#23567;&#21644;&#23613;&#21487;&#33021;&#24555;&#30340;&#20195;&#30721;&#12290; &#22914; -O2&#65292;-O3&#65292;-On&#65288;n &#24120;&#20026; 0&#8211;3&#65289;</span>
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">-O &#21516;&#26102;&#20943;&#23567;&#20195;&#30721;&#30340;&#38271;&#24230;&#21644;&#25191;&#34892;&#26102;&#38388;&#65292;&#20854;&#25928;&#26524;&#31561;&#20215;&#20110; -O1</span>
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">-O0 &#34920;&#31034;&#19981;&#20570;&#20248;&#21270;</span>
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">-O1 &#20026;&#40664;&#35748;&#20248;&#21270;</span>
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">-O2 &#38500;&#20102;&#23436;&#25104; -O1 &#30340;&#20248;&#21270;&#20043;&#22806;&#65292;&#36824;&#36827;&#34892;&#19968;&#20123;&#39069;&#22806;&#30340;&#35843;&#25972;&#24037;&#20316;&#65292;&#22914;&#25351;&#20196;&#35843;&#25972;&#31561;&#12290;</span>
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">-O3 &#21017;&#21253;&#25324;&#24490;&#29615;&#23637;&#24320;&#21644;&#20854;&#20182;&#19968;&#20123;&#19982;&#22788;&#29702;&#29305;&#24615;&#30456;&#20851;&#30340;&#20248;&#21270;&#24037;&#20316;&#12290;</span>
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#36873;&#39033;&#23558;&#20351;&#32534;&#35793;&#30340;&#36895;&#24230;&#27604;&#20351;&#29992; -O &#26102;&#24930;&#65292; &#20294;&#36890;&#24120;&#20135;&#29983;&#30340;&#20195;&#30721;&#25191;&#34892;&#36895;&#24230;&#20250;&#26356;&#24555;&#12290;</span>
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#20351;&#29992; -O2 &#20248;&#21270;&#28304;&#20195;&#30721;&#65292;&#24182;&#36755;&#20986;&#21487;&#25191;&#34892;&#25991;&#20214;</span>
g++ -O2 test.cpp
</pre>
</div>
</div>
</div>
<div id="outline-container-org063ccc0" class="outline-3">
<h3 id="org063ccc0">-l和-L        指定库文件  |  指定库文件路径</h3>
<div class="outline-text-3" id="text-org063ccc0">
<div class="org-src-container">
<pre class="src src-bash"><span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">-l &#21442;&#25968;&#65288;&#23567;&#20889;&#65289;&#23601;&#26159;&#29992;&#26469;&#25351;&#23450;&#31243;&#24207;&#35201;&#38142;&#25509;&#30340;&#24211;&#65292;-l &#21442;&#25968;&#32039;&#25509;&#30528;&#23601;&#26159;&#24211;&#21517;</span>
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#22312; /lib &#21644; /usr/lib &#21644; /usr/local/lib &#37324;&#30340;&#24211;&#30452;&#25509;&#29992; -l &#21442;&#25968;&#23601;&#33021;&#38142;&#25509;</span>
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#38142;&#25509; glog &#24211;</span>
g++ -lglog test.cpp

<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#22914;&#26524;&#24211;&#25991;&#20214;&#27809;&#25918;&#22312;&#19978;&#38754;&#19977;&#20010;&#30446;&#24405;&#37324;&#65292;&#38656;&#35201;&#20351;&#29992; -L &#21442;&#25968;&#65288;&#22823;&#20889;&#65289;&#25351;&#23450;&#24211;&#25991;&#20214;&#25152;&#22312;&#30446;&#24405;</span>
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">-L &#21442;&#25968;&#36319;&#30528;&#30340;&#26159;&#24211;&#25991;&#20214;&#25152;&#22312;&#30340;&#30446;&#24405;&#21517;</span>
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#38142;&#25509; mytest &#24211;&#65292;libmytest.so &#22312; /home/bing/mytestlibfolder &#30446;&#24405;&#19979;</span>
g++ -L/home/bing/mytestlibfolder -lmytest test.cpp
</pre>
</div>
</div>
</div>
<div id="outline-container-orgfc6ea1f" class="outline-3">
<h3 id="orgfc6ea1f">-I     指定头文件搜索目录</h3>
<div class="outline-text-3" id="text-orgfc6ea1f">
<div class="org-src-container">
<pre class="src src-bash"><span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">/usr/include &#30446;&#24405;&#19968;&#33324;&#26159;&#19981;&#29992;&#25351;&#23450;&#30340;&#65292;gcc &#30693;&#36947;&#21435;&#37027;&#37324;&#25214;&#65292;&#20294;&#26159;&#22914;&#26524;&#22836;&#25991;&#20214;&#19981;&#22312; /usr/icnclude &#37324;&#25105;&#20204;&#23601;&#35201;&#29992; -I &#21442;&#25968;&#25351;&#23450;&#20102;</span>
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#27604;&#22914;&#22836;&#25991;&#20214;&#25918;&#22312; /myinclude &#30446;&#24405;&#37324;&#65292;&#37027;&#32534;&#35793;&#21629;&#20196;&#34892;&#23601;&#35201;&#21152;&#19978; -I/myinclude &#21442;&#25968;&#20102;&#65292;&#22914;&#26524;&#19981;&#21152;&#20320;&#20250;&#24471;&#21040;&#19968;&#20010; "xxxx.h: No such file or directory" &#30340;&#38169;&#35823;</span>
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">-I &#21442;&#25968;&#21487;&#20197;&#29992;&#30456;&#23545;&#36335;&#24452;&#65292;&#27604;&#22914;&#22836;&#25991;&#20214;&#22312;&#24403;&#21069; &#30446;&#24405;&#65292;&#21487;&#20197;&#29992; -I.&#26469;&#25351;&#23450;</span>
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#19978;&#38754;&#25105;&#20204;&#25552;&#21040;&#30340; -cflags &#21442;&#25968;&#23601;&#26159;&#29992;&#26469;&#29983;&#25104; -I &#21442;&#25968;&#30340;&#12290;</span>
g++ -I/myinclude test.cpp
</pre>
</div>
</div>
</div>
<div id="outline-container-org28afce9" class="outline-3">
<h3 id="org28afce9">-Wall  打印警告信息</h3>
<div class="outline-text-3" id="text-org28afce9">
<div class="org-src-container">
<pre class="src src-bash"><span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#25171;&#21360;&#20986; gcc &#25552;&#20379;&#30340;&#35686;&#21578;&#20449;&#24687;</span>
g++ -Wall test.cpp
</pre>
</div>
</div>
</div>
<div id="outline-container-org87ec1ac" class="outline-3">
<h3 id="org87ec1ac">-w     关闭警告信息</h3>
<div class="outline-text-3" id="text-org87ec1ac">
<div class="org-src-container">
<pre class="src src-bash"><span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#20851;&#38381;&#25152;&#26377;&#35686;&#21578;&#20449;&#24687;</span>
g++ -w test.cpp
</pre>
</div>
</div>
</div>
<div id="outline-container-org2b1670e" class="outline-3">
<h3 id="org2b1670e">-std=c++11    设置编译标准</h3>
<div class="outline-text-3" id="text-org2b1670e">
<div class="org-src-container">
<pre class="src src-bash"><span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#20351;&#29992; c++11 &#26631;&#20934;&#32534;&#35793; test.cpp</span>
g++ -std=c++11 test.cpp
</pre>
</div>
</div>
</div>
<div id="outline-container-org0bd8a0b" class="outline-3">
<h3 id="org0bd8a0b">-o     指定输出文件名</h3>
<div class="outline-text-3" id="text-org0bd8a0b">
<div class="org-src-container">
<pre class="src src-bash"><span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#25351;&#23450;&#21363;&#23558;&#20135;&#29983;&#30340;&#25991;&#20214;&#21517;</span>
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#25351;&#23450;&#36755;&#20986;&#21487;&#25191;&#34892;&#25991;&#20214;&#21517;&#20026; test</span>
g++ test.cpp -o test
</pre>
</div>
</div>
</div>
<div id="outline-container-org60fd2d3" class="outline-3">
<h3 id="org60fd2d3">-D     定义宏</h3>
<div class="outline-text-3" id="text-org60fd2d3">
<div class="org-src-container">
<pre class="src src-bash"><span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#22312;&#20351;&#29992; gcc/g++ &#32534;&#35793;&#30340;&#26102;&#20505;&#23450;&#20041;&#23439;</span>
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#24120;&#29992;&#22330;&#26223;&#65306;</span>
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">-DDEBUG &#23450;&#20041; DEBUG &#23439;&#65292;&#21487;&#33021;&#25991;&#20214;&#20013;&#26377; DEBUG &#23439;&#37096;&#20998;&#30340;&#30456;&#20851;&#20449;&#24687;&#65292;&#29992;&#20010; DDEBUG &#26469;&#36873;&#25321;&#24320;&#21551;&#25110;&#20851;&#38381; DEBUG</span>
</pre>
</div>

<p>
示例代码：<br>
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">-Dname &#23450;&#20041;&#23439; name&#65292;&#40664;&#35748;&#23450;&#20041;&#20869;&#23481;&#20026;&#23383;&#31526;&#20018; "1"</span>
<span style="color: #d75fd7;">#include</span> <span style="color: #2aa198;">&lt;stdio.h&gt;</span>
<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #d75fd7; font-weight: bold;">main</span>() {
<span style="color: #d75fd7;">#ifdef</span> DEBUG
    printf(<span style="color: #2aa198;">"DEBUG LOG\n"</span>);
<span style="color: #d75fd7;">#endif</span>
    printf(<span style="color: #2aa198;">"in\n"</span>);
}

<span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">1. &#22312;&#32534;&#35793;&#30340;&#26102;&#20505;&#65292;&#20351;&#29992;g++ -DDEBUG main.cpp</span>
<span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">2. &#31532;&#19971;&#34892;&#20195;&#30721;&#21487;&#20197;&#34987;&#25191;&#34892;</span>
</pre>
</div>

<p>
注：使用 man gcc 命令可以查看 gcc 英文使用手册<br>
</p>
</div>
</div>
</div>
<div id="outline-container-orgc805ad7" class="outline-2">
<h2 id="orgc805ad7">[实战]g++命令行编译</h2>
<div class="outline-text-2" id="text-orgc805ad7">
<p>
案例：最初目录结构: 2 directories, 3 files<br>
</p>

<pre class="example">
# 最初目录结构
.
├── include
│   └── Swap.h
├── main.cpp
└── src
└── Swap.cpp

2 directories, 3 files
</pre>
</div>
<div id="outline-container-orgfc2554b" class="outline-3">
<h3 id="orgfc2554b">直接编译</h3>
<div class="outline-text-3" id="text-orgfc2554b">
</div>
<div id="outline-container-org19fd74d" class="outline-4">
<h4 id="org19fd74d">最简单的编译，并运行</h4>
<div class="outline-text-4" id="text-org19fd74d">
<div class="org-src-container">
<pre class="src src-bash"><span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#23558; main.cpp src/Swap.cpp &#32534;&#35793;&#20026;&#21487;&#25191;&#34892;&#25991;&#20214;</span>
g++ main.cpp src/Swap.cpp -Iinclude

<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#36816;&#34892;a.out</span>
./a.out
</pre>
</div>
</div>
</div>
<div id="outline-container-org1e9e0ee" class="outline-4">
<h4 id="org1e9e0ee">增加参数编译，并运行</h4>
<div class="outline-text-4" id="text-org1e9e0ee">
<div class="org-src-container">
<pre class="src src-bash"><span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#23558; main.cpp src/Swap.cpp &#32534;&#35793;&#20026;&#21487;&#25191;&#34892;&#25991;&#20214; &#38468;&#24102;&#19968;&#22534;&#21442;&#25968;</span>
g++ main.cpp src/Swap.cpp -Iinclude -std=c++11 -O2 -Wall -o b.out

<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#36816;&#34892; b.out</span>
./b.out
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org7b4e1c0" class="outline-3">
<h3 id="org7b4e1c0">生成库文件并编译</h3>
<div class="outline-text-3" id="text-org7b4e1c0">
</div>
<div id="outline-container-org19bbea5" class="outline-4">
<h4 id="org19bbea5">链接静态库生成可执行文件①</h4>
<div class="outline-text-4" id="text-org19bbea5">
<div class="org-src-container">
<pre class="src src-bash"><span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#36827;&#20837;src&#30446;&#24405;&#19979;</span>
$<span style="color: #8787d7;">cd</span> src

<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#27719;&#32534;&#65292;&#29983;&#25104;Swap.o&#25991;&#20214;</span>
g++ swap.cpp -c -I../include
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#29983;&#25104;&#38745;&#24577;&#24211;libSwap.a</span>
ar rs libSwap.a Swap.o

<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#22238;&#21040;&#19978;&#32423;&#30446;&#24405;</span>
$<span style="color: #8787d7;">cd</span> ..

<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#38142;&#25509;&#65292;&#29983;&#25104;&#21487;&#25191;&#34892;&#25991;&#20214;:staticmain</span>
g++ main.cpp -Iinclude -Lsrc -lSwap -o staticmain
</pre>
</div>
</div>
</div>
<div id="outline-container-orgc20d2df" class="outline-4">
<h4 id="orgc20d2df">链接动态库生成可执行文件②</h4>
<div class="outline-text-4" id="text-orgc20d2df">
<div class="org-src-container">
<pre class="src src-bash"><span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#36827;&#20837;src&#30446;&#24405;&#19979;</span>
$<span style="color: #8787d7;">cd</span> src

<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#29983;&#25104;&#21160;&#24577;&#24211;libSwap.so</span>
g++ Swap.cpp -I../include -fPIC -shared -o libSwap.so
<span style="color: #008787; background-color: #262626;">## </span><span style="color: #008787; background-color: #262626;">&#19978;&#38754;&#21629;&#20196;&#31561;&#20215;&#20110;&#20197;&#19979;&#20004;&#26465;&#21629;&#20196;</span>
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">gcc Swap.cpp -I../include -c -fPIC</span>
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">gcc -shared -o libSwap.so Swap.o</span>

<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#22238;&#21040;&#19978;&#32423;&#30446;&#24405;</span>
$<span style="color: #8787d7;">cd</span> ..

<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#38142;&#25509;&#65292;&#29983;&#25104;&#21487;&#25191;&#34892;&#25991;&#20214;:sharemain</span>
g++ main.cpp -Iinclude -Lsrc -lSwap -o sharemain
</pre>
</div>
</div>
</div>
<div id="outline-container-org4a778c8" class="outline-4">
<h4 id="org4a778c8">编译完成后的目录结构</h4>
<div class="outline-text-4" id="text-org4a778c8">
<p>
最终目录结构：2 directories, 8 files<br>
</p>
<pre class="example">
# 最终目录结构
.
├── include
│   └── Swap.h
├── main.cpp
├── sharemain
├── src
│   ├── libSwap.a
│   ├── libSwap.so
│   ├── Swap.cpp
│   └── Swap.o
└── staticmain

2 directories, 8 files
</pre>
</div>
</div>
</div>
<div id="outline-container-orgbc04616" class="outline-3">
<h3 id="orgbc04616">运行可执行文件</h3>
<div class="outline-text-3" id="text-orgbc04616">
</div>
<div id="outline-container-org816f0a4" class="outline-4">
<h4 id="org816f0a4">运行可执行文件①</h4>
<div class="outline-text-4" id="text-org816f0a4">
<div class="org-src-container">
<pre class="src src-bash"><span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#36816;&#34892;&#21487;&#25191;&#34892;&#25991;&#20214;</span>
./staticmain
</pre>
</div>
</div>
</div>
<div id="outline-container-orgc81ec60" class="outline-4">
<h4 id="orgc81ec60">运行可执行文件②</h4>
<div class="outline-text-4" id="text-orgc81ec60">
<div class="org-src-container">
<pre class="src src-bash"><span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#36816;&#34892;&#21487;&#25191;&#34892;&#25991;&#20214;</span>
<span style="color: #8787d7;">LD_LIBRARY_PATH</span>=src ./sharemain
</pre>
</div>
</div>
</div>
</div>
</div>
</div>
</body>
</html>
