<!DOCTYPE html>
<html lang="zh">
<head>
<!-- 2022-06-23 Thu 16:06 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>输入输出</title>
<meta name="generator" content="Org mode">
<meta name="author" content="L.M.haoran">
<meta name="description" content="Copyright © 2022, L.M.haoran, all rights reserved."
>

                <link rel="stylesheet" href="static/css/org.css" type="text/css"  />
                <script type="module" src="static/js/main.js" defer></script>
                <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "0em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script type="text/javascript"
        src="static/MathJax/MathJax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</head>
<body>
<div id="content">
<h1 class="title">输入输出</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org6585fe7">从键盘和标准输入读取输入</a>
<ul>
<li><a href="#org014463e">fmt</a></li>
<li><a href="#orgaa7ee55">bufio</a></li>
</ul>
</li>
<li><a href="#orgf820bd3">从文件中读取输入</a></li>
</ul>
</div>
</div>

<div id="outline-container-org6585fe7" class="outline-2">
<h2 id="org6585fe7">从键盘和标准输入读取输入</h2>
<div class="outline-text-2" id="text-org6585fe7">
</div>
<div id="outline-container-org014463e" class="outline-3">
<h3 id="org014463e">fmt</h3>
<div class="outline-text-3" id="text-org014463e">
<p>
我们如何读取用户的键盘输入呢？从键盘和标准输入 <code>os.Stdin</code> 读取输入，最简单的办法是使用 <code>fmt</code> 包提供的 Scan 和 Sscan 开头的函数：<br>
</p>

<p>
最方便的方法是使用 <code>fmt.Scanf</code> ，它是 <code>fmt.Printf</code> 的镜像。<br>
</p>

<div class="org-src-container">
<pre class="src src-go"><span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">&#20174;&#25511;&#21046;&#21488;&#35835;&#21462;&#36755;&#20837;:</span>
<span style="color: #268bd2; font-weight: bold;">package</span> main
<span style="color: #268bd2; font-weight: bold;">import</span> <span style="color: #2aa198;">"fmt"</span>

<span style="color: #268bd2; font-weight: bold;">var</span> (
    <span style="color: #8787d7;">firstName</span>, <span style="color: #8787d7;">lastName</span>, <span style="color: #8787d7;">s</span> <span style="color: #df005f; font-weight: bold;">string</span>
    <span style="color: #8787d7;">i</span> <span style="color: #df005f; font-weight: bold;">int</span>
    <span style="color: #8787d7;">f</span> <span style="color: #df005f; font-weight: bold;">float32</span>
    <span style="color: #8787d7;">input</span> = <span style="color: #2aa198;">"56.12 / 5212 / Go"</span>
    <span style="color: #8787d7;">format</span> = <span style="color: #2aa198;">"%f / %d / %s"</span>
)

<span style="color: #268bd2; font-weight: bold;">func</span> <span style="color: #d75fd7; font-weight: bold;">main</span>() {
    fmt.<span style="color: #d75fd7; font-weight: bold;">Println</span>(<span style="color: #2aa198;">"Please enter your full name: "</span>)
    fmt.<span style="color: #d75fd7; font-weight: bold;">Scanln</span>(&amp;firstName, &amp;lastName)
    <span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">fmt.Scanf("%s %s", &amp;firstName, &amp;lastName)</span>
    fmt.<span style="color: #d75fd7; font-weight: bold;">Printf</span>(<span style="color: #2aa198;">"Hi %s %s!\n"</span>, firstName, lastName) <span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">Hi Chris Naegels</span>
    fmt.<span style="color: #d75fd7; font-weight: bold;">Sscanf</span>(input, format, &amp;f, &amp;i, &amp;s)
    fmt.<span style="color: #d75fd7; font-weight: bold;">Println</span>(<span style="color: #2aa198;">"From the string we read: "</span>, f, i, s)
    <span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">&#36755;&#20986;&#32467;&#26524;: From the string we read: 56.12 5212 Go</span>
}
</pre>
</div>

<p>
<code>Scanln</code> 扫描来自标准输入的文本，将空格分隔的值依次存放到后续的参数内，直到碰到换行。 <code>Scanf</code> 与其类似，除了 <code>Scanf</code> 的第一个参数用作格式字符串，用来决定如何读取。 <code>Sscan</code> 和以 <code>Sscan</code> 开头的函数则是从字符串读取，除此之外，与 <code>Scanf</code> 相同。<br>
</p>
</div>
</div>
<div id="outline-container-orgaa7ee55" class="outline-3">
<h3 id="orgaa7ee55">bufio</h3>
<div class="outline-text-3" id="text-orgaa7ee55">
<p>
还可以使用 <code>bufio</code> 包提供的缓冲读取（buffered reader）来读取数据：<br>
</p>

<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">package</span> main
<span style="color: #268bd2; font-weight: bold;">import</span> (
    <span style="color: #2aa198;">"fmt"</span>
    <span style="color: #2aa198;">"bufio"</span>
    <span style="color: #2aa198;">"os"</span>
)

<span style="color: #268bd2; font-weight: bold;">var</span> <span style="color: #8787d7;">inputReader</span> *<span style="color: #df005f; font-weight: bold;">bufio.Reader</span>
<span style="color: #268bd2; font-weight: bold;">var</span> <span style="color: #8787d7;">input</span> <span style="color: #df005f; font-weight: bold;">string</span>
<span style="color: #268bd2; font-weight: bold;">var</span> <span style="color: #8787d7;">err</span> <span style="color: #df005f; font-weight: bold;">error</span>

<span style="color: #268bd2; font-weight: bold;">func</span> <span style="color: #d75fd7; font-weight: bold;">main</span>() {
    inputReader = bufio.<span style="color: #d75fd7; font-weight: bold;">NewReader</span>(os.Stdin)
    fmt.<span style="color: #d75fd7; font-weight: bold;">Println</span>(<span style="color: #2aa198;">"Please enter some input: "</span>)
    input, err = inputReader.<span style="color: #d75fd7; font-weight: bold;">ReadString</span>(<span style="color: #2aa198;">'\n'</span>)
    <span style="color: #268bd2; font-weight: bold;">if</span> err == <span style="color: #d75fd7;">nil</span> {
        fmt.<span style="color: #d75fd7; font-weight: bold;">Printf</span>(<span style="color: #2aa198;">"The input was: %s\n"</span>, input)
    }
} 
</pre>
</div>

<p>
<code>inputReader</code> 是一个指向 <code>bufio.Reader</code> 的指针。 <code>inputReader := bufio.NewReader(os.Stdin)</code> 这行代码，将会创建一个读取器，并将其与标准输入绑定。<br>
</p>

<p>
返回的读取器对象提供一个方法 <code>ReadString(delim byte)</code> ，该方法从输入中读取内容，直到碰到 delim 指定的字符，然后将读取到的内容连同 delim 字符一起放到缓冲区。<br>
</p>

<p>
<code>ReadString</code> 返回读取到的字符串，如果碰到错误则返回 <code>nil</code> 。如果它一直读到文件结束，则返回读取到的字符串和 <code>io.EOF</code> 。如果读取过程中没有碰到 delim 字符，将返回错误 <code>err != nil</code> 。<br>
</p>

<p>
在上面的例子中，我们会读取键盘输入，直到回车键（\n）被按下。<br>
</p>

<p>
屏幕是标准输出 <code>os.Stdout</code> ； <code>os.Stderr</code> 用于显示错误信息，大多数情况下等同于 <code>os.Stdout</code> 。<br>
</p>
</div>
</div>
</div>
<div id="outline-container-orgf820bd3" class="outline-2">
<h2 id="orgf820bd3">从文件中读取输入</h2>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Date: 2022-02-13 20:02 Sun</p>
<p class="author">Author: L.M.haoran</p>
<p class="date">Created: 2022-06-23 Thu 16:06</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
