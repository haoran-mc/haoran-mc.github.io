<!DOCTYPE html>
<html lang="zh">
<head>
<!-- 2023-01-06 -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>LINUX-COMMAND-网络命令</title>
<meta name="author" content="L.M.haoran" />
<meta name="description" content="Copyright © 2022, L.M.haoran, all rights reserved." />
<meta name="generator" content="Org Mode" />
<link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
           <link rel="stylesheet" href="static/css/org.css" type="text/css"  />
           <script type="module" src="static/js/main.js" defer></script>
</head>
<body>
<div id="content" class="content">
<h1 class="title">LINUX-COMMAND-网络命令</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#orgf8ce386">ifconfig</a>
<ul>
<li><a href="#org49fd2d4">mac ifconfig 详解</a>
<ul>
<li><a href="#orgab73db1">lo</a></li>
<li><a href="#org07fd502">gif</a></li>
<li><a href="#orgf0fee5a">stf</a></li>
<li><a href="#orgec5ab5b">XHC20</a></li>
<li><a href="#orgf3b8c4a">en0</a></li>
<li><a href="#orgd8ffe88">p2p0</a></li>
<li><a href="#org3407a52">awdl0</a></li>
<li><a href="#orgf780345">en1 en2</a></li>
<li><a href="#orgf143558">bridge0</a></li>
</ul>
</li>
<li><a href="#org7e8b68e">Linux 使用 ifconfig 查看本机 ip</a></li>
</ul>
</li>
</ul>
</div>
</div>
<ul class="org-ul">
<li>ipconfig /all 查看网络信息<br></li>
<li>tracert www.baidu.com 跟踪路由<br></li>
<li>route print 打印路由表<br></li>
</ul>

<div id="outline-container-orgf8ce386" class="outline-2">
<h2 id="orgf8ce386">ifconfig</h2>
<div class="outline-text-2" id="text-orgf8ce386">
</div>
<div id="outline-container-org49fd2d4" class="outline-3">
<h3 id="org49fd2d4">mac ifconfig 详解</h3>
<div class="outline-text-3" id="text-org49fd2d4">
</div>
<div id="outline-container-orgab73db1" class="outline-4">
<h4 id="orgab73db1">lo</h4>
<div class="outline-text-4" id="text-orgab73db1">
<pre class="example" id="org65d2dbb">
# loopback 本机主机地址
# flag=8049:网络设备状态标识
# UP:网卡处于启动状态
# LOOPBACK:IP数据包回送到本机上,通常用于测试网络配置和本地程序之间通信用
# RUNNING:代表网卡的网线被接上
# MULTICAS:网卡可以发送多播包
# mtu:最大传输单元(这里设置的16384是否以太网设置的？)
lo0: flags=8049&lt;UP,LOOPBACK,RUNNING,MULTICAS&gt; mtu 16384

# 参数? 可以设置值
options=1203&lt;RXCSUM,TXCSUM,TXSTATUS,SW_TIMESTAMP&gt;

# ipv4地址 127.0.0.1 子网掩码 255.0.0.0
inet 127.0.0.1 netmask 0xff000000

inet6 ::1 prefixlen 128

# ipv6地址
inet6 fe80::1%lo0 prefixlen 64 scopeid 0x1

nd6 options=201&lt;PERFORMNUD,DAD&gt;
</pre>
</div>
</div>
<div id="outline-container-org07fd502" class="outline-4">
<h4 id="org07fd502">gif</h4>
<div class="outline-text-4" id="text-org07fd502">
<pre class="example" id="org8593965">
# software network interface 网络接口
# POINTOPOINT: 允许2台机器点对点直连
# MULTICAS:网卡可以发送多播包
# mtu:最大传输单元(这里设置的1280是否以太网设置的？)
gif0: flags=8010&lt;POINTOPOINT,MULTICAST&gt; mtu 1280
</pre>
</div>
</div>
<div id="outline-container-orgf0fee5a" class="outline-4">
<h4 id="orgf0fee5a">stf</h4>
<div class="outline-text-4" id="text-orgf0fee5a">
<pre class="example" id="org7e7ce82">
# stf 6to4 tunnel interface 配置隧道
stf0: flags=0&lt;&gt; mtu 1280
</pre>
</div>
</div>
<div id="outline-container-orgec5ab5b" class="outline-4">
<h4 id="orgec5ab5b">XHC20</h4>
<div class="outline-text-4" id="text-orgec5ab5b">
<pre class="example" id="orgfd6d65e">
# XHC20
XHC20: flags=0&lt;&gt; mtu 0
</pre>
</div>
</div>
<div id="outline-container-orgf3b8c4a" class="outline-4">
<h4 id="orgf3b8c4a">en0</h4>
<div class="outline-text-4" id="text-orgf3b8c4a">
<pre class="example" id="org7fd7f44">
# en0: 以太网0
# flags=8863:网络状态标识
# BROADCAST:有广播地址，支持发广播包
# SMART:
# RUNNING:代表网卡的网线被接上
# MULTICAS:网卡可以发送多播包
# mtu: 最大传输单元
en0: flags=8863&lt;UP,BROADCAST,SMART,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
  ether c4:b3:01:ce:06:11
  # ipv4地址 子网掩码 广播地址
  inet 192.168.1.11 netmask 0xffffff00 broadcast 192.168.1.255
  # 网络媒介类型 (可手动指定)
  media: autoselect
  # 激活状态
  status: active
</pre>
</div>
</div>
<div id="outline-container-orgd8ffe88" class="outline-4">
<h4 id="orgd8ffe88">p2p0</h4>
<div class="outline-text-4" id="text-orgd8ffe88">
<pre class="example" id="org5808eec">
# p2p0:Point-to-Point 协议
p2p0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 2304
  ether 06:b3:01:ce:06:11
  # 网络媒介类型
  media: autoselect
  # 闲置的
  status: inactive
</pre>
</div>
</div>
<div id="outline-container-org3407a52" class="outline-4">
<h4 id="org3407a52">awdl0</h4>
<div class="outline-text-4" id="text-org3407a52">
<pre class="example" id="orgb8250a8">
# awdl0: airdrop peer to peer(一种mesh network)，apple airdrop设备特有
# Apple: 无线直接链接
# PROMISC: 允许混杂的模式(全部的数据会被接口接收)
awdl0: flags=8943&lt;UP,BROADCAST,RUNNING,PROMISC,SIMPLEX,MULTICAST&gt; mtu 1484
  ether a6:04:50:c4:66:92
  inet6 fe80::a404:50ff:fec4:6692%awdl0 prefixlen 64 scopeid 0x7
  nd6 options=201&lt;PERFORMNUD,DAD&gt;
  # 网络媒介类型
  media: autoselect
  # 激活状态
  status: active
</pre>
</div>
</div>
<div id="outline-container-orgf780345" class="outline-4">
<h4 id="orgf780345">en1 en2</h4>
<div class="outline-text-4" id="text-orgf780345">
<p>
此处为何这么多 en 接口呢，运行命令行 <code>networksetup -listallhardwareports</code> 可查看具体接口是做何操作的<br>
</p>

<pre class="example" id="orgaf74742">
  Hardware Port: Wi-Fi
  Device: en0
  Ethernet Address: c4:b3:01:ce:06:11

  Hardware Port: Bluetooth PAN
  Device: en3
  Ethernet Address: c4:b3:01:ce:06:12

  Hardware Port: Thunderbolt 1
  Device: en1
  Ethernet Address: 4a:00:07:5c:bd:00

  Hardware Port: Thunderbolt 2
  Device: en2
  Ethernet Address: 4a:00:07:5c:bd:01

  Hardware Port: Thunderbolt Bridge
  Device: bridge0
  Ethernet Address: 4a:00:07:5c:bd:00

  VLAN Configurations
===================
</pre>

<pre class="example" id="org7a4a1b2">
# en1: 以太网1 雷电口1
en1: flags=8963&lt;UP,BROADCAST,SMART,RUNNING,PROMISC,SIMPLEX,MULTICAST&gt; mtu 1500
  options=60&lt;TSO4,TSO6&gt;
  ether 4a:00:07:5c:bd:00
  media: autoselect &lt;full-duplex&gt;
  status: inactive

  en2: flags=8963&lt;UP,BROADCAST,SMART,RUNNING,PROMISC,SIMPLEX,MULTICAST&gt; mtu 1500
  options=60&lt;TSO4,TSO6&gt;
  ether 4a:00:07:5c:bd:01
  media: autoselect &lt;full-duplex&gt;
  status: inactive
</pre>
</div>
</div>
<div id="outline-container-orgf143558" class="outline-4">
<h4 id="orgf143558">bridge0</h4>
<div class="outline-text-4" id="text-orgf143558">
<pre class="example" id="orgd6c26e8">
# 具体google下桥接知识
bridge0: flags=8822&lt;BROADCAST,SMART,SIMPLEX,MULTICAST&gt; mtu 1500
  options=63&lt;RXCSUM,TXCSUM,TSO4,TSO6&gt;
  ether 4a:00:07:5c:bd:00
  Configuration:
	  id 0:0:0:0:0:0 priority 0 hellotime 0 fwddelay 0
	  maxage 0 holdcnt 0 proto stp maxaddr 100 timeout 1200
	  root id 0:0:0:0:0:0 priority 0 ifcost 0 port 0
	  ipfilter disabled flags 0x2
  member: en1 flags=3&lt;LEARNING,DISCOVER&gt;
	      ifmaxaddr 0 port 8 priority 0 path cost 0
  member: en2 flags=3&lt;LEARNING,DISCOVER&gt;
	      ifmaxaddr 0 port 9 priority 0 path cost 0
  media: &lt;unknown type&gt;
  status: inactive
</pre>
</div>
</div>
</div>
<div id="outline-container-org7e8b68e" class="outline-3">
<h3 id="org7e8b68e">Linux 使用 ifconfig 查看本机 ip</h3>
<div class="outline-text-3" id="text-org7e8b68e">
<p>
在终端中输入 ifconfig 可以看到很多的信息，其中包含了本机的 ip，但是信息过多，及时你知道从哪查找，每次看也会头晕，我们需要的精确找到本机 ip 的方法。<br>
</p>

<p>
在 Linux 中使用命令<br>
</p>

<div class="org-src-container">
<pre class="src src-bash">$ ifconfig eth0
eth0: <span style="color: #ffcb6b;">flags</span>=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500
inet 172.17.8.241  netmask 255.255.240.0  broadcast 172.17.15.255
ether 00:16:3e:0c:ec:10  txqueuelen 1000  (Ethernet)
RX packets 215013189  bytes 59080762287 (55.0 GiB)
RX errors 0  dropped 0  overruns 0  frame 0
TX packets 125960779  bytes 124345275246 (115.8 GiB)
TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
</pre>
</div>

<p>
第二行的第一个 ip 就是本机 ip 172.17.8.241<br>
</p>

<p>
在 MaxOS 中稍有不同，命令为<br>
</p>

<div class="org-src-container">
<pre class="src src-bash">$ ifconfig en0
</pre>
</div>

<p>
接下来我们使用 grep awk 来进行精准获取<br>
</p>

<p>
CentOS<br>
</p>
<div class="org-src-container">
<pre class="src src-bash">$ ifconfig eth0 | grep inet | grep -v inet6 | awk <span style="color: #c3e88d;">'{print $2}'</span>
</pre>
</div>

<p>
Ubuntu<br>
</p>
<div class="org-src-container">
<pre class="src src-bash">$ ifconfig eth0 | grep inet | grep -v inet6 | awk <span style="color: #c3e88d;">'{print $2}'</span> | awk -v <span style="color: #ffcb6b;">FS</span>=<span style="color: #c3e88d;">":"</span> <span style="color: #c3e88d;">'{print $2}'</span>
</pre>
</div>

<p>
MacOS<br>
</p>
<div class="org-src-container">
<pre class="src src-bash">$ ifconfig en0 | grep inet | grep -v inet6 | awk <span style="color: #c3e88d;">'{print $2}'</span>
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: L.M.haoran</p>
<p class="date">Created: 2023-01-06</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
