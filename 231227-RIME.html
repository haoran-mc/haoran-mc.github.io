<!DOCTYPE html>
<html lang="en">
<head>
<!-- 2024-01-14 Sun 12:24 -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>RIME</title>
<meta name="author" content="Haoran Liu" />
<meta name="generator" content="Org Mode" />
<link rel="shortcut icon" href="assets/favicon.ico" type="image/x-icon" />
           <link rel="stylesheet" href="css/org.css" type="text/css"  />
           <script type="module" src="js/main.js" defer></script>
</head>
<body>
<div id="content" class="content">
<h1 class="title">RIME</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#orgad3731a">介绍概念</a>
<ul>
<li><a href="#orgd422e7d">什么是码表？</a></li>
<li><a href="#orgd29038f">RIME</a></li>
</ul>
</li>
<li><a href="#org97c999d">为什么选择 RIME 输入法？</a></li>
<li><a href="#org8ae7481">卸载 RIME</a></li>
<li><a href="#org62f5901">安装 RIME</a>
<ul>
<li><a href="#org93a4c51">1. 安装「鼠须管」</a></li>
<li><a href="#org4cc4f61">2. 下载 plum 输入法方案安装工具</a></li>
<li><a href="#orge06986e">3. 下载 <span class="underline">输入法方案</span></a></li>
</ul>
</li>
<li><a href="#org299f2b0">RIME 的配置文件</a>
<ul>
<li><a href="#org3e66d7b">RIME 的配置惯例</a></li>
<li><a href="#orgc4ef990">default.custom.yaml 使用小鹤双拼</a></li>
<li><a href="#org3031ad2">double_pinyin_flypy.custom.yaml 定制小鹤双拼</a></li>
</ul>
</li>
<li><a href="#org5536cbe">进阶配置</a>
<ul>
<li><a href="#org8822752">输入特殊字符</a></li>
<li><a href="#org3814834">输入 emoji</a></li>
</ul>
</li>
<li><a href="#org8655f1a">推荐阅读</a></li>
</ul>
</div>
</div>

<div id="outline-container-orgad3731a" class="outline-2">
<h2 id="orgad3731a">介绍概念</h2>
<div class="outline-text-2" id="text-orgad3731a">
<dl class="org-dl">
<dt>输入法</dt><dd>全拼、双拼、手写、五笔&#x2026;<br></dd>
<dt>输入法方案</dt><dd>abc双拼、自然码双拼、微软双拼、小鹤双拼、明月拼音、86版五笔&#x2026;<br></dd>
<dt>输入法框架</dt><dd>IBus 输入法框架、Fcitx 输入法框架、RIME输入法框架&#x2026;<br></dd>
<dt>输入法引擎</dt><dd>搜狗输入法引擎、百度输入法引擎、谷歌拼音输入法引擎、微软拼音输入法引擎、中州韵输入法引擎&#x2026;<br></dd>
</dl>
</div>

<div id="outline-container-orgd422e7d" class="outline-3">
<h3 id="orgd422e7d">什么是码表？</h3>
<div class="outline-text-3" id="text-orgd422e7d">
<p>
也就是词库，实现编码到文字转换的字典数据。<br>
</p>

<p>
例子：nihao 会转化为『你好』<br>
</p>
</div>
</div>

<div id="outline-container-orgd29038f" class="outline-3">
<h3 id="orgd29038f">RIME</h3>
<div class="outline-text-3" id="text-orgd29038f">
<p>
雾凇英文翻译为 Rime。<br>
</p>

<p>
Rime 输入法框架有时候也会直接说 Rime 输入法。<br>
</p>

<p>
Rime 输入法引擎又叫中州韵输入法引擎，指的是 librime。<br>
</p>
</div>
</div>
</div>

<div id="outline-container-org97c999d" class="outline-2">
<h2 id="org97c999d">为什么选择 RIME 输入法？</h2>
</div>

<div id="outline-container-org8ae7481" class="outline-2">
<h2 id="org8ae7481">卸载 RIME</h2>
<div class="outline-text-2" id="text-org8ae7481">
<pre class="example" id="orged78f5e">
brew uninstall --cask squirrel
sudo rm -rf ~/Library/Rime
</pre>
</div>
</div>

<div id="outline-container-org62f5901" class="outline-2">
<h2 id="org62f5901">安装 RIME</h2>
<div class="outline-text-2" id="text-org62f5901">
<p>
RIME 输入法框架提供了一套灵活的架构，用户可以在其基础上选择合适的输入法引擎、输入法方案和输入法的定制。<br>
</p>

<p>
RIME 默认使用的输入法引擎是『中州韵输入法引擎』（librime）。<br>
</p>

<p>
RIME 在不同的平台下有不同的前端，这些前端有自己的名字：<br>
</p>

<ul class="org-ul">
<li>macOS: 鼠须管<br></li>
<li>Linux: 中州韵<br></li>
<li>Windows: 小狼毫<br></li>
<li>Android: 同文输入法<br></li>
</ul>
</div>

<div id="outline-container-org93a4c51" class="outline-3">
<h3 id="org93a4c51">1. 安装「鼠须管」</h3>
<div class="outline-text-3" id="text-org93a4c51">
<pre class="example" id="org02541d5">
brew install --cask squirrel
</pre>

<p>
默认配置了 librime 和一些输入法方案，其他的输入法方案需要额外安装。<br>
</p>
</div>
</div>

<div id="outline-container-org4cc4f61" class="outline-3">
<h3 id="org4cc4f61">2. 下载 plum 输入法方案安装工具</h3>
<div class="outline-text-3" id="text-org4cc4f61">
<p>
添加输入法方案需要用到输入法方案安装工具『东风破』（plum）。<br>
</p>

<pre class="example" id="org685a409">
# 克隆位置随意
git clone https://github.com/rime/plum.git
</pre>
</div>
</div>

<div id="outline-container-orge06986e" class="outline-3">
<h3 id="orge06986e">3. 下载 <span class="underline">输入法方案</span></h3>
<div class="outline-text-3" id="text-orge06986e">
<p>
使用 plum 下载输入法方案：<br>
</p>

<pre class="example" id="orgadd2781">
cd plum
# 需要代理
bash rime-install --select :all lotem/rime-forge/lotem-packages.conf
</pre>

<p>
然后它会列出所有可以安装的方案，让你选择要安装哪些。<br>
</p>

<p>
首先 <a href="https://github.com/rime/rime-prelude">prelude</a> 和 <a href="https://github.com/rime/home/wiki/RimeWithSchemata#%E5%85%AB%E8%82%A1%E6%96%87">essay</a> 是一定要安装的，因为是其他方案的基础，它们不是输入法方案，而只是配置文件。<br>
</p>

<p>
我的话，平时使用小鹤双拼，小鹤双拼在 double-pinyin 输入法方案里面，而 <a href="https://github.com/rime/rime-double-pinyin">double-pinyin</a> 依赖明月拼音（luna-pinyin），所以还需要使用 plum 下载 luna-pinyin。<br>
</p>

<ul class="org-ul">
<li>prelude<br></li>
<li>essay<br></li>
<li>luna-pinyin<br></li>
<li>double-pinyin<br></li>
</ul>

<p>
但其实全部安装也行，真正的开启是在配置文件中。<br>
</p>

<p>
☆ 但是我只安裝了 prelude 和 double-pinyin，发现也是可以使用的。但是只安装 double-pinyin 不可以，没有 default.yaml 入口配置文件。<br>
</p>

<p>
☆ 虽然我没有安装 luna-pinyin，但是我的 Rime 用户配置目录中有 <verbatim>luna_pinyin.Userdb/</verbatim> 这个文件夹，所以下载 double-pinyin 时，会帮助下载依赖 luna-pinyin。<br>
</p>
</div>
</div>
</div>

<div id="outline-container-org299f2b0" class="outline-2">
<h2 id="org299f2b0">RIME 的配置文件</h2>
<div class="outline-text-2" id="text-org299f2b0">
<pre class="example" id="orgf48363d">
~/Library/Rime
├── sync/                        # 每次同步 RIME 就会更新这个目录
├── luna_pinyin.Userdb/          #
├── double_pinyin_*.schema.yaml  # ☑ 增加 double_pinyin_flypy.custom.yaml 小鹤双拼配置文件
├── symbols.yaml                 #
├── punctuation.yaml             #
├── key_bindings.yaml            #
├── default.yaml                 # ☑ 默认配置（入口配置）的自定义文件
├── user.yaml                    # 存放用户最新部署时间等信息
├── build/                       # 每次重新对 RIME 部署就会更新这个目录
└── installation.yaml            # 记录安装信息、版本信息
</pre>

<p>
总而言之，想要基于 RIME 快速配置一个可用的小鹤双拼输入法，需要改这两个配置文件： <verbatim>default.custom.yaml</verbatim> 和 <verbatim>double_pinyin_flypy.custom.yaml</verbatim> ，前者用于指定输入方案，后者用于定制小鹤双拼以及引入词典等。<br>
</p>
</div>

<div id="outline-container-org3e66d7b" class="outline-3">
<h3 id="org3e66d7b">RIME 的配置惯例</h3>
<div class="outline-text-3" id="text-org3e66d7b">
<p>
RIME 的配置文件采用 yaml 格式，为了预防 RIME 的更新导致配置文件的覆盖，RIME 要求用户自定义的配置文件在扩展名之前添加 <code>.custom</code> ，即 <verbatim>double_pinyin_flypy.schema.yaml</verbatim> 小鹤双拼的用户自定义文件是 <verbatim>double_pinyin_flypy.custom.yaml</verbatim> 。<br>
</p>

<p>
自定义文件配置除了文件名又差异之外，它的配置项也比默认的多一个层级。需要统一放在 <code>patch</code> 节点之下，上下级关系要换成 <code>/</code> 的方式）。<br>
</p>

<div class="org-src-container">
<pre class="src src-yaml"><span style="color: #268bd2;">patch</span>:
  <span style="color: #268bd2;">schema_list</span>:
    - <span style="color: #268bd2;">schema</span>: double_pinyin_flypy
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc4ef990" class="outline-3">
<h3 id="orgc4ef990">default.custom.yaml 使用小鹤双拼</h3>
<div class="outline-text-3" id="text-orgc4ef990">
<div class="org-src-container">
<pre class="src src-yaml"><span style="color: #268bd2;">patch</span>:
  <span style="color: #268bd2;">schema_list</span>:
    - <span style="color: #268bd2;">schema</span>: double_pinyin_flypy  <span style="color: #96A7A9; font-style: italic;"># </span><span style="color: #96A7A9; font-style: italic;">&#20351;&#29992;&#23567;&#40548;&#21452;&#25340;</span>

  <span style="color: #96A7A9; font-style: italic;"># </span><span style="color: #96A7A9; font-style: italic;">&#24038; shift &#38190;&#20999;&#25442;&#21040;&#33521;&#25991;&#36755;&#20837;&#29366;&#24577;</span>
  <span style="color: #268bd2;">ascii_composer/switch_key/Shift_L</span>: commit_code
  <span style="color: #96A7A9; font-style: italic;"># </span><span style="color: #96A7A9; font-style: italic;">&#21491; shift &#38190;&#20999;&#25442;&#21040;&#33521;&#25991;&#36755;&#20837;&#29366;&#24577;</span>
  <span style="color: #268bd2;">ascii_composer/switch_key/Shift_R</span>: commit_code
</pre>
</div>

<p>
原文件（default.yaml）中上下级关系的选项，在 patch 中都平着写，比如原文件的 switch_key 是 ascii_composer 的子级，在 patch 中就用 <code>/</code> 来分隔表示上下级关系，写成 <code>switch_key/ascii_composer</code> ；<br>
</p>
</div>
</div>

<div id="outline-container-org3031ad2" class="outline-3">
<h3 id="org3031ad2">double_pinyin_flypy.custom.yaml 定制小鹤双拼</h3>
<div class="outline-text-3" id="text-org3031ad2">
<p>
RIME 默认使用繁体，非常傻逼，我也不明白为什么。<br>
</p>

<p>
使用简体需要在 <code>[ 漢字, 汉字 ]</code> 前面增加一行 <code>reset: 1</code> 。<br>
</p>

<div class="org-src-container">
<pre class="src src-yaml"><span style="color: #268bd2;">patch</span>:
  <span style="color: #268bd2;">switches</span>:
    - <span style="color: #268bd2;">name</span>: ascii_mode
      <span style="color: #268bd2;">states</span>: [<span style="color: #2aa198;">"&#20013;&#25991;"</span>, <span style="color: #2aa198;">"&#35199;&#25991;"</span>]
    - <span style="color: #268bd2;">name</span>: full_shape
      <span style="color: #268bd2;">states</span>: [<span style="color: #2aa198;">"&#21322;&#35282;"</span>, <span style="color: #2aa198;">"&#20840;&#35282;"</span>]
    - <span style="color: #268bd2;">name</span>: simplification
      <span style="color: #268bd2;">reset</span>: 1                  <span style="color: #96A7A9; font-style: italic;"># </span><span style="color: #96A7A9; font-style: italic;">&#40664;&#35748;&#31616;&#20307;</span>
      <span style="color: #268bd2;">states</span>: [<span style="color: #2aa198;">"&#28450;&#23383;"</span>, <span style="color: #2aa198;">"&#27721;&#23383;"</span>]
    - <span style="color: #268bd2;">name</span>: ascii_punct
      <span style="color: #268bd2;">states</span>: [<span style="color: #2aa198;">"&#12290;&#65292;"</span>, <span style="color: #2aa198;">"&#65294;&#65292;"</span>]
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org5536cbe" class="outline-2">
<h2 id="org5536cbe">进阶配置</h2>
<div class="outline-text-2" id="text-org5536cbe">
</div>
<div id="outline-container-org8822752" class="outline-3">
<h3 id="org8822752">输入特殊字符</h3>
<div class="outline-text-3" id="text-org8822752">
<div class="org-src-container">
<pre class="src src-yaml"><span style="color: #96A7A9; font-style: italic;"># </span><span style="color: #96A7A9; font-style: italic;">symbols    Rime &#39044;&#35774;&#37197;&#32622;&#26159;&#20197; '/' &#21069;&#32512;&#24320;&#22836;&#36755;&#20986;&#19968;&#31995;&#21015;&#23383;&#31526;&#65292;&#33258;&#23450;&#20041;&#30340; symbols_caps_s.yaml &#20462;&#25913;&#25104;&#20102; 'S' &#24320;&#22836;</span>
<span style="color: #268bd2;">punctuator</span>:
  <span style="color: #268bd2;">symbols</span>:
    <span style="color: #268bd2;">__include</span>: symbols_caps_s:/symbols         <span style="color: #96A7A9; font-style: italic;"># </span><span style="color: #96A7A9; font-style: italic;">&#20174; symbols_caps_s.yaml &#23548;&#20837;&#37197;&#32622;</span>

<span style="color: #96A7A9; font-style: italic;"># </span><span style="color: #96A7A9; font-style: italic;">&#22788;&#29702;&#31526;&#21512;&#29305;&#23450;&#35268;&#21017;&#30340;&#36755;&#20837;&#30721;&#65292;&#22914;&#32593;&#22336;&#12289;&#37038;&#31665;</span>
<span style="color: #268bd2;">recognizer</span>:
  <span style="color: #268bd2;">import_preset</span>: default  <span style="color: #96A7A9; font-style: italic;"># </span><span style="color: #96A7A9; font-style: italic;">&#20174; default.yaml &#32487;&#25215;&#36890;&#29992;&#30340;</span>
  <span style="color: #268bd2;">patterns</span>:  <span style="color: #96A7A9; font-style: italic;"># </span><span style="color: #96A7A9; font-style: italic;">&#20877;&#22686;&#21152;&#26041;&#26696;&#19987;&#26377;&#30340;&#65306;</span>
    <span style="color: #268bd2;">punct</span>: <span style="color: #2aa198;">"^S([0-9]|10|[A-Za-z]+)$"</span>  <span style="color: #96A7A9; font-style: italic;"># </span><span style="color: #96A7A9; font-style: italic;">&#21709;&#24212; symbols_caps_s.yaml &#30340; symbols</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org3814834" class="outline-3">
<h3 id="org3814834">输入 emoji</h3>
<div class="outline-text-3" id="text-org3814834">
<p>
使用 plum 下载 emoji；<br>
</p>

<p>
然后在 double_pinyin_flypy.custom.yaml 中添加下面配置。<br>
</p>

<div class="org-src-container">
<pre class="src src-yaml"><span style="color: #268bd2;">__patch</span>:
<span style="color: #96A7A9; font-style: italic;"># </span><span style="color: #96A7A9; font-style: italic;">Rx: emoji:customize:schema=luna_pinyin_simp {</span>
  - <span style="color: #268bd2;">patch/+</span>:
      <span style="color: #268bd2;">__include</span>: emoji_suggestion:/patch
<span style="color: #96A7A9; font-style: italic;"># </span><span style="color: #96A7A9; font-style: italic;">}</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org8655f1a" class="outline-2">
<h2 id="org8655f1a">推荐阅读</h2>
<div class="outline-text-2" id="text-org8655f1a">
<p>
<b>官方文档：</b><br>
</p>
<dl class="org-dl">
<dt><a href="https://github.com/rime/home/wiki/Introduction">认识RIME</a></dt><dd>RIME 的历史<br></dd>
<dt><a href="https://github.com/rime/home/wiki/RimeWithSchemata">必知必会</a></dt><dd>概念、必知必会、候选词、词典；<br></dd>
<dt><a href="https://github.com/rime/home/wiki/CustomizationGuide">定制指南</a>（初级）</dt><dd>定制例子；<br></dd>
<dt><a href="https://github.com/LEOYoon-Tsaw/Rime_collections/blob/master/Rime_description.md">输入方案及词典中各设定的含义及用法</a></dt><dd>含义、用法；<br></dd>
<dt><a href="https://github.com/rime/home/wiki/DictionaryPack">词典扩展包</a></dt><dd>添加词语；<br></dd>
<dt><a href="https://github.com/rime/home/wiki/RimeWithTheDesign">设计框架</a></dt><dd>引擎、框架<br></dd>
</dl>

<p>
<span class="underline">忍不住吐槽，官方文档真差劲。</span><br>
</p>


<p>
<b>第三方文档：</b><br>
</p>
<dl class="org-dl">
<dt><a href="https://www.xiebruce.top/1235.html">macOS安装配置RIME-鼠须管输入法</a></dt><dd>有一些错误，比如必须安装 essay，但是非常详细；<br></dd>
<dt><a href="https://whatacold.io/zh-cn/blog/2022-10-04-rime-double-pinyin-flypy/">RIME 小鹤双拼快速设置</a></dt><dd>介绍配置文件介绍的非常清晰；<br></dd>
<dt><a href="https://dvel.me/posts/rime-ice/">Rime 配置：雾凇拼音</a></dt><dd>他的配置很好，可以学着用；<br></dd>
</dl>
</div>
</div>
</div>
</body>
</html>
