<!DOCTYPE html>
<html lang="zh">
<head>
<!-- 2022-08-30 二 21:05 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>localStorage、sessionStorage、cookie、session几种web数据存储方式对比总结</title>
<meta name="generator" content="Org mode">
<meta name="author" content="HaoRan Liu">
<meta name="description" content="Copyright © 2022, HaoRan Liu, all rights reserved."
>
<link rel="stylesheet" href="static/css/org.css" type="text/css"  />
      <script type="module" src="static/js/main.js" defer></script>
      <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
</head>
<body>
<div id="content">
<h1 class="title">localStorage、sessionStorage、cookie、session几种web数据存储方式对比总结</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgd3baf0b">cookie 与 session 的区别</a></li>
<li><a href="#org7b03013">cookie 的使用</a></li>
<li><a href="#org97588e9">localStorage 和 sessionStorage</a></li>
</ul>
</div>
</div>

<div id="outline-container-orgd3baf0b" class="outline-2">
<h2 id="orgd3baf0b">cookie 与 session 的区别</h2>
<div class="outline-text-2" id="text-orgd3baf0b">
<p>
<a href="Cookie与Session.html#orgbd68f78">Cookie 与 Session 的区别</a><br>
</p>
</div>
</div>
<div id="outline-container-org7b03013" class="outline-2">
<h2 id="org7b03013">cookie 的使用</h2>
<div class="outline-text-2" id="text-org7b03013">
<p>
cookie 可通过 document.cookie 获取全部 cookie。它是一段字符串，是键值对的形式。<br>
</p>

<div class="org-src-container">
<pre class="src src-js">Cookies.set(<span style="color: #f1fa8c;">"name"</span>, <span style="color: #f1fa8c;">"value"</span>, { expires: 7 }); <span style="color: #6272a4;">// </span><span style="color: #6272a4;">&#35774;&#32622;&#19968;&#20010;cookie&#65292;7&#22825;&#21518;&#22833;&#25928;</span>

Cookies.get(<span style="color: #f1fa8c;">"name"</span>); <span style="color: #6272a4;">// </span><span style="color: #6272a4;">=&gt; 'value'</span>

Cookies.remove(<span style="color: #f1fa8c;">"name"</span>);
</pre>
</div>
</div>
</div>
<div id="outline-container-org97588e9" class="outline-2">
<h2 id="org97588e9">localStorage 和 sessionStorage</h2>
<div class="outline-text-2" id="text-org97588e9">
<p>
在 web 本地存储场景上，cookie 的使用受到种种限制，最关键的就是存储容量太小和数据无法持久化存储。<br>
</p>

<p>
在 HTML 5 的标准下，出现了 localStorage 和 sessionStorage 供我们使用。<br>
</p>

<p>
cookie、localStorage 以及 sessionStorage 的异同点：<br>
</p>

<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">

<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">分类</th>
<th scope="col" class="org-left">生命周期</th>
<th scope="col" class="org-left">存储容量</th>
<th scope="col" class="org-left">存储位置</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">cookie</td>
<td class="org-left">默认保存在内存中，随浏览器关闭失效（如果设置过期时间，在到过期时间后失效）</td>
<td class="org-left">4KB</td>
<td class="org-left">保存在客户端，每次请求时都会带上</td>
</tr>

<tr>
<td class="org-left">localStorage</td>
<td class="org-left">理论上永久有效的，除非主动清除。</td>
<td class="org-left">4.98MB（不同浏览器情况不同，safari 2.49M）</td>
<td class="org-left">保存在客户端，不与服务端交互。节省网络流量</td>
</tr>

<tr>
<td class="org-left">sessionStorage</td>
<td class="org-left">仅在当前网页会话下有效，关闭页面或浏览器后会被清除。</td>
<td class="org-left">4.98MB（部分浏览器没有限制）</td>
<td class="org-left">同上</td>
</tr>
</tbody>
</table>


<p>
应用场景：localStorage 适合持久化缓存数据，比如页面的默认偏好配置等；sessionStorage 适合一次性临时数据保存。<br>
</p>

<p>
WebStorage( localStorage 和 sessionStorage ) 本身就提供了比较好用的方法：<br>
</p>

<div class="org-src-container">
<pre class="src src-js">localStorage.setItem(<span style="color: #f1fa8c;">"name"</span>, <span style="color: #f1fa8c;">"value"</span>);
localStorage.getItem(<span style="color: #f1fa8c;">"name"</span>); <span style="color: #6272a4;">// </span><span style="color: #6272a4;">=&gt; 'value'</span>
localStorage.removeItem(<span style="color: #f1fa8c;">"name"</span>);
localStorage.clear(); <span style="color: #6272a4;">// </span><span style="color: #6272a4;">&#21024;&#38500;&#25152;&#26377;&#25968;&#25454;</span>

sessionStorage.setItem(<span style="color: #f1fa8c;">"name"</span>, <span style="color: #f1fa8c;">"value"</span>);
sessionStorage.setItem(<span style="color: #f1fa8c;">"name"</span>);
sessionStorage.setItem(<span style="color: #f1fa8c;">"name"</span>);
sessionStorage.clear();
</pre>
</div>

<p>
注意事项：<br>
</p>

<ul class="org-ul">
<li>localStorage 写入的时候，如果超出容量会报错，但之前保存的数据不会丢失。<br></li>
<li>localStorage 存储容量快要满的时候，getItem 方法性能会急剧下降。<br></li>
<li>web storage 在保存复杂数据类型时，较为依赖 JSON.stringify，在移动端性能问题比较明显。<br></li>
</ul>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Date: 2022-08-30 20:08 二</p>
<p class="author">Author: HaoRan Liu</p>
<p class="date">Created: 2022-08-30 二 21:05</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
