<!DOCTYPE html>
<html lang="zh">
<head>
<!-- 2022-05-13 Fri 19:55 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>环境</title>
<meta name="generator" content="Org mode">
<meta name="author" content="L.M.haoran">
<meta name="description" content="Copyright © 2022, L.M.haoran, all rights reserved."
>

                <link rel="stylesheet" href="static/css/org.css" type="text/css"  />
                <script type="module" src="static/js/main.js" defer></script>
                <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "0em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script type="text/javascript"
        src="static/MathJax/cdn.bootcdn.net/ajax/libs/mathjax/3.1.2/es5/tex-mml-chtml.min.js"></script>
</head>
<body>
<div id="content">
<h1 class="title">环境</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org6b0305a">Windows10 Java8u201</a></li>
<li><a href="#orgc77ab5c">Windows10 Hadoop2.7.3</a>
<ul>
<li><a href="#org6b52a7a">jdk</a></li>
<li><a href="#orga514e7e">下载 Hadoop 压缩包</a></li>
<li><a href="#org7eb21c1">解压 Hadoop 压缩包</a></li>
<li><a href="#org3ac86c8">设置环境变量</a></li>
<li><a href="#org9bd6ce7">编辑 Hadoop 配置文件</a>
<ul>
<li><a href="#orgbdf87c3">新建 data 目录和子目录</a></li>
<li><a href="#orge320c06">Hadoop 寻找 jdk</a></li>
<li><a href="#orgf1ba4f4">修改 Hadoop 配置文件</a></li>
<li><a href="#orge5e43e2">下载配置 Windows 环境需要的库文件</a></li>
</ul>
</li>
<li><a href="#org0c7dcb5">启动 Hadoop</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-org6b0305a" class="outline-2">
<h2 id="org6b0305a">Windows10 Java8u201</h2>
<div class="outline-text-2" id="text-org6b0305a">
<ol class="org-ol">
<li><p>
下载 <a href="https://www.oracle.com/java/technologies/javase/javase8-archive-downloads.html">jdk8u201</a>，然后将 jdk 安装到目录 C:\Java。<br>
</p>

<div class="div-center">
	<img src="./images/jdk8u201_01.png" width="990px" />
</div>

<p>
默认 jdk 会安装在 Program Files 目录下，这个目录名有空格，很不好，建议安装在没有空格、没有中文目录名的目录下。<br>
</p>

<div class="div-center">
	<img src="./images/jdk8u201_02.png" width="990px" />
</div></li>
<li><p>
JAVA_HOME<br>
</p>

<pre class="example">
C:\Java\jdk1.8.0_201
</pre>

<div class="div-center">
	<img src="./images/JAVA_HOME.png" width="620px" />
</div></li>

<li><p>
CLASSPATH<br>
</p>

<pre class="example">
.;%JAVA_HOME%\lib;%JAVA_HOME%\lib\dt.jar;%JAVA_HOME%\lib\tools.jar
</pre>

<div class="div-center">
	<img src="./images/CLASSPATH.png" width="620px" />
</div></li>

<li><p>
path_java_home<br>
</p>

<pre class="example">
%JAVA_HOME%\bin
%JAVA_HOME%\jre\bin
</pre>

<div class="div-center">
<img src="./images/path_java_home.png" />
</div></li>

<li><p>
检验 jdk 是否安装成功<br>
</p>

<div class="org-src-container">
<pre class="src src-bash"><span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#21629;&#20196;&#34892;&#36816;&#34892;</span>
java
javac
java -version
</pre>
</div></li>
</ol>
</div>
</div>

<div id="outline-container-orgc77ab5c" class="outline-2">
<h2 id="orgc77ab5c">Windows10 Hadoop2.7.3</h2>
<div class="outline-text-2" id="text-orgc77ab5c">
</div>
<div id="outline-container-org6b52a7a" class="outline-3">
<h3 id="org6b52a7a">jdk</h3>
<div class="outline-text-3" id="text-org6b52a7a">
<ul class="org-ul">
<li>先下载安装 jdk8u201，要是 64 位的，如果不是 64 位的，在启动资源节点管理器时会出现错误<br></li>
</ul>
</div>
</div>
<div id="outline-container-orga514e7e" class="outline-3">
<h3 id="orga514e7e">下载 Hadoop 压缩包</h3>
<div class="outline-text-3" id="text-orga514e7e">
<ul class="org-ul">
<li><p>
下载 hadoop 到 C:\Users\haora\haoran\Environment\hadoop<br>
</p>

<pre class="example">
http://archive.apache.org/dist/hadoop/
http://archive.apache.org/dist/hadoop/common/hadoop-2.7.3/hadoop-2.7.3.tar.gz
</pre></li>
</ul>
</div>
</div>
<div id="outline-container-org7eb21c1" class="outline-3">
<h3 id="org7eb21c1">解压 Hadoop 压缩包</h3>
<div class="outline-text-3" id="text-org7eb21c1">
<ul class="org-ul">
<li><p>
下载可以在 Windows 上解压 .tar.gz 压缩包的软件，作者这里使用 wsl 中的 tar 命令解压 hadoop 压缩包<br>
</p>

<div class="org-src-container">
<pre class="src src-bash"><span style="color: #268bd2;">cd</span> C:\Users\haora\haoran\Environment\hadoop
tar xzvf hadoop-2.7.3.tar.gz
</pre>
</div></li>
</ul>
</div>
</div>
<div id="outline-container-org3ac86c8" class="outline-3">
<h3 id="org3ac86c8">设置环境变量</h3>
<div class="outline-text-3" id="text-org3ac86c8">
<ol class="org-ol">
<li><p>
HADOOP_HOME<br>
</p>

<pre class="example">
C:\Users\haora\haoran\Environment\hadoop\hadoop-2.7.3
</pre>

<div class="div-center">
	<img src="./images/HADOOP_HOME.png" />
</div></li>

<li><p>
HADOOP_BIN<br>
</p>

<pre class="example">
C:\Users\haora\haoran\Environment\hadoop\hadoop-2.7.3\bin
</pre>

<div class="div-center">
	<img src="./images/HADOOP_BIN.png" />
</div></li>

<li><p>
添加以下目录到 path 变量<br>
</p>

<div class="div-center">
	<img src="./images/path_hadoop_home.png" />
</div></li>
</ol>
</div>
</div>
<div id="outline-container-org9bd6ce7" class="outline-3">
<h3 id="org9bd6ce7">编辑 Hadoop 配置文件</h3>
<div class="outline-text-3" id="text-org9bd6ce7">
</div>
<div id="outline-container-orgbdf87c3" class="outline-4">
<h4 id="orgbdf87c3">新建 data 目录和子目录</h4>
<div class="outline-text-4" id="text-orgbdf87c3">
<ul class="org-ul">
<li>C:\Users\haora\haoran\Environment\hadoop\hadoop-2.7.3\data <br></li>
<li>C:\Users\haora\haoran\Environment\hadoop\hadoop-2.7.3\data\namenode<br></li>
<li>C:\Users\haora\haoran\Environment\hadoop\hadoop-2.7.3\data\datanode<br></li>
</ul>
</div>
</div>
<div id="outline-container-orge320c06" class="outline-4">
<h4 id="orge320c06">Hadoop 寻找 jdk</h4>
<div class="outline-text-4" id="text-orge320c06">
<ol class="org-ol">
<li><p>
修改 C:\Users\haora\haoran\Environment\hadoop\hadoop-2.7.3\etc\hadoop\hadoop-env.cmd 文件<br>
</p>

<div class="div-center">
	<img src="./images/hadoop-env.png" />
</div></li>

<li><p>
检查是否配置成功<br>
</p>

<div class="org-src-container">
<pre class="src src-bash">hadoop version
</pre>
</div></li>
</ol>
</div>
</div>
<div id="outline-container-orgf1ba4f4" class="outline-4">
<h4 id="orgf1ba4f4">修改 Hadoop 配置文件</h4>
<div class="outline-text-4" id="text-orgf1ba4f4">
<ul class="org-ul">
<li><p>
HDFS 服务地址 C:\Users\haora\haoran\Environment\hadoop\hadoop-2.7.3\etc\hadoop\core-site.xml<br>
</p>

<div class="org-src-container">
<pre class="src src-xml">&lt;<span style="color: #d75fd7; font-weight: bold;">configuration</span>&gt;
  &lt;<span style="color: #d75fd7; font-weight: bold;">property</span>&gt;
    &lt;<span style="color: #d75fd7; font-weight: bold;">name</span>&gt;fs.defaultFS&lt;/<span style="color: #d75fd7; font-weight: bold;">name</span>&gt;
    &lt;<span style="color: #d75fd7; font-weight: bold;">value</span>&gt;hdfs://localhost:9000&lt;/<span style="color: #d75fd7; font-weight: bold;">value</span>&gt;
  &lt;/<span style="color: #d75fd7; font-weight: bold;">property</span>&gt;
&lt;/<span style="color: #d75fd7; font-weight: bold;">configuration</span>&gt;
</pre>
</div></li>

<li><p>
添加 namenode 和 datanode 目录设置 C:\Users\haora\haoran\Environment\hadoop\hadoop-2.7.3\etc\hadoop\hdfs-site.xml<br>
</p>

<div class="org-src-container">
<pre class="src src-xml">&lt;<span style="color: #d75fd7; font-weight: bold;">configuration</span>&gt;
  &lt;<span style="color: #d75fd7; font-weight: bold;">property</span>&gt;
    &lt;<span style="color: #d75fd7; font-weight: bold;">name</span>&gt;dfs.replication&lt;/<span style="color: #d75fd7; font-weight: bold;">name</span>&gt;
    &lt;<span style="color: #d75fd7; font-weight: bold;">value</span>&gt;1&lt;/<span style="color: #d75fd7; font-weight: bold;">value</span>&gt;
  &lt;/<span style="color: #d75fd7; font-weight: bold;">property</span>&gt;
  &lt;<span style="color: #d75fd7; font-weight: bold;">property</span>&gt;
    &lt;<span style="color: #d75fd7; font-weight: bold;">name</span>&gt;dfs.namenode.name.dir&lt;/<span style="color: #d75fd7; font-weight: bold;">name</span>&gt;
    &lt;<span style="color: #d75fd7; font-weight: bold;">value</span>&gt;file:///Users/haora/haoran/Environment/hadoop/hadoop-2.7.3/data/namenode&lt;/<span style="color: #d75fd7; font-weight: bold;">value</span>&gt;
  &lt;/<span style="color: #d75fd7; font-weight: bold;">property</span>&gt;
  &lt;<span style="color: #d75fd7; font-weight: bold;">property</span>&gt;
    &lt;<span style="color: #d75fd7; font-weight: bold;">name</span>&gt;dfs.datanode.data.dir&lt;/<span style="color: #d75fd7; font-weight: bold;">name</span>&gt;
    &lt;<span style="color: #d75fd7; font-weight: bold;">value</span>&gt;file:///Users/haora/haoran/Environment/hadoop/hadoop-2.7.3/data/datanode&lt;/<span style="color: #d75fd7; font-weight: bold;">value</span>&gt;
  &lt;/<span style="color: #d75fd7; font-weight: bold;">property</span>&gt;
&lt;/<span style="color: #d75fd7; font-weight: bold;">configuration</span>&gt;
</pre>
</div></li>

<li><p>
框架设置文件 C:\Users\haora\haoran\Environment\hadoop\hadoop-2.7.3\etc\hadoop\mapred-site.xml<br>
</p>

<p>
第一次配置只有 mapred-site.xml.template，没有 mapred-site.xml，输入以下命令：<br>
</p>

<div class="org-src-container">
<pre class="src src-bash">sudo cp mapred-site.xml.template mapred-site.xml
</pre>
</div>

<div class="org-src-container">
<pre class="src src-xml">&lt;<span style="color: #d75fd7; font-weight: bold;">configuration</span>&gt;
  &lt;<span style="color: #d75fd7; font-weight: bold;">property</span>&gt;
    &lt;<span style="color: #d75fd7; font-weight: bold;">name</span>&gt;mapreduce.framework.name&lt;/<span style="color: #d75fd7; font-weight: bold;">name</span>&gt;
    &lt;<span style="color: #d75fd7; font-weight: bold;">value</span>&gt;yarn&lt;/<span style="color: #d75fd7; font-weight: bold;">value</span>&gt;
  &lt;/<span style="color: #d75fd7; font-weight: bold;">property</span>&gt;
&lt;/<span style="color: #d75fd7; font-weight: bold;">configuration</span>&gt;
</pre>
</div></li>

<li><p>
Yarn 配置文件 C:\Users\haora\haoran\Environment\hadoop\hadoop-2.7.3\etc\hadoop\yarn-site.xml<br>
</p>

<div class="org-src-container">
<pre class="src src-xml">&lt;<span style="color: #d75fd7; font-weight: bold;">configuration</span>&gt;
  &lt;<span style="color: #d75fd7; font-weight: bold;">property</span>&gt;
    &lt;<span style="color: #d75fd7; font-weight: bold;">name</span>&gt;yarn.resourcemanager.hostname&lt;/<span style="color: #d75fd7; font-weight: bold;">name</span>&gt;
    &lt;<span style="color: #d75fd7; font-weight: bold;">value</span>&gt;0.0.0.0&lt;/<span style="color: #d75fd7; font-weight: bold;">value</span>&gt;
  &lt;/<span style="color: #d75fd7; font-weight: bold;">property</span>&gt;
  &lt;<span style="color: #d75fd7; font-weight: bold;">property</span>&gt;
    &lt;<span style="color: #d75fd7; font-weight: bold;">name</span>&gt;yarn.nodemanager.local-dirs&lt;/<span style="color: #d75fd7; font-weight: bold;">name</span>&gt;
    &lt;<span style="color: #d75fd7; font-weight: bold;">value</span>&gt;file:///C:/Users/haora/haoran/Environment/hadoop/hadoop-2.7.3//tmp&lt;/<span style="color: #d75fd7; font-weight: bold;">value</span>&gt;
  &lt;/<span style="color: #d75fd7; font-weight: bold;">property</span>&gt;
  &lt;<span style="color: #d75fd7; font-weight: bold;">property</span>&gt;
    &lt;<span style="color: #d75fd7; font-weight: bold;">name</span>&gt;yarn.nodemanager.aux-services&lt;/<span style="color: #d75fd7; font-weight: bold;">name</span>&gt;
    &lt;<span style="color: #d75fd7; font-weight: bold;">value</span>&gt;mapreduce_shuffle&lt;/<span style="color: #d75fd7; font-weight: bold;">value</span>&gt;
  &lt;/<span style="color: #d75fd7; font-weight: bold;">property</span>&gt;
  &lt;<span style="color: #d75fd7; font-weight: bold;">property</span>&gt;
    &lt;<span style="color: #d75fd7; font-weight: bold;">name</span>&gt;yarn.nodemanager.aux-services.mapreduce.shuffle.class&lt;/<span style="color: #d75fd7; font-weight: bold;">name</span>&gt;
    &lt;<span style="color: #d75fd7; font-weight: bold;">value</span>&gt;org.apache.hadoop.mapred.ShuffleHandler&lt;/<span style="color: #d75fd7; font-weight: bold;">value</span>&gt;
  &lt;/<span style="color: #d75fd7; font-weight: bold;">property</span>&gt;
&lt;/<span style="color: #d75fd7; font-weight: bold;">configuration</span>&gt;
</pre>
</div></li>
</ul>
</div>
</div>
<div id="outline-container-orge5e43e2" class="outline-4">
<h4 id="orge5e43e2">下载配置 Windows 环境需要的库文件</h4>
<div class="outline-text-4" id="text-orge5e43e2">
<p>
下面的资源都可以在这里获得：<a href="https://github.com/haoran-mc/bigdata_learning">https://github.com/haoran-mc/bigdata_learning</a><br>
</p>

<ol class="org-ol">
<li>安装 Visual C++ 2010 Redistributable Package (x64)：<br>
<ul class="org-ul">
<li>下载 <a href="https://github.com/haoran-mc/bigdata_learning">https://github.com/haoran-mc/bigdata_learning</a> 下面的 vcredist_x64.exe<br></li>
</ul></li>
<li>把 winutils.exe 等 windows 需要的文件放到 C:\Learning\hadoop\bin 下面。<br>
<ul class="org-ul">
<li>下载 <a href="https://github.com/haoran-mc/bigdata_learning">https://github.com/haoran-mc/bigdata_learning</a> 下面的 bin 直接覆盖 C:\Learning\hadoop\bin。<br></li>
</ul></li>
<li>把上面 bin 文件夹里面的 hadoop.dll 拷贝到 C:\Windows\System32 一份<br></li>
</ol>
</div>
</div>
</div>
<div id="outline-container-org0c7dcb5" class="outline-3">
<h3 id="org0c7dcb5">启动 Hadoop</h3>
<div class="outline-text-3" id="text-org0c7dcb5">
<ul class="org-ul">
<li><p>
格式化 Hadoop namenode<br>
</p>

<div class="org-src-container">
<pre class="src src-bash">C:\Users\haora\haoran\Environment\hadoop\hadoop-2.7.3\bin\hdfs namenode -format 
</pre>
</div></li>

<li><p>
启动 Hadoop 所有服务，要用管理员身份运行，四个service窗口会打开运行， 包括HDFS 的数据节点 和 Yarn 管理器服务进程<br>
</p>

<div class="org-src-container">
<pre class="src src-bash">C:\Users\haora\haoran\Environment\hadoop\hadoop-2.7.3\sbin\start-all.cmd
</pre>
</div></li>
</ul>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Date: 2022-05-13 17:05 Fri</p>
<p class="author">Author: L.M.haoran</p>
<p class="date">Created: 2022-05-13 Fri 19:55</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
