<!DOCTYPE html>
<html lang="zh">
<head>
<!-- 2022-12-02 -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>数组ARRAY</title>
<meta name="author" content="L.M.haoran" />
<meta name="description" content="Copyright © 2022, L.M.haoran, all rights reserved." />
<meta name="generator" content="Org Mode" />
<link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
           <link rel="stylesheet" href="static/css/org.css" type="text/css"  />
           <script type="module" src="static/js/main.js" defer></script>
</head>
<body>
<div id="content" class="content">
<h1 class="title">数组ARRAY</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org8e460a7">Golang 中的数组</a></li>
<li><a href="#orgdb84a7f">数组初始化</a>
<ul>
<li><a href="#org0785b58">一维数组</a></li>
<li><a href="#org0bf0558">多维数组</a></li>
<li><a href="#org2f9a3de">多维数组遍历</a></li>
</ul>
</li>
<li><a href="#org257b7d4">数组拷贝和传参</a></li>
</ul>
</div>
</div>

<div id="outline-container-org8e460a7" class="outline-2">
<h2 id="org8e460a7">Golang 中的数组</h2>
<div class="outline-text-2" id="text-org8e460a7">
<ol class="org-ol">
<li>数组：是同一种数据类型的固定长度的序列。<br></li>
<li>数组定义： <code>var a [len]int</code> ，比如： <code>var a [5]int</code> ，数组长度必须是常量，且是类型的组成部分。一旦定义，长度不能变。<br></li>
<li>长度是数组类型的一部分，因此， <code>var a [5]int</code> 和 <code>var a [10]int</code> 是不同的类型。<br></li>
<li><p>
数组可以通过下标进行访问，下标是从 0 开始，最后一个元素下标是：len - 1<br>
</p>

<div class="org-src-container">
<pre class="src src-go"><span style="color: #51afef;">for</span> <span style="color: #dcafe9;">i</span> := 0; i &lt; <span style="color: #C57BDB;">len</span>(a); i ++ {
}

<span style="color: #51afef;">for</span> <span style="color: #dcafe9;">idx</span>, <span style="color: #dcafe9;">val</span> := <span style="color: #51afef;">range</span> a {
}
</pre>
</div></li>

<li>访问越界，如果下标在数组合法范围之外，则触发访问越界，会 <code>panic</code><br></li>
<li>数组是值类型，赋值和传参会复制整个数组，而不是指针。因此改变副本的值，不会改变本身的值。<br></li>
<li>支持 <code>==</code> 、 <code>!=</code> 操作符，因为内存总是被初始化过的。<br></li>
<li>指针数组 <code>[n]*T</code> ，数组指针 <code>*[n]T</code> 。<br></li>
</ol>
</div>
</div>
<div id="outline-container-orgdb84a7f" class="outline-2">
<h2 id="orgdb84a7f">数组初始化</h2>
<div class="outline-text-2" id="text-orgdb84a7f">
</div>
<div id="outline-container-org0785b58" class="outline-3">
<h3 id="org0785b58">一维数组</h3>
<div class="outline-text-3" id="text-org0785b58">
<p>
全局：<br>
</p>

<div class="org-src-container">
<pre class="src src-go"><span style="color: #51afef;">var</span> <span style="color: #dcafe9;">arr0</span> [5]<span style="color: #FCCE7B;">int</span> = [5]<span style="color: #FCCE7B;">int</span>{1, 2, 3}
<span style="color: #51afef;">var</span> <span style="color: #dcafe9;">arr1</span> = [5]<span style="color: #FCCE7B;">int</span>{1, 2, 3, 4, 5}
<span style="color: #51afef;">var</span> <span style="color: #dcafe9;">arr2</span> = [...]<span style="color: #FCCE7B;">int</span>{1, 2, 3, 4, 5, 6}
<span style="color: #51afef;">var</span> <span style="color: #dcafe9;">str</span> = [5]<span style="color: #FCCE7B;">string</span>{<span style="color: #a991f1;">3</span>: <span style="color: #7bc275;">"hello world"</span>, <span style="color: #a991f1;">4</span>: <span style="color: #7bc275;">"tom"</span>}
</pre>
</div>

<p>
局部：<br>
</p>

<div class="org-src-container">
<pre class="src src-go"><span style="color: #dcafe9;">a</span> := [3]<span style="color: #FCCE7B;">int</span>{1, 2}           <span style="color: #62686E;">// </span><span style="color: #62686E;">&#26410;&#21021;&#22987;&#21270;&#20803;&#32032;&#20540;&#20026; 0&#12290;</span>
<span style="color: #dcafe9;">b</span> := [...]<span style="color: #FCCE7B;">int</span>{1, 2, 3, 4}   <span style="color: #62686E;">// </span><span style="color: #62686E;">&#36890;&#36807;&#21021;&#22987;&#21270;&#20540;&#30830;&#23450;&#25968;&#32452;&#38271;&#24230;&#12290;</span>
<span style="color: #dcafe9;">c</span> := [5]<span style="color: #FCCE7B;">int</span>{<span style="color: #a991f1;">2</span>: 100, <span style="color: #a991f1;">4</span>: 200} <span style="color: #62686E;">// </span><span style="color: #62686E;">&#20351;&#29992;&#32034;&#24341;&#21495;&#21021;&#22987;&#21270;&#20803;&#32032;&#12290;</span>
<span style="color: #dcafe9;">d</span> := [...]<span style="color: #51afef;">struct</span> {
    name <span style="color: #FCCE7B;">string</span>
    age  <span style="color: #FCCE7B;">uint8</span>
}{
    {<span style="color: #7bc275;">"user1"</span>, 10}, <span style="color: #62686E;">// </span><span style="color: #62686E;">&#21487;&#30465;&#30053;&#20803;&#32032;&#31867;&#22411;&#12290;</span>
    {<span style="color: #7bc275;">"user2"</span>, 20}, <span style="color: #62686E;">// </span><span style="color: #62686E;">&#21035;&#24536;&#20102;&#26368;&#21518;&#19968;&#34892;&#30340;&#36887;&#21495;&#12290;</span>
}
</pre>
</div>

<div class="org-src-container">
<pre class="src src-go"><span style="color: #51afef;">package</span> main

<span style="color: #51afef;">import</span> (
    <span style="color: #7bc275;">"fmt"</span>
)

<span style="color: #51afef;">var</span> <span style="color: #dcafe9;">arr0</span> [5]<span style="color: #FCCE7B;">int</span> = [5]<span style="color: #FCCE7B;">int</span>{1, 2, 3}
<span style="color: #51afef;">var</span> <span style="color: #dcafe9;">arr1</span> = [5]<span style="color: #FCCE7B;">int</span>{1, 2, 3, 4, 5}
<span style="color: #51afef;">var</span> <span style="color: #dcafe9;">arr2</span> = [...]<span style="color: #FCCE7B;">int</span>{1, 2, 3, 4, 5, 6}
<span style="color: #51afef;">var</span> <span style="color: #dcafe9;">str</span> = [5]<span style="color: #FCCE7B;">string</span>{<span style="color: #a991f1;">3</span>: <span style="color: #7bc275;">"hello world"</span>, <span style="color: #a991f1;">4</span>: <span style="color: #7bc275;">"tom"</span>}

<span style="color: #51afef;">func</span> <span style="color: #5cEfFF;">main</span>() {
    <span style="color: #dcafe9;">a</span> := [3]<span style="color: #FCCE7B;">int</span>{1, 2}           <span style="color: #62686E;">// </span><span style="color: #62686E;">&#26410;&#21021;&#22987;&#21270;&#20803;&#32032;&#20540;&#20026; 0&#12290;</span>
    <span style="color: #dcafe9;">b</span> := [...]<span style="color: #FCCE7B;">int</span>{1, 2, 3, 4}   <span style="color: #62686E;">// </span><span style="color: #62686E;">&#36890;&#36807;&#21021;&#22987;&#21270;&#20540;&#30830;&#23450;&#25968;&#32452;&#38271;&#24230;&#12290;</span>
    <span style="color: #dcafe9;">c</span> := [5]<span style="color: #FCCE7B;">int</span>{<span style="color: #a991f1;">2</span>: 100, <span style="color: #a991f1;">4</span>: 200} <span style="color: #62686E;">// </span><span style="color: #62686E;">&#20351;&#29992;&#24341;&#21495;&#21021;&#22987;&#21270;&#20803;&#32032;&#12290;</span>
    <span style="color: #dcafe9;">d</span> := [...]<span style="color: #51afef;">struct</span> {
        name <span style="color: #FCCE7B;">string</span>
        age  <span style="color: #FCCE7B;">uint8</span>
    }{
        {<span style="color: #7bc275;">"user1"</span>, 10}, <span style="color: #62686E;">// </span><span style="color: #62686E;">&#21487;&#30465;&#30053;&#20803;&#32032;&#31867;&#22411;&#12290;</span>
        {<span style="color: #7bc275;">"user2"</span>, 20}, <span style="color: #62686E;">// </span><span style="color: #62686E;">&#21035;&#24536;&#20102;&#26368;&#21518;&#19968;&#34892;&#30340;&#36887;&#21495;&#12290;</span>
    }
    fmt.<span style="color: #5cEfFF;">Println</span>(arr0, arr1, arr2, str)
    fmt.<span style="color: #5cEfFF;">Println</span>(a, b, c, d)
}
</pre>
</div>

<p>
输出结果:<br>
</p>

<pre class="example" id="orge4836a9">
[1 2 3 0 0] [1 2 3 4 5] [1 2 3 4 5 6] [   hello world tom]
[1 2 0] [1 2 3 4] [0 0 100 0 200] [{user1 10} {user2 20}]
</pre>

<p>
内置函数 <code>len</code> 和 <code>cap</code> 都返回数组长度 (元素数量)。<br>
</p>

<div class="org-src-container">
<pre class="src src-go"><span style="color: #51afef;">package</span> main

<span style="color: #51afef;">func</span> <span style="color: #5cEfFF;">main</span>() {
    <span style="color: #dcafe9;">a</span> := [2]<span style="color: #FCCE7B;">int</span>{}
    <span style="color: #C57BDB;">println</span>(<span style="color: #C57BDB;">len</span>(a), <span style="color: #C57BDB;">cap</span>(a))
}
</pre>
</div>

<p>
输出结果：<br>
</p>

<pre class="example" id="org5dec362">
2 2
</pre>
</div>
</div>
<div id="outline-container-org0bf0558" class="outline-3">
<h3 id="org0bf0558">多维数组</h3>
<div class="outline-text-3" id="text-org0bf0558">
<p>
全局<br>
</p>

<div class="org-src-container">
<pre class="src src-go"><span style="color: #51afef;">var</span> <span style="color: #dcafe9;">arr0</span> [5][3]<span style="color: #FCCE7B;">int</span>
<span style="color: #51afef;">var</span> <span style="color: #dcafe9;">arr1</span> [2][3]<span style="color: #FCCE7B;">int</span> = [...][3]<span style="color: #FCCE7B;">int</span>{{1, 2, 3}, {7, 8, 9}}
</pre>
</div>

<p>
局部：<br>
</p>

<div class="org-src-container">
<pre class="src src-go"><span style="color: #dcafe9;">a</span> := [2][3]<span style="color: #FCCE7B;">int</span>{{1, 2, 3}, {4, 5, 6}}
<span style="color: #dcafe9;">b</span> := [...][2]<span style="color: #FCCE7B;">int</span>{{1, 1}, {2, 2}, {3, 3}} <span style="color: #62686E;">// </span><span style="color: #62686E;">&#31532; 2 &#32428;&#24230;&#19981;&#33021;&#29992; "..."&#12290;</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-go"><span style="color: #51afef;">package</span> main

<span style="color: #51afef;">import</span> (
    <span style="color: #7bc275;">"fmt"</span>
)

<span style="color: #51afef;">var</span> <span style="color: #dcafe9;">arr0</span> [5][3]<span style="color: #FCCE7B;">int</span>
<span style="color: #51afef;">var</span> <span style="color: #dcafe9;">arr1</span> [2][3]<span style="color: #FCCE7B;">int</span> = [...][3]<span style="color: #FCCE7B;">int</span>{{1, 2, 3}, {7, 8, 9}}

<span style="color: #51afef;">func</span> <span style="color: #5cEfFF;">main</span>() {
    <span style="color: #dcafe9;">a</span> := [2][3]<span style="color: #FCCE7B;">int</span>{{1, 2, 3}, {4, 5, 6}}
    <span style="color: #dcafe9;">b</span> := [...][2]<span style="color: #FCCE7B;">int</span>{{1, 1}, {2, 2}, {3, 3}} <span style="color: #62686E;">// </span><span style="color: #62686E;">&#31532; 2 &#32428;&#24230;&#19981;&#33021;&#29992; "..."&#12290;</span>
    fmt.<span style="color: #5cEfFF;">Println</span>(arr0, arr1)
    fmt.<span style="color: #5cEfFF;">Println</span>(a, b)
}
</pre>
</div>

<p>
输出结果：<br>
</p>

<pre class="example" id="org1790ee1">
[[0 0 0] [0 0 0] [0 0 0] [0 0 0] [0 0 0]] [[1 2 3] [7 8 9]]
[[1 2 3] [4 5 6]] [[1 1] [2 2] [3 3]]
</pre>
</div>
</div>
<div id="outline-container-org2f9a3de" class="outline-3">
<h3 id="org2f9a3de">多维数组遍历</h3>
<div class="outline-text-3" id="text-org2f9a3de">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #51afef;">package</span> main

<span style="color: #51afef;">import</span> (
    <span style="color: #7bc275;">"fmt"</span>
)

<span style="color: #51afef;">func</span> <span style="color: #5cEfFF;">main</span>() {
    <span style="color: #51afef;">var</span> <span style="color: #dcafe9;">f</span> [2][3]<span style="color: #FCCE7B;">int</span> = [...][3]<span style="color: #FCCE7B;">int</span>{{1, 2, 3}, {7, 8, 9}}
    <span style="color: #51afef;">for</span> <span style="color: #dcafe9;">k1</span>, <span style="color: #dcafe9;">v1</span> := <span style="color: #51afef;">range</span> f {
        <span style="color: #51afef;">for</span> <span style="color: #dcafe9;">k2</span>, <span style="color: #dcafe9;">v2</span> := <span style="color: #51afef;">range</span> v1 {
            fmt.<span style="color: #5cEfFF;">Printf</span>(<span style="color: #7bc275;">"(%d, %d) = %d "</span>, k1, k2, v2)
        }
        fmt.<span style="color: #5cEfFF;">Println</span>()
    }
}
</pre>
</div>

<p>
输出结果：<br>
</p>

<pre class="example" id="org36708ad">
(0, 0) = 1 (0, 1) = 2 (0, 2) = 3
(1, 0) = 7 (1, 1) = 8 (1, 2) = 9
</pre>
</div>
</div>
</div>
<div id="outline-container-org257b7d4" class="outline-2">
<h2 id="org257b7d4">数组拷贝和传参</h2>
<div class="outline-text-2" id="text-org257b7d4">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #51afef;">package</span> main

<span style="color: #51afef;">import</span> <span style="color: #7bc275;">"fmt"</span>

<span style="color: #51afef;">func</span> <span style="color: #5cEfFF;">printArr</span>(<span style="color: #dcafe9;">arr</span> *[5]<span style="color: #FCCE7B;">int</span>) {
    arr[0] = 10
    <span style="color: #51afef;">for</span> <span style="color: #dcafe9;">i</span>, <span style="color: #dcafe9;">v</span> := <span style="color: #51afef;">range</span> arr {
        fmt.<span style="color: #5cEfFF;">Println</span>(i, v)
    }
}

<span style="color: #51afef;">func</span> <span style="color: #5cEfFF;">main</span>() {
    <span style="color: #51afef;">var</span> <span style="color: #dcafe9;">arr1</span> [5]<span style="color: #FCCE7B;">int</span>
    <span style="color: #5cEfFF;">printArr</span>(&amp;arr1)
    fmt.<span style="color: #5cEfFF;">Println</span>(arr1)
    <span style="color: #dcafe9;">arr2</span> := [...]<span style="color: #FCCE7B;">int</span>{2, 4, 6, 8, 10}
    <span style="color: #5cEfFF;">printArr</span>(&amp;arr2)
    fmt.<span style="color: #5cEfFF;">Println</span>(arr2)
}
</pre>
</div>

<p>
值拷贝行为会造成性能问题，通常会建议使用 slice，或数组指针。<br>
</p>

<div class="org-src-container">
<pre class="src src-go"><span style="color: #51afef;">package</span> main

<span style="color: #51afef;">import</span> (
    <span style="color: #7bc275;">"fmt"</span>
)

<span style="color: #51afef;">func</span> <span style="color: #5cEfFF;">test</span>(<span style="color: #dcafe9;">x</span> [2]<span style="color: #FCCE7B;">int</span>) {
    fmt.<span style="color: #5cEfFF;">Printf</span>(<span style="color: #7bc275;">"x: %p\n"</span>, &amp;x)
    x[1] = 1000
}

<span style="color: #51afef;">func</span> <span style="color: #5cEfFF;">main</span>() {
    <span style="color: #dcafe9;">a</span> := [2]<span style="color: #FCCE7B;">int</span>{}
    fmt.<span style="color: #5cEfFF;">Printf</span>(<span style="color: #7bc275;">"a: %p\n"</span>, &amp;a)

    <span style="color: #5cEfFF;">test</span>(a)
    fmt.<span style="color: #5cEfFF;">Println</span>(a)
}
</pre>
</div>

<p>
输出结果:<br>
</p>

<pre class="example" id="org46c19d7">
a: 0xc42007c010
x: 0xc42007c030
[0 0]
</pre>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Date: 2022-02-11 00:02 Fri</p>
<p class="author">Author: L.M.haoran</p>
<p class="date">Created: 2022-12-02</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
