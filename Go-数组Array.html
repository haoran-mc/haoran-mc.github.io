<!DOCTYPE html>
<html lang="zh">
<head>
<!-- 2022-09-28 -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>数组ARRAY</title>
<meta name="author" content="L.M.haoran" />
<meta name="description" content="Copyright © 2022, L.M.haoran, all rights reserved." />
<meta name="generator" content="Org Mode" />
<link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
           <link rel="stylesheet" href="static/css/org.css" type="text/css"  />
           <script type="module" src="static/js/main.js" defer></script>
</head>
<body>
<div id="content" class="content">
<h1 class="title">数组ARRAY</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#orgb00be19">Golang 中的数组</a></li>
<li><a href="#org7ea18cb">数组初始化</a>
<ul>
<li><a href="#org1406cda">一维数组</a></li>
<li><a href="#orge546387">多维数组</a></li>
<li><a href="#org8185dae">多维数组遍历</a></li>
</ul>
</li>
<li><a href="#org47fb74b">数组拷贝和传参</a></li>
</ul>
</div>
</div>

<div id="outline-container-orgb00be19" class="outline-2">
<h2 id="orgb00be19">Golang 中的数组</h2>
<div class="outline-text-2" id="text-orgb00be19">
<ol class="org-ol">
<li>数组：是同一种数据类型的固定长度的序列。<br></li>
<li>数组定义： <code>var a [len]int</code> ，比如： <code>var a [5]int</code> ，数组长度必须是常量，且是类型的组成部分。一旦定义，长度不能变。<br></li>
<li>长度是数组类型的一部分，因此， <code>var a [5]int</code> 和 <code>var a [10]int</code> 是不同的类型。<br></li>
<li><p>
数组可以通过下标进行访问，下标是从 0 开始，最后一个元素下标是：len - 1<br>
</p>

<div class="org-src-container">
<pre class="src src-go"><span style="color: #ea3d54;">for</span> <span style="color: #cbccd1;">i</span> := 0; i &lt; <span style="color: #fedd38;">len</span>(a); i ++ {
}

<span style="color: #ea3d54;">for</span> <span style="color: #cbccd1;">idx</span>, <span style="color: #cbccd1;">val</span> := <span style="color: #ea3d54;">range</span> a {
}
</pre>
</div></li>

<li>访问越界，如果下标在数组合法范围之外，则触发访问越界，会 <code>panic</code><br></li>
<li>数组是值类型，赋值和传参会复制整个数组，而不是指针。因此改变副本的值，不会改变本身的值。<br></li>
<li>支持 <code>==</code> 、 <code>!=</code> 操作符，因为内存总是被初始化过的。<br></li>
<li>指针数组 <code>[n]*T</code> ，数组指针 <code>*[n]T</code> 。<br></li>
</ol>
</div>
</div>
<div id="outline-container-org7ea18cb" class="outline-2">
<h2 id="org7ea18cb">数组初始化</h2>
<div class="outline-text-2" id="text-org7ea18cb">
</div>
<div id="outline-container-org1406cda" class="outline-3">
<h3 id="org1406cda">一维数组</h3>
<div class="outline-text-3" id="text-org1406cda">
<p>
全局：<br>
</p>

<div class="org-src-container">
<pre class="src src-go"><span style="color: #ea3d54;">var</span> <span style="color: #cbccd1;">arr0</span> [5]<span style="color: #ee7b29;">int</span> = [5]<span style="color: #ee7b29;">int</span>{1, 2, 3}
<span style="color: #ea3d54;">var</span> <span style="color: #cbccd1;">arr1</span> = [5]<span style="color: #ee7b29;">int</span>{1, 2, 3, 4, 5}
<span style="color: #ea3d54;">var</span> <span style="color: #cbccd1;">arr2</span> = [...]<span style="color: #ee7b29;">int</span>{1, 2, 3, 4, 5, 6}
<span style="color: #ea3d54;">var</span> <span style="color: #cbccd1;">str</span> = [5]<span style="color: #ee7b29;">string</span>{<span style="color: #ee7b29;">3</span>: <span style="color: #4fb3d8;">"hello world"</span>, <span style="color: #ee7b29;">4</span>: <span style="color: #4fb3d8;">"tom"</span>}
</pre>
</div>

<p>
局部：<br>
</p>

<div class="org-src-container">
<pre class="src src-go"><span style="color: #cbccd1;">a</span> := [3]<span style="color: #ee7b29;">int</span>{1, 2}           <span style="color: #5B6268;">// </span><span style="color: #5B6268;">&#26410;&#21021;&#22987;&#21270;&#20803;&#32032;&#20540;&#20026; 0&#12290;</span>
<span style="color: #cbccd1;">b</span> := [...]<span style="color: #ee7b29;">int</span>{1, 2, 3, 4}   <span style="color: #5B6268;">// </span><span style="color: #5B6268;">&#36890;&#36807;&#21021;&#22987;&#21270;&#20540;&#30830;&#23450;&#25968;&#32452;&#38271;&#24230;&#12290;</span>
<span style="color: #cbccd1;">c</span> := [5]<span style="color: #ee7b29;">int</span>{<span style="color: #ee7b29;">2</span>: 100, <span style="color: #ee7b29;">4</span>: 200} <span style="color: #5B6268;">// </span><span style="color: #5B6268;">&#20351;&#29992;&#32034;&#24341;&#21495;&#21021;&#22987;&#21270;&#20803;&#32032;&#12290;</span>
<span style="color: #cbccd1;">d</span> := [...]<span style="color: #ea3d54;">struct</span> {
    name <span style="color: #ee7b29;">string</span>
    age  <span style="color: #ee7b29;">uint8</span>
}{
    {<span style="color: #4fb3d8;">"user1"</span>, 10}, <span style="color: #5B6268;">// </span><span style="color: #5B6268;">&#21487;&#30465;&#30053;&#20803;&#32032;&#31867;&#22411;&#12290;</span>
    {<span style="color: #4fb3d8;">"user2"</span>, 20}, <span style="color: #5B6268;">// </span><span style="color: #5B6268;">&#21035;&#24536;&#20102;&#26368;&#21518;&#19968;&#34892;&#30340;&#36887;&#21495;&#12290;</span>
}
</pre>
</div>

<div class="org-src-container">
<pre class="src src-go"><span style="color: #ea3d54;">package</span> main

<span style="color: #ea3d54;">import</span> (
    <span style="color: #4fb3d8;">"fmt"</span>
)

<span style="color: #ea3d54;">var</span> <span style="color: #cbccd1;">arr0</span> [5]<span style="color: #ee7b29;">int</span> = [5]<span style="color: #ee7b29;">int</span>{1, 2, 3}
<span style="color: #ea3d54;">var</span> <span style="color: #cbccd1;">arr1</span> = [5]<span style="color: #ee7b29;">int</span>{1, 2, 3, 4, 5}
<span style="color: #ea3d54;">var</span> <span style="color: #cbccd1;">arr2</span> = [...]<span style="color: #ee7b29;">int</span>{1, 2, 3, 4, 5, 6}
<span style="color: #ea3d54;">var</span> <span style="color: #cbccd1;">str</span> = [5]<span style="color: #ee7b29;">string</span>{<span style="color: #ee7b29;">3</span>: <span style="color: #4fb3d8;">"hello world"</span>, <span style="color: #ee7b29;">4</span>: <span style="color: #4fb3d8;">"tom"</span>}

<span style="color: #ea3d54;">func</span> <span style="color: #fedd38;">main</span>() {
    <span style="color: #cbccd1;">a</span> := [3]<span style="color: #ee7b29;">int</span>{1, 2}           <span style="color: #5B6268;">// </span><span style="color: #5B6268;">&#26410;&#21021;&#22987;&#21270;&#20803;&#32032;&#20540;&#20026; 0&#12290;</span>
    <span style="color: #cbccd1;">b</span> := [...]<span style="color: #ee7b29;">int</span>{1, 2, 3, 4}   <span style="color: #5B6268;">// </span><span style="color: #5B6268;">&#36890;&#36807;&#21021;&#22987;&#21270;&#20540;&#30830;&#23450;&#25968;&#32452;&#38271;&#24230;&#12290;</span>
    <span style="color: #cbccd1;">c</span> := [5]<span style="color: #ee7b29;">int</span>{<span style="color: #ee7b29;">2</span>: 100, <span style="color: #ee7b29;">4</span>: 200} <span style="color: #5B6268;">// </span><span style="color: #5B6268;">&#20351;&#29992;&#24341;&#21495;&#21021;&#22987;&#21270;&#20803;&#32032;&#12290;</span>
    <span style="color: #cbccd1;">d</span> := [...]<span style="color: #ea3d54;">struct</span> {
        name <span style="color: #ee7b29;">string</span>
        age  <span style="color: #ee7b29;">uint8</span>
    }{
        {<span style="color: #4fb3d8;">"user1"</span>, 10}, <span style="color: #5B6268;">// </span><span style="color: #5B6268;">&#21487;&#30465;&#30053;&#20803;&#32032;&#31867;&#22411;&#12290;</span>
        {<span style="color: #4fb3d8;">"user2"</span>, 20}, <span style="color: #5B6268;">// </span><span style="color: #5B6268;">&#21035;&#24536;&#20102;&#26368;&#21518;&#19968;&#34892;&#30340;&#36887;&#21495;&#12290;</span>
    }
    fmt.<span style="color: #fedd38;">Println</span>(arr0, arr1, arr2, str)
    fmt.<span style="color: #fedd38;">Println</span>(a, b, c, d)
}
</pre>
</div>

<p>
输出结果:<br>
</p>

<pre class="example" id="org6b4bb61">
[1 2 3 0 0] [1 2 3 4 5] [1 2 3 4 5 6] [   hello world tom]
[1 2 0] [1 2 3 4] [0 0 100 0 200] [{user1 10} {user2 20}]
</pre>

<p>
内置函数 <code>len</code> 和 <code>cap</code> 都返回数组长度 (元素数量)。<br>
</p>

<div class="org-src-container">
<pre class="src src-go"><span style="color: #ea3d54;">package</span> main

<span style="color: #ea3d54;">func</span> <span style="color: #fedd38;">main</span>() {
    <span style="color: #cbccd1;">a</span> := [2]<span style="color: #ee7b29;">int</span>{}
    <span style="color: #fedd38;">println</span>(<span style="color: #fedd38;">len</span>(a), <span style="color: #fedd38;">cap</span>(a))
}
</pre>
</div>

<p>
输出结果：<br>
</p>

<pre class="example" id="org45795a8">
2 2
</pre>
</div>
</div>
<div id="outline-container-orge546387" class="outline-3">
<h3 id="orge546387">多维数组</h3>
<div class="outline-text-3" id="text-orge546387">
<p>
全局<br>
</p>

<div class="org-src-container">
<pre class="src src-go"><span style="color: #ea3d54;">var</span> <span style="color: #cbccd1;">arr0</span> [5][3]<span style="color: #ee7b29;">int</span>
<span style="color: #ea3d54;">var</span> <span style="color: #cbccd1;">arr1</span> [2][3]<span style="color: #ee7b29;">int</span> = [...][3]<span style="color: #ee7b29;">int</span>{{1, 2, 3}, {7, 8, 9}}
</pre>
</div>

<p>
局部：<br>
</p>

<div class="org-src-container">
<pre class="src src-go"><span style="color: #cbccd1;">a</span> := [2][3]<span style="color: #ee7b29;">int</span>{{1, 2, 3}, {4, 5, 6}}
<span style="color: #cbccd1;">b</span> := [...][2]<span style="color: #ee7b29;">int</span>{{1, 1}, {2, 2}, {3, 3}} <span style="color: #5B6268;">// </span><span style="color: #5B6268;">&#31532; 2 &#32428;&#24230;&#19981;&#33021;&#29992; "..."&#12290;</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-go"><span style="color: #ea3d54;">package</span> main

<span style="color: #ea3d54;">import</span> (
    <span style="color: #4fb3d8;">"fmt"</span>
)

<span style="color: #ea3d54;">var</span> <span style="color: #cbccd1;">arr0</span> [5][3]<span style="color: #ee7b29;">int</span>
<span style="color: #ea3d54;">var</span> <span style="color: #cbccd1;">arr1</span> [2][3]<span style="color: #ee7b29;">int</span> = [...][3]<span style="color: #ee7b29;">int</span>{{1, 2, 3}, {7, 8, 9}}

<span style="color: #ea3d54;">func</span> <span style="color: #fedd38;">main</span>() {
    <span style="color: #cbccd1;">a</span> := [2][3]<span style="color: #ee7b29;">int</span>{{1, 2, 3}, {4, 5, 6}}
    <span style="color: #cbccd1;">b</span> := [...][2]<span style="color: #ee7b29;">int</span>{{1, 1}, {2, 2}, {3, 3}} <span style="color: #5B6268;">// </span><span style="color: #5B6268;">&#31532; 2 &#32428;&#24230;&#19981;&#33021;&#29992; "..."&#12290;</span>
    fmt.<span style="color: #fedd38;">Println</span>(arr0, arr1)
    fmt.<span style="color: #fedd38;">Println</span>(a, b)
}
</pre>
</div>

<p>
输出结果：<br>
</p>

<pre class="example" id="org5e122f5">
[[0 0 0] [0 0 0] [0 0 0] [0 0 0] [0 0 0]] [[1 2 3] [7 8 9]]
[[1 2 3] [4 5 6]] [[1 1] [2 2] [3 3]]
</pre>
</div>
</div>
<div id="outline-container-org8185dae" class="outline-3">
<h3 id="org8185dae">多维数组遍历</h3>
<div class="outline-text-3" id="text-org8185dae">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #ea3d54;">package</span> main

<span style="color: #ea3d54;">import</span> (
    <span style="color: #4fb3d8;">"fmt"</span>
)

<span style="color: #ea3d54;">func</span> <span style="color: #fedd38;">main</span>() {
    <span style="color: #ea3d54;">var</span> <span style="color: #cbccd1;">f</span> [2][3]<span style="color: #ee7b29;">int</span> = [...][3]<span style="color: #ee7b29;">int</span>{{1, 2, 3}, {7, 8, 9}}
    <span style="color: #ea3d54;">for</span> <span style="color: #cbccd1;">k1</span>, <span style="color: #cbccd1;">v1</span> := <span style="color: #ea3d54;">range</span> f {
        <span style="color: #ea3d54;">for</span> <span style="color: #cbccd1;">k2</span>, <span style="color: #cbccd1;">v2</span> := <span style="color: #ea3d54;">range</span> v1 {
            fmt.<span style="color: #fedd38;">Printf</span>(<span style="color: #4fb3d8;">"(%d, %d) = %d "</span>, k1, k2, v2)
        }
        fmt.<span style="color: #fedd38;">Println</span>()
    }
}
</pre>
</div>

<p>
输出结果：<br>
</p>

<pre class="example" id="org660966d">
(0, 0) = 1 (0, 1) = 2 (0, 2) = 3
(1, 0) = 7 (1, 1) = 8 (1, 2) = 9
</pre>
</div>
</div>
</div>
<div id="outline-container-org47fb74b" class="outline-2">
<h2 id="org47fb74b">数组拷贝和传参</h2>
<div class="outline-text-2" id="text-org47fb74b">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #ea3d54;">package</span> main

<span style="color: #ea3d54;">import</span> <span style="color: #4fb3d8;">"fmt"</span>

<span style="color: #ea3d54;">func</span> <span style="color: #fedd38;">printArr</span>(<span style="color: #cbccd1;">arr</span> *[5]<span style="color: #ee7b29;">int</span>) {
    arr[0] = 10
    <span style="color: #ea3d54;">for</span> <span style="color: #cbccd1;">i</span>, <span style="color: #cbccd1;">v</span> := <span style="color: #ea3d54;">range</span> arr {
        fmt.<span style="color: #fedd38;">Println</span>(i, v)
    }
}

<span style="color: #ea3d54;">func</span> <span style="color: #fedd38;">main</span>() {
    <span style="color: #ea3d54;">var</span> <span style="color: #cbccd1;">arr1</span> [5]<span style="color: #ee7b29;">int</span>
    <span style="color: #fedd38;">printArr</span>(&amp;arr1)
    fmt.<span style="color: #fedd38;">Println</span>(arr1)
    <span style="color: #cbccd1;">arr2</span> := [...]<span style="color: #ee7b29;">int</span>{2, 4, 6, 8, 10}
    <span style="color: #fedd38;">printArr</span>(&amp;arr2)
    fmt.<span style="color: #fedd38;">Println</span>(arr2)
}
</pre>
</div>

<p>
值拷贝行为会造成性能问题，通常会建议使用 slice，或数组指针。<br>
</p>

<div class="org-src-container">
<pre class="src src-go"><span style="color: #ea3d54;">package</span> main

<span style="color: #ea3d54;">import</span> (
    <span style="color: #4fb3d8;">"fmt"</span>
)

<span style="color: #ea3d54;">func</span> <span style="color: #fedd38;">test</span>(<span style="color: #cbccd1;">x</span> [2]<span style="color: #ee7b29;">int</span>) {
    fmt.<span style="color: #fedd38;">Printf</span>(<span style="color: #4fb3d8;">"x: %p\n"</span>, &amp;x)
    x[1] = 1000
}

<span style="color: #ea3d54;">func</span> <span style="color: #fedd38;">main</span>() {
    <span style="color: #cbccd1;">a</span> := [2]<span style="color: #ee7b29;">int</span>{}
    fmt.<span style="color: #fedd38;">Printf</span>(<span style="color: #4fb3d8;">"a: %p\n"</span>, &amp;a)

    <span style="color: #fedd38;">test</span>(a)
    fmt.<span style="color: #fedd38;">Println</span>(a)
}
</pre>
</div>

<p>
输出结果:<br>
</p>

<pre class="example" id="orge3410a4">
a: 0xc42007c010
x: 0xc42007c030
[0 0]
</pre>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Date: 2022-02-11 00:02 Fri</p>
<p class="author">Author: L.M.haoran</p>
<p class="date">Created: 2022-09-28</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
