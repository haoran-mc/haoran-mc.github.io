<!DOCTYPE html>
<html lang="zh">
<head>
<!-- 2022-02-09 Wed 19:20 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>RAND</title>
<meta name="generator" content="Org mode">
<meta name="author" content="L.M.haoran">
<meta name="description" content="Copyright © 2022, L.M.haoran, all rights reserved."
>

                <link rel="stylesheet" href="static/css/org.css" type="text/css"  />
                <script type="module" src="static/js/main.js" defer></script>
                <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
</head>
<body>
<div id="content">
<h1 class="title">RAND</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org0999fd9">简介</a></li>
<li><a href="#org7a5000f">Variables</a></li>
<li><a href="#org5fab9e2">func Int</a></li>
<li><a href="#org35567fc">func Prime</a></li>
<li><a href="#orgf7ec4d6">func Read</a></li>
</ul>
</div>
</div>

<div id="outline-container-org0999fd9" class="outline-2">
<h2 id="org0999fd9">简介</h2>
<div class="outline-text-2" id="text-org0999fd9">
<p>
rand 包实现了用于加解密的更安全的随机数生成器。<br>
</p>
</div>
</div>
<div id="outline-container-org7a5000f" class="outline-2">
<h2 id="org7a5000f">Variables</h2>
<div class="outline-text-2" id="text-org7a5000f">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">var</span> <span style="color: #8787d7;">Reader</span> <span style="color: #df005f; font-weight: bold;">io.Reader</span>
</pre>
</div>

<p>
Reader是一个全局、共享的密码用强随机数生成器。在Unix类型系统中，会从/dev/urandom读取；而Windows中会调用CryptGenRandom API。<br>
</p>
</div>
</div>
<div id="outline-container-org5fab9e2" class="outline-2">
<h2 id="org5fab9e2">func Int</h2>
<div class="outline-text-2" id="text-org5fab9e2">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">func</span> <span style="color: #d75fd7; font-weight: bold;">Int</span>(<span style="color: #8787d7;">rand</span> <span style="color: #df005f; font-weight: bold;">io.Reader</span>, <span style="color: #8787d7;">max</span> *<span style="color: #df005f; font-weight: bold;">big.Int</span>) (<span style="color: #8787d7;">n</span> *<span style="color: #df005f; font-weight: bold;">big.Int</span>, <span style="color: #8787d7;">err</span> <span style="color: #df005f; font-weight: bold;">error</span>)
</pre>
</div>

<p>
返回一个在[0, max)区间服从均匀分布的随机值，如果max&lt;=0则会panic。<br>
</p>
</div>
</div>
<div id="outline-container-org35567fc" class="outline-2">
<h2 id="org35567fc">func Prime</h2>
<div class="outline-text-2" id="text-org35567fc">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">func</span> <span style="color: #d75fd7; font-weight: bold;">Prime</span>(<span style="color: #8787d7;">rand</span> <span style="color: #df005f; font-weight: bold;">io.Reader</span>, <span style="color: #8787d7;">bits</span> <span style="color: #df005f; font-weight: bold;">int</span>) (<span style="color: #8787d7;">p</span> *<span style="color: #df005f; font-weight: bold;">big.Int</span>, <span style="color: #8787d7;">err</span> <span style="color: #df005f; font-weight: bold;">error</span>)
</pre>
</div>

<p>
返回一个具有指定字位数的数字，该数字具有很高可能性是质数。如果从rand读取时出错，或者bits&lt;2会返回错误。<br>
</p>
</div>
</div>
<div id="outline-container-orgf7ec4d6" class="outline-2">
<h2 id="orgf7ec4d6">func Read</h2>
<div class="outline-text-2" id="text-orgf7ec4d6">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">func</span> <span style="color: #d75fd7; font-weight: bold;">Read</span>(<span style="color: #8787d7;">b</span> []<span style="color: #df005f; font-weight: bold;">byte</span>) (<span style="color: #8787d7;">n</span> <span style="color: #df005f; font-weight: bold;">int</span>, <span style="color: #8787d7;">err</span> <span style="color: #df005f; font-weight: bold;">error</span>)
</pre>
</div>

<p>
本函数是一个使用 io.ReadFull 调用 Reader.Read 的辅助性函数。当且仅当 err==nil 时，返回值 n == len(b)。<br>
</p>

<div class="org-src-container">
<pre class="src src-go"><span style="color: #8787d7;">c</span> := <span style="color: #d75fd7;">10</span>
<span style="color: #8787d7;">b</span> := <span style="color: #268bd2;">make</span>([]<span style="color: #df005f; font-weight: bold;">byte</span>, c)
<span style="color: #8787d7;">_</span>, <span style="color: #8787d7;">err</span> := rand.<span style="color: #d75fd7; font-weight: bold;">Read</span>(b)
<span style="color: #268bd2; font-weight: bold;">if</span> err != <span style="color: #d75fd7;">nil</span> {
        fmt.<span style="color: #d75fd7; font-weight: bold;">Println</span>(<span style="color: #2aa198;">"error:"</span>, err)
        <span style="color: #268bd2; font-weight: bold;">return</span>
}
<span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">The slice should now contain random bytes instead of only zeroes.</span>
fmt.<span style="color: #d75fd7; font-weight: bold;">Println</span>(bytes.<span style="color: #d75fd7; font-weight: bold;">Equal</span>(b, <span style="color: #268bd2;">make</span>([]<span style="color: #df005f; font-weight: bold;">byte</span>, c)))
</pre>
</div>

<p>
Output:<br>
</p>

<pre class="example" id="orgd57dcd6">
false
</pre>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Date: 2022-02-06 17:02 Sun</p>
<p class="author">Author: L.M.haoran</p>
<p class="date">Created: 2022-02-09 Wed 19:20</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
