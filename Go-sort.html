<!DOCTYPE html>
<html lang="zh">
<head>
<!-- 2022-10-12 -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>GO SORT</title>
<meta name="author" content="L.M.haoran" />
<meta name="description" content="Copyright © 2022, L.M.haoran, all rights reserved." />
<meta name="generator" content="Org Mode" />
<link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
           <link rel="stylesheet" href="static/css/org.css" type="text/css"  />
           <script type="module" src="static/js/main.js" defer></script>
</head>
<body>
<div id="content" class="content">
<h1 class="title">GO SORT</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org5c4c9a5">简单入门</a>
<ul>
<li><a href="#org47a4a24">解释：</a></li>
</ul>
</li>
<li><a href="#org95952f0">进阶使用</a></li>
<li><a href="#org768001d">type Interface</a></li>
<li><a href="#org50406d9">type IntSlice</a>
<ul>
<li><a href="#org05e56f7">func (IntSlice) Len</a></li>
<li><a href="#orgdd5900b">func (IntSlice) Less</a></li>
<li><a href="#orgc345df9">func (IntSlice) Swap</a></li>
<li><a href="#orga18f77a">func (IntSlice) Sort</a></li>
<li><a href="#orgf4ca1e3">func (IntSlice) Search</a></li>
</ul>
</li>
<li><a href="#org7e7ead4">type Float64Slice</a>
<ul>
<li><a href="#org0cf3bc0">func (Float64Slice) Len</a></li>
<li><a href="#org0c5ff1b">func (Float64Slice) Less</a></li>
<li><a href="#org7638a34">func (Float64Slice) Swap</a></li>
<li><a href="#org91f2c41">func (Float64Slice) Sort</a></li>
<li><a href="#org36b2ce5">func (Float64Slice) Search</a></li>
</ul>
</li>
<li><a href="#org0ae525b">type StringSlice</a>
<ul>
<li><a href="#orgec055f2">func (StringSlice) Len</a></li>
<li><a href="#orgae04600">func (StringSlice) Less</a></li>
<li><a href="#org2efdf7e">func (StringSlice) Swap</a></li>
<li><a href="#org201aa6e">func (StringSlice) Sort</a></li>
<li><a href="#org0769a7e">func (StringSlice) Search</a></li>
</ul>
</li>
<li><a href="#org97d6272">func Sort</a></li>
<li><a href="#org0499c4f">func Stable</a></li>
<li><a href="#orgb6168f3">func IsSorted</a></li>
<li><a href="#orgcbe1df5">func Reverse</a></li>
<li><a href="#org55afc07">func Search</a></li>
<li><a href="#orgfcc5670">func Ints</a></li>
<li><a href="#org528ee47">func IntsAreSorted</a></li>
<li><a href="#orgc076e51">func SearchInts</a></li>
<li><a href="#orgd977d0f">func Float64s</a></li>
<li><a href="#org5c3295d">func Float64sAreSorted</a></li>
<li><a href="#orgab0a0f7">func SearchFloat64s</a></li>
<li><a href="#org1408554">func Strings</a></li>
<li><a href="#org87f689d">func StringsAreSorted</a></li>
<li><a href="#org6dab2df">func SearchStrings</a></li>
</ul>
</div>
</div>

<div id="outline-container-org5c4c9a5" class="outline-2">
<h2 id="org5c4c9a5">简单入门</h2>
<div class="outline-text-2" id="text-org5c4c9a5">
<p>
上来先看例子：<br>
</p>
<div class="org-src-container">
<pre class="src src-go"><span style="color: #ea3d54;">package</span> main

<span style="color: #ea3d54;">import</span> (
    <span style="color: #4fb3d8;">"fmt"</span>
    <span style="color: #4fb3d8;">"math/rand"</span>
    <span style="color: #4fb3d8;">"sort"</span>
    <span style="color: #4fb3d8;">"strconv"</span>
)

<span style="color: #ea3d54;">func</span> <span style="color: #fedd38;">main</span>() {
    <span style="color: #cbccd1;">lst</span> := <span style="color: #fedd38;">make</span>([]*<span style="color: #ee7b29;">Node</span>, 10)
    <span style="color: #ea3d54;">for</span> <span style="color: #cbccd1;">i</span> := 0; i &lt; 10; i++ {
        lst[i] = &amp;<span style="color: #ee7b29;">Node</span>{
            <span style="color: #ee7b29;">Name</span>: <span style="color: #4fb3d8;">"name"</span> + strconv.<span style="color: #fedd38;">FormatInt</span>(<span style="color: #fedd38;">int64</span>(i), 10),
            <span style="color: #ee7b29;">Num</span>:  rand.<span style="color: #fedd38;">Intn</span>(1000),
        }
    }

    <span style="color: #ea3d54;">for</span> <span style="color: #cbccd1;">_</span>, <span style="color: #cbccd1;">v</span> := <span style="color: #ea3d54;">range</span> lst {
        fmt.<span style="color: #fedd38;">Print</span>(v, <span style="color: #4fb3d8;">" "</span>)
    }
    fmt.<span style="color: #fedd38;">Println</span>()
    sort.<span style="color: #fedd38;">Sort</span>(<span style="color: #fedd38;">NodeList</span>(lst))
    <span style="color: #ea3d54;">for</span> <span style="color: #cbccd1;">_</span>, <span style="color: #cbccd1;">v</span> := <span style="color: #ea3d54;">range</span> lst {
        fmt.<span style="color: #fedd38;">Print</span>(v, <span style="color: #4fb3d8;">" "</span>)
    }
    fmt.<span style="color: #fedd38;">Println</span>()

}

<span style="color: #ea3d54;">type</span> <span style="color: #ee7b29;">Node</span> <span style="color: #ea3d54;">struct</span> {
    Num  <span style="color: #ee7b29;">int</span>
    Name <span style="color: #ee7b29;">string</span>
}

<span style="color: #ea3d54;">type</span> <span style="color: #ee7b29;">NodeList</span> []*<span style="color: #ee7b29;">Node</span>

<span style="color: #ea3d54;">func</span> (<span style="color: #cbccd1;">this</span> <span style="color: #ee7b29;">NodeList</span>) <span style="color: #fedd38;">Len</span>() <span style="color: #ee7b29;">int</span> {
    <span style="color: #ea3d54;">return</span> <span style="color: #fedd38;">len</span>(this)
}
<span style="color: #ea3d54;">func</span> (<span style="color: #cbccd1;">this</span> <span style="color: #ee7b29;">NodeList</span>) <span style="color: #fedd38;">Less</span>(<span style="color: #cbccd1;">i</span>, <span style="color: #cbccd1;">j</span> <span style="color: #ee7b29;">int</span>) <span style="color: #ee7b29;">bool</span> {
    <span style="color: #ea3d54;">return</span> this[i].Num &lt; this[j].Num
}
<span style="color: #ea3d54;">func</span> (<span style="color: #cbccd1;">this</span> <span style="color: #ee7b29;">NodeList</span>) <span style="color: #fedd38;">Swap</span>(<span style="color: #cbccd1;">i</span>, <span style="color: #cbccd1;">j</span> <span style="color: #ee7b29;">int</span>) {
    this[i], this[j] = this[j], this[i]
}
</pre>
</div>

<p>
运行结果：<br>
</p>

<pre class="example" id="org3d10e27">
&amp;{81 name0} &amp;{887 name1} &amp;{847 name2} &amp;{59 name3} &amp;{81 name4} &amp;{318 name5} &amp;{425 name6} &amp;{540 name7} &amp;{456 name8} &amp;{300 name9}
&amp;{59 name3} &amp;{81 name0} &amp;{81 name4} &amp;{300 name9} &amp;{318 name5} &amp;{425 name6} &amp;{456 name8} &amp;{540 name7} &amp;{847 name2} &amp;{887 name1}
</pre>
</div>

<div id="outline-container-org47a4a24" class="outline-3">
<h3 id="org47a4a24">解释：</h3>
<div class="outline-text-3" id="text-org47a4a24">
<p>
我们使用 <code>type</code> 定义了一个 <code>[]*Node</code> 类型的 <code>NodeList</code> 切片， <code>NodeList</code> 实现 <code>Interface</code> 这个接口，这个接口在 <code>sort</code> 中定义，原型：<br>
</p>

<div class="org-src-container">
<pre class="src src-go"><span style="color: #5B6268;">// </span><span style="color: #5B6268;">A type, typically a collection, that satisfies sort.Interface can be</span>
<span style="color: #5B6268;">// </span><span style="color: #5B6268;">sorted by the routines in this package. The methods require that the</span>
<span style="color: #5B6268;">// </span><span style="color: #5B6268;">elements of the collection be enumerated by an integer index.</span>
<span style="color: #ea3d54;">type</span> <span style="color: #ee7b29;">Interface</span> <span style="color: #ea3d54;">interface</span> {
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Len is the number of elements in the collection.</span>
    <span style="color: #fedd38;">Len</span>() <span style="color: #ee7b29;">int</span>
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Less reports whether the element with</span>
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">index i should sort before the element with index j.</span>
    <span style="color: #fedd38;">Less</span>(<span style="color: #cbccd1;">i</span>, <span style="color: #cbccd1;">j</span> <span style="color: #ee7b29;">int</span>) <span style="color: #ee7b29;">bool</span>
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Swap swaps the elements with indexes i and j.</span>
    <span style="color: #fedd38;">Swap</span>(<span style="color: #cbccd1;">i</span>, <span style="color: #cbccd1;">j</span> <span style="color: #ee7b29;">int</span>)
}
</pre>
</div>

<ul class="org-ul">
<li><code>Len()</code> ，返回要排序的序列长度<br></li>
<li><code>Less()</code> ，返回排序需要的比较规则<br></li>
<li><p>
<code>Swap()</code> ，交换两个元素<br>
</p>

<p>
正是因为任何一种排序算法都会调用上述三个函数，所以我们不得不为我们的自定义的结构体实现这个接口。<br>
</p>

<p>
新建一个切片 <code>lst</code> ，随机填充数据，然后调用 <code>sort</code> 包中的 <code>Sort()</code> 函数，进行排序。<br>
</p>

<p>
<code>Sort()</code> 函数需要传递一个 <code>Interface</code> 类型的参数。 使用强制类型转换把 <code>lst</code> 转换为 <code>Interface</code> 类型。<br>
</p>

<p>
<code>sort</code> 包中 还有一个函数实现反向排序， <code>sort.sort.Reverse()</code> 可以实现倒序排序<br>
</p>

<p>
栗子 <code>sort.Sort(sort.Reverse(NodeList(lst)))</code> 就能实现反向排序。<br>
</p></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org95952f0" class="outline-2">
<h2 id="org95952f0">进阶使用</h2>
<div class="outline-text-2" id="text-org95952f0">
<p>
sort 包提供了排序切片和用户自定义数据集的函数。<br>
</p>

<div class="org-src-container">
<pre class="src src-go"><span style="color: #ea3d54;">package</span> sort_test
<span style="color: #ea3d54;">import</span> (
    <span style="color: #4fb3d8;">"fmt"</span>
    <span style="color: #4fb3d8;">"sort"</span>
)
<span style="color: #ea3d54;">type</span> <span style="color: #ee7b29;">Person</span> <span style="color: #ea3d54;">struct</span> {
    Name <span style="color: #ee7b29;">string</span>
    Age  <span style="color: #ee7b29;">int</span>
}
<span style="color: #ea3d54;">func</span> (<span style="color: #cbccd1;">p</span> <span style="color: #ee7b29;">Person</span>) <span style="color: #fedd38;">String</span>() <span style="color: #ee7b29;">string</span> {
    <span style="color: #ea3d54;">return</span> fmt.<span style="color: #fedd38;">Sprintf</span>(<span style="color: #4fb3d8;">"%s: %d"</span>, p.Name, p.Age)
}
<span style="color: #5B6268;">// </span><span style="color: #5B6268;">ByAge implements sort.Interface for []Person based on</span>
<span style="color: #5B6268;">// </span><span style="color: #5B6268;">the Age field.</span>
<span style="color: #ea3d54;">type</span> <span style="color: #ee7b29;">ByAge</span> []<span style="color: #ee7b29;">Person</span>
<span style="color: #ea3d54;">func</span> (<span style="color: #cbccd1;">a</span> <span style="color: #ee7b29;">ByAge</span>) <span style="color: #fedd38;">Len</span>() <span style="color: #ee7b29;">int</span>           { <span style="color: #ea3d54;">return</span> <span style="color: #fedd38;">len</span>(a) }
<span style="color: #ea3d54;">func</span> (<span style="color: #cbccd1;">a</span> <span style="color: #ee7b29;">ByAge</span>) <span style="color: #fedd38;">Swap</span>(<span style="color: #cbccd1;">i</span>, <span style="color: #cbccd1;">j</span> <span style="color: #ee7b29;">int</span>)      { a[i], a[j] = a[j], a[i] }
<span style="color: #ea3d54;">func</span> (<span style="color: #cbccd1;">a</span> <span style="color: #ee7b29;">ByAge</span>) <span style="color: #fedd38;">Less</span>(<span style="color: #cbccd1;">i</span>, <span style="color: #cbccd1;">j</span> <span style="color: #ee7b29;">int</span>) <span style="color: #ee7b29;">bool</span> { <span style="color: #ea3d54;">return</span> a[i].Age &lt; a[j].Age }
<span style="color: #ea3d54;">func</span> <span style="color: #fedd38;">Example</span>() {
    <span style="color: #cbccd1;">people</span> := []<span style="color: #ee7b29;">Person</span>{
        {<span style="color: #4fb3d8;">"Bob"</span>, 31},
        {<span style="color: #4fb3d8;">"John"</span>, 42},
        {<span style="color: #4fb3d8;">"Michael"</span>, 17},
        {<span style="color: #4fb3d8;">"Jenny"</span>, 26},
    }
    fmt.<span style="color: #fedd38;">Println</span>(people)
    sort.<span style="color: #fedd38;">Sort</span>(<span style="color: #fedd38;">ByAge</span>(people))
    fmt.<span style="color: #fedd38;">Println</span>(people)
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Output:</span>
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">[Bob: 31 John: 42 Michael: 17 Jenny: 26]</span>
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">[Michael: 17 Jenny: 26 Bob: 31 John: 42]</span>
}
</pre>
</div>

<div class="org-src-container">
<pre class="src src-go"><span style="color: #ea3d54;">package</span> sort_test
<span style="color: #ea3d54;">import</span> (
    <span style="color: #4fb3d8;">"fmt"</span>
    <span style="color: #4fb3d8;">"sort"</span>
)
<span style="color: #5B6268;">// </span><span style="color: #5B6268;">A couple of type definitions to make the units clear.</span>
<span style="color: #ea3d54;">type</span> <span style="color: #ee7b29;">earthMass</span> <span style="color: #ee7b29;">float64</span>
<span style="color: #ea3d54;">type</span> <span style="color: #ee7b29;">au</span> <span style="color: #ee7b29;">float64</span>
<span style="color: #5B6268;">// </span><span style="color: #5B6268;">A Planet defines the properties of a solar system object.</span>
<span style="color: #ea3d54;">type</span> <span style="color: #ee7b29;">Planet</span> <span style="color: #ea3d54;">struct</span> {
    name     <span style="color: #ee7b29;">string</span>
    mass     <span style="color: #ee7b29;">earthMass</span>
    distance <span style="color: #ee7b29;">au</span>
}
<span style="color: #5B6268;">// </span><span style="color: #5B6268;">By is the type of a "less" function that defines the ordering of its Planet arguments.</span>
<span style="color: #ea3d54;">type</span> <span style="color: #ee7b29;">By</span> <span style="color: #ea3d54;">func</span>(<span style="color: #cbccd1;">p1</span>, <span style="color: #cbccd1;">p2</span> *<span style="color: #ee7b29;">Planet</span>) <span style="color: #ee7b29;">bool</span>
<span style="color: #5B6268;">// </span><span style="color: #5B6268;">Sort is a method on the function type, By, that sorts the argument slice according to the function.</span>
<span style="color: #ea3d54;">func</span> (<span style="color: #cbccd1;">by</span> <span style="color: #ee7b29;">By</span>) <span style="color: #fedd38;">Sort</span>(<span style="color: #cbccd1;">planets</span> []<span style="color: #ee7b29;">Planet</span>) {
    <span style="color: #cbccd1;">ps</span> := &amp;<span style="color: #ee7b29;">planetSorter</span>{
        <span style="color: #ee7b29;">planets</span>: planets,
        <span style="color: #ee7b29;">by</span>:      by, <span style="color: #5B6268;">// </span><span style="color: #5B6268;">The Sort method's receiver is the function (closure) that defines the sort order.</span>
    }
    sort.<span style="color: #fedd38;">Sort</span>(ps)
}
<span style="color: #5B6268;">// </span><span style="color: #5B6268;">planetSorter joins a By function and a slice of Planets to be sorted.</span>
<span style="color: #ea3d54;">type</span> <span style="color: #ee7b29;">planetSorter</span> <span style="color: #ea3d54;">struct</span> {
    planets []<span style="color: #ee7b29;">Planet</span>
    by      <span style="color: #ea3d54;">func</span>(<span style="color: #cbccd1;">p1</span>, <span style="color: #cbccd1;">p2</span> *<span style="color: #ee7b29;">Planet</span>) <span style="color: #ee7b29;">bool</span> <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Closure used in the Less method.</span>
}
<span style="color: #5B6268;">// </span><span style="color: #5B6268;">Len is part of sort.Interface.</span>
<span style="color: #ea3d54;">func</span> (<span style="color: #cbccd1;">s</span> *<span style="color: #ee7b29;">planetSorter</span>) <span style="color: #fedd38;">Len</span>() <span style="color: #ee7b29;">int</span> {
    <span style="color: #ea3d54;">return</span> <span style="color: #fedd38;">len</span>(s.planets)
}
<span style="color: #5B6268;">// </span><span style="color: #5B6268;">Swap is part of sort.Interface.</span>
<span style="color: #ea3d54;">func</span> (<span style="color: #cbccd1;">s</span> *<span style="color: #ee7b29;">planetSorter</span>) <span style="color: #fedd38;">Swap</span>(<span style="color: #cbccd1;">i</span>, <span style="color: #cbccd1;">j</span> <span style="color: #ee7b29;">int</span>) {
    s.planets[i], s.planets[j] = s.planets[j], s.planets[i]
}
<span style="color: #5B6268;">// </span><span style="color: #5B6268;">Less is part of sort.Interface. It is implemented by calling the "by" closure in the sorter.</span>
<span style="color: #ea3d54;">func</span> (<span style="color: #cbccd1;">s</span> *<span style="color: #ee7b29;">planetSorter</span>) <span style="color: #fedd38;">Less</span>(<span style="color: #cbccd1;">i</span>, <span style="color: #cbccd1;">j</span> <span style="color: #ee7b29;">int</span>) <span style="color: #ee7b29;">bool</span> {
    <span style="color: #ea3d54;">return</span> s.<span style="color: #fedd38;">by</span>(&amp;s.planets[i], &amp;s.planets[j])
}
<span style="color: #ea3d54;">var</span> <span style="color: #cbccd1;">planets</span> = []<span style="color: #ee7b29;">Planet</span>{
    {<span style="color: #4fb3d8;">"Mercury"</span>, 0.055, 0.4},
    {<span style="color: #4fb3d8;">"Venus"</span>, 0.815, 0.7},
    {<span style="color: #4fb3d8;">"Earth"</span>, 1.0, 1.0},
    {<span style="color: #4fb3d8;">"Mars"</span>, 0.107, 1.5},
}
<span style="color: #5B6268;">// </span><span style="color: #5B6268;">ExampleSortKeys demonstrates a technique for sorting a struct type using programmable sort criteria.</span>
<span style="color: #ea3d54;">func</span> <span style="color: #fedd38;">Example_sortKeys</span>() {
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Closures that order the Planet structure.</span>
    <span style="color: #cbccd1;">name</span> := <span style="color: #ea3d54;">func</span>(<span style="color: #cbccd1;">p1</span>, <span style="color: #cbccd1;">p2</span> *<span style="color: #ee7b29;">Planet</span>) <span style="color: #ee7b29;">bool</span> {
        <span style="color: #ea3d54;">return</span> p1.name &lt; p2.name
    }
    <span style="color: #cbccd1;">mass</span> := <span style="color: #ea3d54;">func</span>(<span style="color: #cbccd1;">p1</span>, <span style="color: #cbccd1;">p2</span> *<span style="color: #ee7b29;">Planet</span>) <span style="color: #ee7b29;">bool</span> {
        <span style="color: #ea3d54;">return</span> p1.mass &lt; p2.mass
    }
    <span style="color: #cbccd1;">distance</span> := <span style="color: #ea3d54;">func</span>(<span style="color: #cbccd1;">p1</span>, <span style="color: #cbccd1;">p2</span> *<span style="color: #ee7b29;">Planet</span>) <span style="color: #ee7b29;">bool</span> {
        <span style="color: #ea3d54;">return</span> p1.distance &lt; p2.distance
    }
    <span style="color: #cbccd1;">decreasingDistance</span> := <span style="color: #ea3d54;">func</span>(<span style="color: #cbccd1;">p1</span>, <span style="color: #cbccd1;">p2</span> *<span style="color: #ee7b29;">Planet</span>) <span style="color: #ee7b29;">bool</span> {
        <span style="color: #ea3d54;">return</span> <span style="color: #78bd65; font-weight: bold;">!</span><span style="color: #fedd38;">distance</span>(p1, p2)
    }
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Sort the planets by the various criteria.</span>
    <span style="color: #fedd38;">By</span>(name).<span style="color: #fedd38;">Sort</span>(planets)
    fmt.<span style="color: #fedd38;">Println</span>(<span style="color: #4fb3d8;">"By name:"</span>, planets)
    <span style="color: #fedd38;">By</span>(mass).<span style="color: #fedd38;">Sort</span>(planets)
    fmt.<span style="color: #fedd38;">Println</span>(<span style="color: #4fb3d8;">"By mass:"</span>, planets)
    <span style="color: #fedd38;">By</span>(distance).<span style="color: #fedd38;">Sort</span>(planets)
    fmt.<span style="color: #fedd38;">Println</span>(<span style="color: #4fb3d8;">"By distance:"</span>, planets)
    <span style="color: #fedd38;">By</span>(decreasingDistance).<span style="color: #fedd38;">Sort</span>(planets)
    fmt.<span style="color: #fedd38;">Println</span>(<span style="color: #4fb3d8;">"By decreasing distance:"</span>, planets)
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Output: By name: [{Earth 1 1} {Mars 0.107 1.5} {Mercury 0.055 0.4} {Venus 0.815 0.7}]</span>
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">By mass: [{Mercury 0.055 0.4} {Mars 0.107 1.5} {Venus 0.815 0.7} {Earth 1 1}]</span>
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">By distance: [{Mercury 0.055 0.4} {Venus 0.815 0.7} {Earth 1 1} {Mars 0.107 1.5}]</span>
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">By decreasing distance: [{Mars 0.107 1.5} {Earth 1 1} {Venus 0.815 0.7} {Mercury 0.055 0.4}]</span>
}
</pre>
</div>

<div class="org-src-container">
<pre class="src src-go"><span style="color: #ea3d54;">package</span> sort_test
<span style="color: #ea3d54;">import</span> (
    <span style="color: #4fb3d8;">"fmt"</span>
    <span style="color: #4fb3d8;">"sort"</span>
)
<span style="color: #5B6268;">// </span><span style="color: #5B6268;">A Change is a record of source code changes, recording user, language, and delta size.</span>
<span style="color: #ea3d54;">type</span> <span style="color: #ee7b29;">Change</span> <span style="color: #ea3d54;">struct</span> {
    user     <span style="color: #ee7b29;">string</span>
    language <span style="color: #ee7b29;">string</span>
    lines    <span style="color: #ee7b29;">int</span>
}
<span style="color: #ea3d54;">type</span> <span style="color: #ee7b29;">lessFunc</span> <span style="color: #ea3d54;">func</span>(<span style="color: #cbccd1;">p1</span>, <span style="color: #cbccd1;">p2</span> *<span style="color: #ee7b29;">Change</span>) <span style="color: #ee7b29;">bool</span>
<span style="color: #5B6268;">// </span><span style="color: #5B6268;">multiSorter implements the Sort interface, sorting the changes within.</span>
<span style="color: #ea3d54;">type</span> <span style="color: #ee7b29;">multiSorter</span> <span style="color: #ea3d54;">struct</span> {
    changes []<span style="color: #ee7b29;">Change</span>
    less    []<span style="color: #ee7b29;">lessFunc</span>
}
<span style="color: #5B6268;">// </span><span style="color: #5B6268;">Sort sorts the argument slice according to the less functions passed to OrderedBy.</span>
<span style="color: #ea3d54;">func</span> (<span style="color: #cbccd1;">ms</span> *<span style="color: #ee7b29;">multiSorter</span>) <span style="color: #fedd38;">Sort</span>(<span style="color: #cbccd1;">changes</span> []<span style="color: #ee7b29;">Change</span>) {
    ms.changes = changes
    sort.<span style="color: #fedd38;">Sort</span>(ms)
}
<span style="color: #5B6268;">// </span><span style="color: #5B6268;">OrderedBy returns a Sorter that sorts using the less functions, in order.</span>
<span style="color: #5B6268;">// </span><span style="color: #5B6268;">Call its Sort method to sort the data.</span>
<span style="color: #ea3d54;">func</span> <span style="color: #fedd38;">OrderedBy</span>(<span style="color: #cbccd1;">less</span> ...<span style="color: #ee7b29;">lessFunc</span>) *<span style="color: #ee7b29;">multiSorter</span> {
    <span style="color: #ea3d54;">return</span> &amp;<span style="color: #ee7b29;">multiSorter</span>{
        <span style="color: #ee7b29;">less</span>: less,
    }
}
<span style="color: #5B6268;">// </span><span style="color: #5B6268;">Len is part of sort.Interface.</span>
<span style="color: #ea3d54;">func</span> (<span style="color: #cbccd1;">ms</span> *<span style="color: #ee7b29;">multiSorter</span>) <span style="color: #fedd38;">Len</span>() <span style="color: #ee7b29;">int</span> {
    <span style="color: #ea3d54;">return</span> <span style="color: #fedd38;">len</span>(ms.changes)
}
<span style="color: #5B6268;">// </span><span style="color: #5B6268;">Swap is part of sort.Interface.</span>
<span style="color: #ea3d54;">func</span> (<span style="color: #cbccd1;">ms</span> *<span style="color: #ee7b29;">multiSorter</span>) <span style="color: #fedd38;">Swap</span>(<span style="color: #cbccd1;">i</span>, <span style="color: #cbccd1;">j</span> <span style="color: #ee7b29;">int</span>) {
    ms.changes[i], ms.changes[j] = ms.changes[j], ms.changes[i]
}
<span style="color: #5B6268;">// </span><span style="color: #5B6268;">Less is part of sort.Interface. It is implemented by looping along the</span>
<span style="color: #5B6268;">// </span><span style="color: #5B6268;">less functions until it finds a comparison that is either Less or</span>
<span style="color: #5B6268;">// </span><span style="color: #5B6268;">!Less. Note that it can call the less functions twice per call. We</span>
<span style="color: #5B6268;">// </span><span style="color: #5B6268;">could change the functions to return -1, 0, 1 and reduce the</span>
<span style="color: #5B6268;">// </span><span style="color: #5B6268;">number of calls for greater efficiency: an exercise for the reader.</span>
<span style="color: #ea3d54;">func</span> (<span style="color: #cbccd1;">ms</span> *<span style="color: #ee7b29;">multiSorter</span>) <span style="color: #fedd38;">Less</span>(<span style="color: #cbccd1;">i</span>, <span style="color: #cbccd1;">j</span> <span style="color: #ee7b29;">int</span>) <span style="color: #ee7b29;">bool</span> {
    <span style="color: #cbccd1;">p</span>, <span style="color: #cbccd1;">q</span> := &amp;ms.changes[i], &amp;ms.changes[j]
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Try all but the last comparison.</span>
    <span style="color: #ea3d54;">var</span> <span style="color: #cbccd1;">k</span> <span style="color: #ee7b29;">int</span>
    <span style="color: #ea3d54;">for</span> k = 0; k &lt; <span style="color: #fedd38;">len</span>(ms.less)-1; k++ {
        <span style="color: #cbccd1;">less</span> := ms.less[k]
        <span style="color: #ea3d54;">switch</span> {
        <span style="color: #ea3d54;">case</span> <span style="color: #fedd38;">less</span>(p, q):
            <span style="color: #5B6268;">// </span><span style="color: #5B6268;">p &lt; q, so we have a decision.</span>
            <span style="color: #ea3d54;">return</span> <span style="color: #ee7b29;">true</span>
        <span style="color: #ea3d54;">case</span> <span style="color: #fedd38;">less</span>(q, p):
            <span style="color: #5B6268;">// </span><span style="color: #5B6268;">p &gt; q, so we have a decision.</span>
            <span style="color: #ea3d54;">return</span> <span style="color: #ee7b29;">false</span>
        }
        <span style="color: #5B6268;">// </span><span style="color: #5B6268;">p == q; try the next comparison.</span>
    }
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">All comparisons to here said "equal", so just return whatever</span>
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">the final comparison reports.</span>
    <span style="color: #ea3d54;">return</span> ms.less[k](p, q)
}
<span style="color: #ea3d54;">var</span> <span style="color: #cbccd1;">changes</span> = []<span style="color: #ee7b29;">Change</span>{
    {<span style="color: #4fb3d8;">"gri"</span>, <span style="color: #4fb3d8;">"Go"</span>, 100},
    {<span style="color: #4fb3d8;">"ken"</span>, <span style="color: #4fb3d8;">"C"</span>, 150},
    {<span style="color: #4fb3d8;">"glenda"</span>, <span style="color: #4fb3d8;">"Go"</span>, 200},
    {<span style="color: #4fb3d8;">"rsc"</span>, <span style="color: #4fb3d8;">"Go"</span>, 200},
    {<span style="color: #4fb3d8;">"r"</span>, <span style="color: #4fb3d8;">"Go"</span>, 100},
    {<span style="color: #4fb3d8;">"ken"</span>, <span style="color: #4fb3d8;">"Go"</span>, 200},
    {<span style="color: #4fb3d8;">"dmr"</span>, <span style="color: #4fb3d8;">"C"</span>, 100},
    {<span style="color: #4fb3d8;">"r"</span>, <span style="color: #4fb3d8;">"C"</span>, 150},
    {<span style="color: #4fb3d8;">"gri"</span>, <span style="color: #4fb3d8;">"Smalltalk"</span>, 80},
}
<span style="color: #5B6268;">// </span><span style="color: #5B6268;">ExampleMultiKeys demonstrates a technique for sorting a struct type using different</span>
<span style="color: #5B6268;">// </span><span style="color: #5B6268;">sets of multiple fields in the comparison. We chain together "Less" functions, each of</span>
<span style="color: #5B6268;">// </span><span style="color: #5B6268;">which compares a single field.</span>
<span style="color: #ea3d54;">func</span> <span style="color: #fedd38;">Example_sortMultiKeys</span>() {
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Closures that order the Change structure.</span>
    <span style="color: #cbccd1;">user</span> := <span style="color: #ea3d54;">func</span>(<span style="color: #cbccd1;">c1</span>, <span style="color: #cbccd1;">c2</span> *<span style="color: #ee7b29;">Change</span>) <span style="color: #ee7b29;">bool</span> {
        <span style="color: #ea3d54;">return</span> c1.user &lt; c2.user
    }
    <span style="color: #cbccd1;">language</span> := <span style="color: #ea3d54;">func</span>(<span style="color: #cbccd1;">c1</span>, <span style="color: #cbccd1;">c2</span> *<span style="color: #ee7b29;">Change</span>) <span style="color: #ee7b29;">bool</span> {
        <span style="color: #ea3d54;">return</span> c1.language &lt; c2.language
    }
    <span style="color: #cbccd1;">increasingLines</span> := <span style="color: #ea3d54;">func</span>(<span style="color: #cbccd1;">c1</span>, <span style="color: #cbccd1;">c2</span> *<span style="color: #ee7b29;">Change</span>) <span style="color: #ee7b29;">bool</span> {
        <span style="color: #ea3d54;">return</span> c1.lines &lt; c2.lines
    }
    <span style="color: #cbccd1;">decreasingLines</span> := <span style="color: #ea3d54;">func</span>(<span style="color: #cbccd1;">c1</span>, <span style="color: #cbccd1;">c2</span> *<span style="color: #ee7b29;">Change</span>) <span style="color: #ee7b29;">bool</span> {
        <span style="color: #ea3d54;">return</span> c1.lines &gt; c2.lines <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Note: &gt; orders downwards.</span>
    }
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Simple use: Sort by user.</span>
    <span style="color: #fedd38;">OrderedBy</span>(user).<span style="color: #fedd38;">Sort</span>(changes)
    fmt.<span style="color: #fedd38;">Println</span>(<span style="color: #4fb3d8;">"By user:"</span>, changes)
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">More examples.</span>
    <span style="color: #fedd38;">OrderedBy</span>(user, increasingLines).<span style="color: #fedd38;">Sort</span>(changes)
    fmt.<span style="color: #fedd38;">Println</span>(<span style="color: #4fb3d8;">"By user,&lt;lines:"</span>, changes)
    <span style="color: #fedd38;">OrderedBy</span>(user, decreasingLines).<span style="color: #fedd38;">Sort</span>(changes)
    fmt.<span style="color: #fedd38;">Println</span>(<span style="color: #4fb3d8;">"By user,&gt;lines:"</span>, changes)
    <span style="color: #fedd38;">OrderedBy</span>(language, increasingLines).<span style="color: #fedd38;">Sort</span>(changes)
    fmt.<span style="color: #fedd38;">Println</span>(<span style="color: #4fb3d8;">"By language,&lt;lines:"</span>, changes)
    <span style="color: #fedd38;">OrderedBy</span>(language, increasingLines, user).<span style="color: #fedd38;">Sort</span>(changes)
    fmt.<span style="color: #fedd38;">Println</span>(<span style="color: #4fb3d8;">"By language,&lt;lines,user:"</span>, changes)
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Output:</span>
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">By user: [{dmr C 100} {glenda Go 200} {gri Smalltalk 80} {gri Go 100} {ken Go 200} {ken C 150} {r Go 100} {r C 150} {rsc Go 200}]</span>
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">By user,&lt;lines: [{dmr C 100} {glenda Go 200} {gri Smalltalk 80} {gri Go 100} {ken C 150} {ken Go 200} {r Go 100} {r C 150} {rsc Go 200}]</span>
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">By user,&gt;lines: [{dmr C 100} {glenda Go 200} {gri Go 100} {gri Smalltalk 80} {ken Go 200} {ken C 150} {r C 150} {r Go 100} {rsc Go 200}]</span>
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">By language,&lt;lines: [{dmr C 100} {ken C 150} {r C 150} {gri Go 100} {r Go 100} {ken Go 200} {glenda Go 200} {rsc Go 200} {gri Smalltalk 80}]</span>
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">By language,&lt;lines,user: [{dmr C 100} {ken C 150} {r C 150} {gri Go 100} {r Go 100} {glenda Go 200} {ken Go 200} {rsc Go 200} {gri Smalltalk 80}]</span>
}
</pre>
</div>

<div class="org-src-container">
<pre class="src src-go"><span style="color: #ea3d54;">package</span> sort_test
<span style="color: #ea3d54;">import</span> (
    <span style="color: #4fb3d8;">"fmt"</span>
    <span style="color: #4fb3d8;">"sort"</span>
)
<span style="color: #ea3d54;">type</span> <span style="color: #ee7b29;">Grams</span> <span style="color: #ee7b29;">int</span>
<span style="color: #ea3d54;">func</span> (<span style="color: #cbccd1;">g</span> <span style="color: #ee7b29;">Grams</span>) <span style="color: #fedd38;">String</span>() <span style="color: #ee7b29;">string</span> { <span style="color: #ea3d54;">return</span> fmt.<span style="color: #fedd38;">Sprintf</span>(<span style="color: #4fb3d8;">"%dg"</span>, <span style="color: #fedd38;">int</span>(g)) }
<span style="color: #ea3d54;">type</span> <span style="color: #ee7b29;">Organ</span> <span style="color: #ea3d54;">struct</span> {
    Name   <span style="color: #ee7b29;">string</span>
    Weight <span style="color: #ee7b29;">Grams</span>
}
<span style="color: #ea3d54;">type</span> <span style="color: #ee7b29;">Organs</span> []*<span style="color: #ee7b29;">Organ</span>
<span style="color: #ea3d54;">func</span> (<span style="color: #cbccd1;">s</span> <span style="color: #ee7b29;">Organs</span>) <span style="color: #fedd38;">Len</span>() <span style="color: #ee7b29;">int</span>      { <span style="color: #ea3d54;">return</span> <span style="color: #fedd38;">len</span>(s) }
<span style="color: #ea3d54;">func</span> (<span style="color: #cbccd1;">s</span> <span style="color: #ee7b29;">Organs</span>) <span style="color: #fedd38;">Swap</span>(<span style="color: #cbccd1;">i</span>, <span style="color: #cbccd1;">j</span> <span style="color: #ee7b29;">int</span>) { s[i], s[j] = s[j], s[i] }
<span style="color: #5B6268;">// </span><span style="color: #5B6268;">ByName implements sort.Interface by providing Less and using the Len and</span>
<span style="color: #5B6268;">// </span><span style="color: #5B6268;">Swap methods of the embedded Organs value.</span>
<span style="color: #ea3d54;">type</span> <span style="color: #ee7b29;">ByName</span> <span style="color: #ea3d54;">struct</span>{ Organs }
<span style="color: #ea3d54;">func</span> (<span style="color: #cbccd1;">s</span> <span style="color: #ee7b29;">ByName</span>) <span style="color: #fedd38;">Less</span>(<span style="color: #cbccd1;">i</span>, <span style="color: #cbccd1;">j</span> <span style="color: #ee7b29;">int</span>) <span style="color: #ee7b29;">bool</span> { <span style="color: #ea3d54;">return</span> s.Organs[i].Name &lt; s.Organs[j].Name }
<span style="color: #5B6268;">// </span><span style="color: #5B6268;">ByWeight implements sort.Interface by providing Less and using the Len and</span>
<span style="color: #5B6268;">// </span><span style="color: #5B6268;">Swap methods of the embedded Organs value.</span>
<span style="color: #ea3d54;">type</span> <span style="color: #ee7b29;">ByWeight</span> <span style="color: #ea3d54;">struct</span>{ Organs }
<span style="color: #ea3d54;">func</span> (<span style="color: #cbccd1;">s</span> <span style="color: #ee7b29;">ByWeight</span>) <span style="color: #fedd38;">Less</span>(<span style="color: #cbccd1;">i</span>, <span style="color: #cbccd1;">j</span> <span style="color: #ee7b29;">int</span>) <span style="color: #ee7b29;">bool</span> { <span style="color: #ea3d54;">return</span> s.Organs[i].Weight &lt; s.Organs[j].Weight }
<span style="color: #ea3d54;">func</span> <span style="color: #fedd38;">Example_sortWrapper</span>() {
    <span style="color: #cbccd1;">s</span> := []*<span style="color: #ee7b29;">Organ</span>{
        {<span style="color: #4fb3d8;">"brain"</span>, 1340},
        {<span style="color: #4fb3d8;">"heart"</span>, 290},
        {<span style="color: #4fb3d8;">"liver"</span>, 1494},
        {<span style="color: #4fb3d8;">"pancreas"</span>, 131},
        {<span style="color: #4fb3d8;">"prostate"</span>, 62},
        {<span style="color: #4fb3d8;">"spleen"</span>, 162},
    }
    sort.<span style="color: #fedd38;">Sort</span>(<span style="color: #ee7b29;">ByWeight</span>{s})
    fmt.<span style="color: #fedd38;">Println</span>(<span style="color: #4fb3d8;">"Organs by weight:"</span>)
    <span style="color: #fedd38;">printOrgans</span>(s)
    sort.<span style="color: #fedd38;">Sort</span>(<span style="color: #ee7b29;">ByName</span>{s})
    fmt.<span style="color: #fedd38;">Println</span>(<span style="color: #4fb3d8;">"Organs by name:"</span>)
    <span style="color: #fedd38;">printOrgans</span>(s)
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Output:</span>
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Organs by weight:</span>
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">prostate (62g)</span>
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">pancreas (131g)</span>
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">spleen   (162g)</span>
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">heart    (290g)</span>
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">brain    (1340g)</span>
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">liver    (1494g)</span>
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Organs by name:</span>
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">brain    (1340g)</span>
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">heart    (290g)</span>
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">liver    (1494g)</span>
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">pancreas (131g)</span>
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">prostate (62g)</span>
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">spleen   (162g)</span>
}
<span style="color: #ea3d54;">func</span> <span style="color: #fedd38;">printOrgans</span>(<span style="color: #cbccd1;">s</span> []*<span style="color: #ee7b29;">Organ</span>) {
    <span style="color: #ea3d54;">for</span> <span style="color: #cbccd1;">_</span>, <span style="color: #cbccd1;">o</span> := <span style="color: #ea3d54;">range</span> s {
        fmt.<span style="color: #fedd38;">Printf</span>(<span style="color: #4fb3d8;">"%-8s (%v)\n"</span>, o.Name, o.Weight)
    }
}
</pre>
</div>
</div>
</div>
<div id="outline-container-org768001d" class="outline-2">
<h2 id="org768001d">type Interface</h2>
<div class="outline-text-2" id="text-org768001d">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #ea3d54;">type</span> <span style="color: #ee7b29;">Interface</span> <span style="color: #ea3d54;">interface</span> {
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Len&#26041;&#27861;&#36820;&#22238;&#38598;&#21512;&#20013;&#30340;&#20803;&#32032;&#20010;&#25968;</span>
    <span style="color: #fedd38;">Len</span>() <span style="color: #ee7b29;">int</span>
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Less&#26041;&#27861;&#25253;&#21578;&#32034;&#24341;i&#30340;&#20803;&#32032;&#26159;&#21542;&#27604;&#32034;&#24341;j&#30340;&#20803;&#32032;&#23567;</span>
    <span style="color: #fedd38;">Less</span>(<span style="color: #cbccd1;">i</span>, <span style="color: #cbccd1;">j</span> <span style="color: #ee7b29;">int</span>) <span style="color: #ee7b29;">bool</span>
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Swap&#26041;&#27861;&#20132;&#25442;&#32034;&#24341;i&#21644;j&#30340;&#20004;&#20010;&#20803;&#32032;</span>
    <span style="color: #fedd38;">Swap</span>(<span style="color: #cbccd1;">i</span>, <span style="color: #cbccd1;">j</span> <span style="color: #ee7b29;">int</span>)
}
</pre>
</div>

<p>
一个满足sort.Interface接口的（集合）类型可以被本包的函数进行排序。方法要求集合中的元素可以被整数索引。<br>
</p>
</div>
</div>
<div id="outline-container-org50406d9" class="outline-2">
<h2 id="org50406d9">type IntSlice</h2>
<div class="outline-text-2" id="text-org50406d9">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #ea3d54;">type</span> <span style="color: #ee7b29;">IntSlice</span> []<span style="color: #ee7b29;">int</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-go"><span style="color: #ea3d54;">package</span> main

<span style="color: #ea3d54;">import</span> (
    <span style="color: #4fb3d8;">"fmt"</span>
    <span style="color: #4fb3d8;">"math/rand"</span>
    <span style="color: #4fb3d8;">"sort"</span>
)

<span style="color: #ea3d54;">func</span> <span style="color: #fedd38;">main</span>() {
    <span style="color: #cbccd1;">lst</span> := <span style="color: #fedd38;">make</span>([]<span style="color: #ee7b29;">int</span>, 10)
    <span style="color: #ea3d54;">for</span> <span style="color: #cbccd1;">i</span> := 0; i &lt; 10; i++ {
        lst[i] = <span style="color: #fedd38;">int</span>(rand.<span style="color: #fedd38;">Int31n</span>(1000))
    }
    fmt.<span style="color: #fedd38;">Println</span>(lst)
    sort.<span style="color: #fedd38;">Sort</span>(sort.<span style="color: #fedd38;">IntSlice</span>(lst))
    fmt.<span style="color: #fedd38;">Println</span>(lst)
}
</pre>
</div>

<p>
IntSlice给[]int添加方法以满足Interface接口，以便排序为递增序列。<br>
</p>
</div>
<div id="outline-container-org05e56f7" class="outline-3">
<h3 id="org05e56f7">func (IntSlice) Len</h3>
<div class="outline-text-3" id="text-org05e56f7">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #ea3d54;">func</span> (<span style="color: #cbccd1;">p</span> <span style="color: #ee7b29;">IntSlice</span>) <span style="color: #fedd38;">Len</span>() <span style="color: #ee7b29;">int</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgdd5900b" class="outline-3">
<h3 id="orgdd5900b">func (IntSlice) Less</h3>
<div class="outline-text-3" id="text-orgdd5900b">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #ea3d54;">func</span> (<span style="color: #cbccd1;">p</span> <span style="color: #ee7b29;">IntSlice</span>) <span style="color: #fedd38;">Less</span>(<span style="color: #cbccd1;">i</span>, <span style="color: #cbccd1;">j</span> <span style="color: #ee7b29;">int</span>) <span style="color: #ee7b29;">bool</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgc345df9" class="outline-3">
<h3 id="orgc345df9">func (IntSlice) Swap</h3>
<div class="outline-text-3" id="text-orgc345df9">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #ea3d54;">func</span> (<span style="color: #cbccd1;">p</span> <span style="color: #ee7b29;">IntSlice</span>) <span style="color: #fedd38;">Swap</span>(<span style="color: #cbccd1;">i</span>, <span style="color: #cbccd1;">j</span> <span style="color: #ee7b29;">int</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-orga18f77a" class="outline-3">
<h3 id="orga18f77a">func (IntSlice) Sort</h3>
<div class="outline-text-3" id="text-orga18f77a">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #ea3d54;">func</span> (<span style="color: #cbccd1;">p</span> <span style="color: #ee7b29;">IntSlice</span>) <span style="color: #fedd38;">Sort</span>()
</pre>
</div>

<p>
Sort等价于调用Sort(p)<br>
</p>
</div>
</div>
<div id="outline-container-orgf4ca1e3" class="outline-3">
<h3 id="orgf4ca1e3">func (IntSlice) Search</h3>
<div class="outline-text-3" id="text-orgf4ca1e3">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #ea3d54;">func</span> (<span style="color: #cbccd1;">p</span> <span style="color: #ee7b29;">IntSlice</span>) <span style="color: #fedd38;">Search</span>(<span style="color: #cbccd1;">x</span> <span style="color: #ee7b29;">int</span>) <span style="color: #ee7b29;">int</span>
</pre>
</div>

<p>
Search等价于调用SearchInts(p, x)<br>
</p>
</div>
</div>
</div>
<div id="outline-container-org7e7ead4" class="outline-2">
<h2 id="org7e7ead4">type Float64Slice</h2>
<div class="outline-text-2" id="text-org7e7ead4">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #ea3d54;">type</span> <span style="color: #ee7b29;">Float64Slice</span> []<span style="color: #ee7b29;">float64</span>
</pre>
</div>

<p>
Float64Slice给[]float64添加方法以满足Interface接口，以便排序为递增序列。<br>
</p>
</div>
<div id="outline-container-org0cf3bc0" class="outline-3">
<h3 id="org0cf3bc0">func (Float64Slice) Len</h3>
<div class="outline-text-3" id="text-org0cf3bc0">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #ea3d54;">func</span> (<span style="color: #cbccd1;">p</span> <span style="color: #ee7b29;">Float64Slice</span>) <span style="color: #fedd38;">Len</span>() <span style="color: #ee7b29;">int</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org0c5ff1b" class="outline-3">
<h3 id="org0c5ff1b">func (Float64Slice) Less</h3>
<div class="outline-text-3" id="text-org0c5ff1b">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #ea3d54;">func</span> (<span style="color: #cbccd1;">p</span> <span style="color: #ee7b29;">Float64Slice</span>) <span style="color: #fedd38;">Less</span>(<span style="color: #cbccd1;">i</span>, <span style="color: #cbccd1;">j</span> <span style="color: #ee7b29;">int</span>) <span style="color: #ee7b29;">bool</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org7638a34" class="outline-3">
<h3 id="org7638a34">func (Float64Slice) Swap</h3>
<div class="outline-text-3" id="text-org7638a34">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #ea3d54;">func</span> (<span style="color: #cbccd1;">p</span> <span style="color: #ee7b29;">Float64Slice</span>) <span style="color: #fedd38;">Swap</span>(<span style="color: #cbccd1;">i</span>, <span style="color: #cbccd1;">j</span> <span style="color: #ee7b29;">int</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-org91f2c41" class="outline-3">
<h3 id="org91f2c41">func (Float64Slice) Sort</h3>
<div class="outline-text-3" id="text-org91f2c41">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #ea3d54;">func</span> (<span style="color: #cbccd1;">p</span> <span style="color: #ee7b29;">Float64Slice</span>) <span style="color: #fedd38;">Sort</span>()
</pre>
</div>

<p>
Sort等价于调用Sort(p)<br>
</p>
</div>
</div>
<div id="outline-container-org36b2ce5" class="outline-3">
<h3 id="org36b2ce5">func (Float64Slice) Search</h3>
<div class="outline-text-3" id="text-org36b2ce5">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #ea3d54;">func</span> (<span style="color: #cbccd1;">p</span> <span style="color: #ee7b29;">Float64Slice</span>) <span style="color: #fedd38;">Search</span>(<span style="color: #cbccd1;">x</span> <span style="color: #ee7b29;">float64</span>) <span style="color: #ee7b29;">int</span>
</pre>
</div>

<p>
Search等价于调用SearchFloat64s(p, x)<br>
</p>
</div>
</div>
</div>
<div id="outline-container-org0ae525b" class="outline-2">
<h2 id="org0ae525b">type StringSlice</h2>
<div class="outline-text-2" id="text-org0ae525b">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #ea3d54;">type</span> <span style="color: #ee7b29;">StringSlice</span> []<span style="color: #ee7b29;">string</span>
</pre>
</div>

<p>
StringSlice给[]string添加方法以满足Interface接口，以便排序为递增序列。<br>
</p>
</div>
<div id="outline-container-orgec055f2" class="outline-3">
<h3 id="orgec055f2">func (StringSlice) Len</h3>
<div class="outline-text-3" id="text-orgec055f2">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #ea3d54;">func</span> (<span style="color: #cbccd1;">p</span> <span style="color: #ee7b29;">StringSlice</span>) <span style="color: #fedd38;">Len</span>() <span style="color: #ee7b29;">int</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgae04600" class="outline-3">
<h3 id="orgae04600">func (StringSlice) Less</h3>
<div class="outline-text-3" id="text-orgae04600">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #ea3d54;">func</span> (<span style="color: #cbccd1;">p</span> <span style="color: #ee7b29;">StringSlice</span>) <span style="color: #fedd38;">Less</span>(<span style="color: #cbccd1;">i</span>, <span style="color: #cbccd1;">j</span> <span style="color: #ee7b29;">int</span>) <span style="color: #ee7b29;">bool</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org2efdf7e" class="outline-3">
<h3 id="org2efdf7e">func (StringSlice) Swap</h3>
<div class="outline-text-3" id="text-org2efdf7e">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #ea3d54;">func</span> (<span style="color: #cbccd1;">p</span> <span style="color: #ee7b29;">StringSlice</span>) <span style="color: #fedd38;">Swap</span>(<span style="color: #cbccd1;">i</span>, <span style="color: #cbccd1;">j</span> <span style="color: #ee7b29;">int</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-org201aa6e" class="outline-3">
<h3 id="org201aa6e">func (StringSlice) Sort</h3>
<div class="outline-text-3" id="text-org201aa6e">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #ea3d54;">func</span> (<span style="color: #cbccd1;">p</span> <span style="color: #ee7b29;">StringSlice</span>) <span style="color: #fedd38;">Sort</span>()
</pre>
</div>

<p>
Sort等价于调用Sort(p)<br>
</p>
</div>
</div>
<div id="outline-container-org0769a7e" class="outline-3">
<h3 id="org0769a7e">func (StringSlice) Search</h3>
<div class="outline-text-3" id="text-org0769a7e">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #ea3d54;">func</span> (<span style="color: #cbccd1;">p</span> <span style="color: #ee7b29;">StringSlice</span>) <span style="color: #fedd38;">Search</span>(<span style="color: #cbccd1;">x</span> <span style="color: #ee7b29;">string</span>) <span style="color: #ee7b29;">int</span>
</pre>
</div>

<p>
Search等价于调用SearchStrings(p, x)<br>
</p>
</div>
</div>
</div>
<div id="outline-container-org97d6272" class="outline-2">
<h2 id="org97d6272">func Sort</h2>
<div class="outline-text-2" id="text-org97d6272">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #ea3d54;">func</span> <span style="color: #fedd38;">Sort</span>(<span style="color: #cbccd1;">data</span> <span style="color: #ee7b29;">Interface</span>)
</pre>
</div>

<p>
Sort排序data。它调用1次data.Len确定长度，调用 O(n*log(n)) 次data.Less和data.Swap。本函数不能保证排序的稳定性（即不保证相等元素的相对次序不变）。<br>
</p>
</div>
</div>
<div id="outline-container-org0499c4f" class="outline-2">
<h2 id="org0499c4f">func Stable</h2>
<div class="outline-text-2" id="text-org0499c4f">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #ea3d54;">func</span> <span style="color: #fedd38;">Stable</span>(<span style="color: #cbccd1;">data</span> <span style="color: #ee7b29;">Interface</span>)
</pre>
</div>

<p>
Stable排序data，并保证排序的稳定性，相等元素的相对次序不变。<br>
</p>

<p>
它调用 1 次 data.Len，O(n*log(n)) 次 data.Less 和 O(n*log(n)*log(n)) 次 data.Swap。<br>
</p>
</div>
</div>
<div id="outline-container-orgb6168f3" class="outline-2">
<h2 id="orgb6168f3">func IsSorted</h2>
<div class="outline-text-2" id="text-orgb6168f3">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #ea3d54;">func</span> <span style="color: #fedd38;">IsSorted</span>(<span style="color: #cbccd1;">data</span> <span style="color: #ee7b29;">Interface</span>) <span style="color: #ee7b29;">bool</span>
</pre>
</div>

<p>
IsSorted 报告 data 是否已经被排序。<br>
</p>
</div>
</div>
<div id="outline-container-orgcbe1df5" class="outline-2">
<h2 id="orgcbe1df5">func Reverse</h2>
<div class="outline-text-2" id="text-orgcbe1df5">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #ea3d54;">func</span> <span style="color: #fedd38;">Reverse</span>(<span style="color: #cbccd1;">data</span> <span style="color: #ee7b29;">Interface</span>) <span style="color: #ee7b29;">Interface</span>
</pre>
</div>

<p>
Reverse包装一个Interface接口并返回一个新的Interface接口，对该接口排序可生成递减序列。<br>
</p>

<div class="org-src-container">
<pre class="src src-go"><span style="color: #cbccd1;">s</span> := []<span style="color: #ee7b29;">int</span>{5, 2, 6, 3, 1, 4} <span style="color: #5B6268;">// </span><span style="color: #5B6268;">unsorted</span>
sort.<span style="color: #fedd38;">Sort</span>(sort.<span style="color: #fedd38;">Reverse</span>(sort.<span style="color: #fedd38;">IntSlice</span>(s)))
fmt.<span style="color: #fedd38;">Println</span>(s)
</pre>
</div>

<p>
Output:<br>
</p>

<pre class="example" id="orgd634edb">
[6 5 4 3 2 1]
</pre>
</div>
</div>
<div id="outline-container-org55afc07" class="outline-2">
<h2 id="org55afc07">func Search</h2>
<div class="outline-text-2" id="text-org55afc07">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #ea3d54;">func</span> <span style="color: #fedd38;">Search</span>(<span style="color: #cbccd1;">n</span> <span style="color: #ee7b29;">int</span>, <span style="color: #cbccd1;">f</span> <span style="color: #ea3d54;">func</span>(<span style="color: #ee7b29;">int</span>) <span style="color: #ee7b29;">bool</span>) <span style="color: #ee7b29;">int</span>
</pre>
</div>

<p>
Search 函数采用二分法搜索找到 [0, n) 区间内最小的满足 f(i)==true 的值 i。也就是说，Search 函数希望 f 在输入位于区间 [0, n) 的前面某部分（可以为空）时返回假，而在输入位于剩余至结尾的部分（可以为空）时返回真；Search函数会返回满足 f(i)==true 的最小值 i。如果没有该值，函数会返回 n。注意，未找到时的返回值不是-1，这一点和 strings.Index 等函数不同。Search 函数只会用区间 [0, n) 内的值调用 f。<br>
</p>

<p>
一般使用 Search 找到值 x 在插入一个有序的、可索引的数据结构时，应插入的位置。这种情况下，参数 f（通常是闭包）会捕捉应搜索的值和被查询的数据集。<br>
</p>

<p>
例如，给定一个递增顺序的切片，调用 Search(len(data), func(i int) bool { return data[i] &gt;= 23 }) 会返回 data 中最小的索引 i 满足 data[i] &gt;= 23。如果调用者想要知道 23 是否在切片里，它必须另外检查 data[i] == 23。<br>
</p>

<p>
搜索递减顺序的数据时，应使用 &lt;= 运算符代替 &gt;= 运算符。<br>
</p>

<p>
下列代码尝试在一个递增顺序的整数切片中找到值x：<br>
</p>

<div class="org-src-container">
<pre class="src src-go"><span style="color: #cbccd1;">x</span> := 23
<span style="color: #cbccd1;">i</span> := sort.<span style="color: #fedd38;">Search</span>(<span style="color: #fedd38;">len</span>(data), <span style="color: #ea3d54;">func</span>(<span style="color: #cbccd1;">i</span> <span style="color: #ee7b29;">int</span>) <span style="color: #ee7b29;">bool</span> { <span style="color: #ea3d54;">return</span> data[i] &gt;= x })
<span style="color: #ea3d54;">if</span> i &lt; <span style="color: #fedd38;">len</span>(data) &amp;&amp; data[i] == x {
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">x is present at data[i]</span>
} <span style="color: #ea3d54;">else</span> {
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">x is not present in data,</span>
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">but i is the index where it would be inserted.</span>
}
</pre>
</div>

<p>
一个更古怪的例子，下面的程序会猜测你持有的数字：<br>
</p>

<div class="org-src-container">
<pre class="src src-go"><span style="color: #ea3d54;">func</span> <span style="color: #fedd38;">GuessingGame</span>() {
    <span style="color: #ea3d54;">var</span> <span style="color: #cbccd1;">s</span> <span style="color: #ee7b29;">string</span>
    fmt.<span style="color: #fedd38;">Printf</span>(<span style="color: #4fb3d8;">"Pick an integer from 0 to 100.\n"</span>)
    <span style="color: #cbccd1;">answer</span> := sort.<span style="color: #fedd38;">Search</span>(100, <span style="color: #ea3d54;">func</span>(<span style="color: #cbccd1;">i</span> <span style="color: #ee7b29;">int</span>) <span style="color: #ee7b29;">bool</span> {
        fmt.<span style="color: #fedd38;">Printf</span>(<span style="color: #4fb3d8;">"Is your number &lt;= %d? "</span>, i)
        fmt.<span style="color: #fedd38;">Scanf</span>(<span style="color: #4fb3d8;">"%s"</span>, &amp;s)
        <span style="color: #ea3d54;">return</span> s != <span style="color: #4fb3d8;">""</span> &amp;&amp; s[0] == <span style="color: #4fb3d8;">'y'</span>
    })
    fmt.<span style="color: #fedd38;">Printf</span>(<span style="color: #4fb3d8;">"Your number is %d.\n"</span>, answer)
}
</pre>
</div>
</div>
</div>
<div id="outline-container-orgfcc5670" class="outline-2">
<h2 id="orgfcc5670">func Ints</h2>
<div class="outline-text-2" id="text-orgfcc5670">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #ea3d54;">func</span> <span style="color: #fedd38;">Ints</span>(<span style="color: #cbccd1;">a</span> []<span style="color: #ee7b29;">int</span>)
</pre>
</div>

<p>
Ints 函数将 a 排序为递增顺序。<br>
</p>

<div class="org-src-container">
<pre class="src src-go"><span style="color: #cbccd1;">s</span> := []<span style="color: #ee7b29;">int</span>{5, 2, 6, 3, 1, 4} <span style="color: #5B6268;">// </span><span style="color: #5B6268;">unsorted</span>
sort.<span style="color: #fedd38;">Ints</span>(s)
fmt.<span style="color: #fedd38;">Println</span>(s)
</pre>
</div>

<p>
Output:<br>
</p>

<pre class="example" id="org519ee1c">
[1 2 3 4 5 6]
</pre>
</div>
</div>

<div id="outline-container-org528ee47" class="outline-2">
<h2 id="org528ee47">func IntsAreSorted</h2>
<div class="outline-text-2" id="text-org528ee47">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #ea3d54;">func</span> <span style="color: #fedd38;">IntsAreSorted</span>(<span style="color: #cbccd1;">a</span> []<span style="color: #ee7b29;">int</span>) <span style="color: #ee7b29;">bool</span>
</pre>
</div>

<p>
IntsAreSorted检查a是否已排序为递增顺序。<br>
</p>
</div>
</div>
<div id="outline-container-orgc076e51" class="outline-2">
<h2 id="orgc076e51">func SearchInts</h2>
<div class="outline-text-2" id="text-orgc076e51">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #ea3d54;">func</span> <span style="color: #fedd38;">SearchInts</span>(<span style="color: #cbccd1;">a</span> []<span style="color: #ee7b29;">int</span>, <span style="color: #cbccd1;">x</span> <span style="color: #ee7b29;">int</span>) <span style="color: #ee7b29;">int</span>
</pre>
</div>

<p>
SearchInts在递增顺序的a中搜索x，返回x的索引。如果查找不到，返回值是x应该插入a的位置（以保证a的递增顺序），返回值可以是len(a)。<br>
</p>
</div>
</div>
<div id="outline-container-orgd977d0f" class="outline-2">
<h2 id="orgd977d0f">func Float64s</h2>
<div class="outline-text-2" id="text-orgd977d0f">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #ea3d54;">func</span> <span style="color: #fedd38;">Float64s</span>(<span style="color: #cbccd1;">a</span> []<span style="color: #ee7b29;">float64</span>)
</pre>
</div>

<p>
Float64s函数将a排序为递增顺序。<br>
</p>
</div>
</div>
<div id="outline-container-org5c3295d" class="outline-2">
<h2 id="org5c3295d">func Float64sAreSorted</h2>
<div class="outline-text-2" id="text-org5c3295d">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #ea3d54;">func</span> <span style="color: #fedd38;">Float64sAreSorted</span>(<span style="color: #cbccd1;">a</span> []<span style="color: #ee7b29;">float64</span>) <span style="color: #ee7b29;">bool</span>
</pre>
</div>

<p>
Float64sAreSorted检查a是否已排序为递增顺序。<br>
</p>
</div>
</div>
<div id="outline-container-orgab0a0f7" class="outline-2">
<h2 id="orgab0a0f7">func SearchFloat64s</h2>
<div class="outline-text-2" id="text-orgab0a0f7">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #ea3d54;">func</span> <span style="color: #fedd38;">SearchFloat64s</span>(<span style="color: #cbccd1;">a</span> []<span style="color: #ee7b29;">float64</span>, <span style="color: #cbccd1;">x</span> <span style="color: #ee7b29;">float64</span>) <span style="color: #ee7b29;">int</span>
</pre>
</div>

<p>
SearchFloat64s在递增顺序的a中搜索x，返回x的索引。如果查找不到，返回值是x应该插入a的位置（以保证a的递增顺序），返回值可以是len(a)。<br>
</p>
</div>
</div>
<div id="outline-container-org1408554" class="outline-2">
<h2 id="org1408554">func Strings</h2>
<div class="outline-text-2" id="text-org1408554">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #ea3d54;">func</span> <span style="color: #fedd38;">Strings</span>(<span style="color: #cbccd1;">a</span> []<span style="color: #ee7b29;">string</span>)
</pre>
</div>

<p>
Strings 函数将 a 排序为递增顺序。<br>
</p>
</div>
</div>
<div id="outline-container-org87f689d" class="outline-2">
<h2 id="org87f689d">func StringsAreSorted</h2>
<div class="outline-text-2" id="text-org87f689d">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #ea3d54;">func</span> <span style="color: #fedd38;">StringsAreSorted</span>(<span style="color: #cbccd1;">a</span> []<span style="color: #ee7b29;">string</span>) <span style="color: #ee7b29;">bool</span>
</pre>
</div>

<p>
StringsAreSorted检查a是否已排序为递增顺序。<br>
</p>
</div>
</div>
<div id="outline-container-org6dab2df" class="outline-2">
<h2 id="org6dab2df">func SearchStrings</h2>
<div class="outline-text-2" id="text-org6dab2df">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #ea3d54;">func</span> <span style="color: #fedd38;">SearchStrings</span>(<span style="color: #cbccd1;">a</span> []<span style="color: #ee7b29;">string</span>, <span style="color: #cbccd1;">x</span> <span style="color: #ee7b29;">string</span>) <span style="color: #ee7b29;">int</span>
</pre>
</div>

<p>
SearchStrings在递增顺序的a中搜索x，返回x的索引。如果查找不到，返回值是x应该插入a的位置（以保证a的递增顺序），返回值可以是len(a)。<br>
</p>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Date: 2022-02-02 15:02 Wed</p>
<p class="author">Author: L.M.haoran</p>
<p class="date">Created: 2022-10-12</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
