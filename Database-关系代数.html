<!DOCTYPE html>
<html lang="zh">
<head>
<!-- 2022-03-13 Sun 15:15 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>关系代数</title>
<meta name="generator" content="Org mode">
<meta name="author" content="L.M.haoran">
<meta name="description" content="Copyright © 2021, L.M.haoran, all rights reserved."
>

                <link rel="stylesheet" href="static/css/org.css" type="text/css"  />
                <script type="module" src="static/js/main.js" defer></script>
                <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "0em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script type="text/javascript"
        src="static/MathJax/cdn.bootcdn.net/ajax/libs/mathjax/3.1.2/es5/tex-mml-chtml.min.js"></script>
</head>
<body>
<div id="content">
<h1 class="title">关系代数</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgc6a2617">什么是关系代数</a></li>
<li><a href="#org4b11721">传统的集合运算</a>
<ul>
<li><a href="#org56d9689">并（union）</a></li>
<li><a href="#org96e00a3">差（except）</a></li>
<li><a href="#org3d16b28">交（intersection）</a></li>
<li><a href="#org980afb8">笛卡尔积（cartesian product）</a></li>
</ul>
</li>
<li><a href="#org9565f03">专门的关系运算</a>
<ul>
<li><a href="#orgc8d02cd">选择（selection）</a></li>
<li><a href="#org6a1ef4b">投影（projection）</a></li>
<li><a href="#org0d62bb7">连接（join）</a></li>
<li><a href="#org1fde028">除运算（division）</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-orgc6a2617" class="outline-2">
<h2 id="orgc6a2617">什么是关系代数</h2>
<div class="outline-text-2" id="text-orgc6a2617">
<p>
关系代数是一种抽象的查询语言，它用对关系的运算来表达查询。<br>
</p>

<p>
关系代数的运算对象是关系，运算结果也是关系。关系代数用到的运算符包括两类：集合运算符和专门的关系运算符。<br>
</p>

<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">

<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">集合运算符</th>
<th scope="col" class="org-left">含义</th>
<th scope="col" class="org-left">专门的关系运算符</th>
<th scope="col" class="org-left">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">\(cup\)</td>
<td class="org-left">并</td>
<td class="org-left">\(\sigma\)</td>
<td class="org-left">选择</td>
</tr>

<tr>
<td class="org-left">\(-\)</td>
<td class="org-left">差</td>
<td class="org-left">\(\prod\)</td>
<td class="org-left">投影</td>
</tr>

<tr>
<td class="org-left">\(cap\)</td>
<td class="org-left">交</td>
<td class="org-left">\(\Join\)</td>
<td class="org-left">连接</td>
</tr>

<tr>
<td class="org-left">\(\times\)</td>
<td class="org-left">笛卡尔积</td>
<td class="org-left">\(\div\)</td>
<td class="org-left">除</td>
</tr>
</tbody>
</table>

<p>
关系代数的运算符按运算符的不同可分为传统的集合运算和专门的关系运算两类。其中，传统的集合运算将关系看成元组的集合，其运算是从关系的“水平”方向，即行的角度来进行；而专门的关系运算不仅涉及行，而且涉及列。<br>
</p>
</div>
</div>
<div id="outline-container-org4b11721" class="outline-2">
<h2 id="org4b11721">传统的集合运算</h2>
<div class="outline-text-2" id="text-org4b11721">
<p>
传统的集合运算是二目运算，包括并、差、交、笛卡尔积四种运算。<br>
</p>

<p>
设关系 \(R\) 和关系 \(S\) 具有相同的目 \(n\)（即两个关系都有 \(n\) 个属性），且相应的属性取自同一个域（域是一组具有相同数据类型的值的集合），\(t\) 是元组变量， \(t \in R\) 表示 \(t\) 是 \(R\) 的一个元组。<br>
</p>

<img src="./images/关系代数01.png" />
</div>
<div id="outline-container-org56d9689" class="outline-3">
<h3 id="org56d9689">并（union）</h3>
<div class="outline-text-3" id="text-org56d9689">
<dl class="org-dl">
<dt>关系 \(R\) 与关系 \(S\) 的并记作</dt><dd>\(R \cup S = \{t \mid t \in R \lor t \in S\}\)<br></dd>
</dl>

<p>
其结果仍为 \(n\) 目关系，由属于 \(R\) 或属于 \(S\) 的元组组成。<br>
</p>

<div style="margin-bottom: -0.145rem;">
<p>
\(R \cup S:\) <br>
</p>
</div>

<div style="display: block; width: auto; height: auto; margin-left: 50px;">
<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">A</th>
<th scope="col" class="org-left">B</th>
<th scope="col" class="org-left">C</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">\(a_1\)</td>
<td class="org-left">\(b_1\)</td>
<td class="org-left">\(c_1\)</td>
</tr>

<tr>
<td class="org-left">\(a_1\)</td>
<td class="org-left">\(b_2\)</td>
<td class="org-left">\(c_2\)</td>
</tr>

<tr>
<td class="org-left">\(a_2\)</td>
<td class="org-left">\(b_2\)</td>
<td class="org-left">\(c_2\)</td>
</tr>

<tr>
<td class="org-left">\(a_1\)</td>
<td class="org-left">\(b_3\)</td>
<td class="org-left">\(c_2\)</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="outline-container-org96e00a3" class="outline-3">
<h3 id="org96e00a3">差（except）</h3>
<div class="outline-text-3" id="text-org96e00a3">
<dl class="org-dl">
<dt>关系 \(R\) 与关系 \(S\) 的差记作</dt><dd>\(R - S = \{t \mid t \in R \land t \notin S\}\)<br></dd>
</dl>

<p>
其结果关系仍为 \(n\) 目关系，由属于 \(R\) 而不属于 \(S\) 的所有元组组成。<br>
</p>

<div style="margin-bottom: -0.145rem;">
<p>
\(R - S:\) <br>
</p>
</div>

<div style="display: block; width: auto; height: auto; margin-left: 50px;">
<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">A</th>
<th scope="col" class="org-left">B</th>
<th scope="col" class="org-left">C</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">\(a_1\)</td>
<td class="org-left">\(b_1\)</td>
<td class="org-left">\(c_1\)</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="outline-container-org3d16b28" class="outline-3">
<h3 id="org3d16b28">交（intersection）</h3>
<div class="outline-text-3" id="text-org3d16b28">
<dl class="org-dl">
<dt>关系 \(R\) 与关系 \(S\) 的交记作</dt><dd>\(R \cap S = \{t \mid t \in R \land t \in S\}\)<br></dd>
</dl>

<p>
其结果仍为 \(n\) 目关系，由既属于 \(R\) 又属于 \(S\) 的元组组成。<br>
</p>

<div style="margin-bottom: -0.145rem;">
<p>
\(R - S:\) <br>
</p>
</div>

<div style="display: block; width: auto; height: auto; margin-left: 50px;">
<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">A</th>
<th scope="col" class="org-left">B</th>
<th scope="col" class="org-left">C</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">\(a_1\)</td>
<td class="org-left">\(b_2\)</td>
<td class="org-left">\(c_2\)</td>
</tr>

<tr>
<td class="org-left">\(a_2\)</td>
<td class="org-left">\(b_2\)</td>
<td class="org-left">\(c_1\)</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="outline-container-org980afb8" class="outline-3">
<h3 id="org980afb8">笛卡尔积（cartesian product）</h3>
<div class="outline-text-3" id="text-org980afb8">
<p>
这里的笛卡尔积严格讲是广义笛卡尔积，因为这里的笛卡尔积的元素是元组，两个分别为 \(n\) 目和 \(m\) 目的关系 \(R\) 和 \(S\) 的笛卡尔积是一个 \(n + m\) 列的元组的集合。元组的前 \(n\) 列是关系 \(R\) 的一个元组，后 \(m\) 列是关系 \(S\) 的一个元组。若 \(R\) 有 \(k_1\) 个元组，\(S\) 有 \(k_2\) 个元组，则关系 \(R\) 和关系 \(S\) 的笛卡尔积有 \(k_1 \times k_2\) 个元组。记作：<br>
</p>

<p>
\(R \times S = \{\frown{t_r t_s} \mid t_r \in R \land t_s \in S\}\)<br>
</p>

<div style="margin-bottom: -0.145rem;">
<p>
\(R \times S:\) <br>
</p>
</div>

<div style="display: block; width: auto; height: auto; margin-left: 50px;">
<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">

<col  class="org-left">

<col  class="org-left">

<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">R.A</th>
<th scope="col" class="org-left">R.B</th>
<th scope="col" class="org-left">R.C</th>
<th scope="col" class="org-left">S.A</th>
<th scope="col" class="org-left">S.B</th>
<th scope="col" class="org-left">S.C</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">\(a_1\)</td>
<td class="org-left">\(b_1\)</td>
<td class="org-left">\(c_1\)</td>
<td class="org-left">\(a_1\)</td>
<td class="org-left">\(b_2\)</td>
<td class="org-left">\(c_2\)</td>
</tr>

<tr>
<td class="org-left">\(a_1\)</td>
<td class="org-left">\(b_1\)</td>
<td class="org-left">\(c_1\)</td>
<td class="org-left">\(a_1\)</td>
<td class="org-left">\(b_3\)</td>
<td class="org-left">\(c_2\)</td>
</tr>

<tr>
<td class="org-left">\(a_1\)</td>
<td class="org-left">\(b_1\)</td>
<td class="org-left">\(c_1\)</td>
<td class="org-left">\(a_2\)</td>
<td class="org-left">\(b_2\)</td>
<td class="org-left">\(c_1\)</td>
</tr>

<tr>
<td class="org-left">\(a_1\)</td>
<td class="org-left">\(b_2\)</td>
<td class="org-left">\(c_2\)</td>
<td class="org-left">\(a_1\)</td>
<td class="org-left">\(b_2\)</td>
<td class="org-left">\(c_2\)</td>
</tr>

<tr>
<td class="org-left">\(a_1\)</td>
<td class="org-left">\(b_2\)</td>
<td class="org-left">\(c_2\)</td>
<td class="org-left">\(a_1\)</td>
<td class="org-left">\(b_3\)</td>
<td class="org-left">\(c_2\)</td>
</tr>

<tr>
<td class="org-left">\(a_1\)</td>
<td class="org-left">\(b_2\)</td>
<td class="org-left">\(c_2\)</td>
<td class="org-left">\(a_2\)</td>
<td class="org-left">\(b_2\)</td>
<td class="org-left">\(c_1\)</td>
</tr>

<tr>
<td class="org-left">\(a_2\)</td>
<td class="org-left">\(b_2\)</td>
<td class="org-left">\(c_1\)</td>
<td class="org-left">\(a_1\)</td>
<td class="org-left">\(b_2\)</td>
<td class="org-left">\(c_2\)</td>
</tr>

<tr>
<td class="org-left">\(a_2\)</td>
<td class="org-left">\(b_2\)</td>
<td class="org-left">\(c_1\)</td>
<td class="org-left">\(a_1\)</td>
<td class="org-left">\(b_3\)</td>
<td class="org-left">\(c_2\)</td>
</tr>

<tr>
<td class="org-left">\(a_2\)</td>
<td class="org-left">\(b_2\)</td>
<td class="org-left">\(c_1\)</td>
<td class="org-left">\(a_2\)</td>
<td class="org-left">\(b_2\)</td>
<td class="org-left">\(c_1\)</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div id="outline-container-org9565f03" class="outline-2">
<h2 id="org9565f03">专门的关系运算</h2>
<div class="outline-text-2" id="text-org9565f03">
<p>
专门的关系运算包括选择、投影、连接、除运算等。为了叙述上的方便，先引入几个记号。<br>
</p>

<p>
（1）这关系模式为 \(R(A_1, A_2, \dots, A_n)\)，它的一个关系设为 \(R\)。\(t \in R\) 表示 \(t\) 是 \(R\) 的一个元组。\(t[A_i]\) 则表示元组 \(t\) 中相应于属性 \(A_i\) 的一个分量。<br>
</p>

<p>
（2）若 \(A = \{A_{i1}, A_{i2}, \dots, A_{ik}\}\)，其中 \(A_{i1}, A_{i2}, \dots, A_{ik}\) 是 \(A_1, A_2, \dots, A_n\) 中的一部分，则 \(A\) 称为属性列或属性组。\(t[A] = (t[A_{i1}], t[A_{i2}], \dots, t[A_{ik}])\) 表示元组 \(t\) 在属性列 \(A\) 上诸分量的集合，\(A\) 则表示 \(\{A_1, A_2, \dots, A_n\}\) 中去掉 \(\{A_{i1}, A_{i2}, \dots, A_{ik}\}\) 后剩余的属性组。<br>
</p>

<p>
（3）\(R\) 为 \(n\) 目关系，\(S\) 为 \(m\) 目关系。\(t_r \in R, t_s \in S\)，\(\frown{t_r t_s}\) 称为元组的连接或元组的串接。它是一个 \(n + m\) 列的元组，前 \(n\) 个分量为 \(R\) 中的一个 \(n\) 元组，后 \(m\) 个分量为 \(S\) 中的一个 \(m\) 元组。<br>
</p>

<p>
（4）给定一个关系 \(R(X, Z)\)，\(X\) 和 \(Z\) 为属性组。当 \(t[X] = x\) 时， \(x\) 在 \(R\) 中的象集（images set）定义为 \(Z_x = \{t[Z] \mid t \in R, t[X] = x\}\)。它表示 \(R\) 中属性组 \(X\) 上值为 \(x\) 的诸元组在 \(Z\) 上分量的集合。例如：在下图中<br>
</p>

<div style="display: block; width: auto; height: auto; margin-left: 50px;">
<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">
</colgroup>
<tbody>
<tr>
<td class="org-left">\(x_1\)</td>
<td class="org-left">\(Z_1\)</td>
</tr>

<tr>
<td class="org-left">\(x_1\)</td>
<td class="org-left">\(Z_2\)</td>
</tr>

<tr>
<td class="org-left">\(x_1\)</td>
<td class="org-left">\(Z_3\)</td>
</tr>

<tr>
<td class="org-left">\(x_2\)</td>
<td class="org-left">\(Z_2\)</td>
</tr>

<tr>
<td class="org-left">\(x_2\)</td>
<td class="org-left">\(Z_3\)</td>
</tr>

<tr>
<td class="org-left">\(x_3\)</td>
<td class="org-left">\(Z_1\)</td>
</tr>

<tr>
<td class="org-left">\(x_3\)</td>
<td class="org-left">\(Z_3\)</td>
</tr>
</tbody>
</table>
</div>

<ul class="org-ul">
<li>\(x_1\) 在 \(R\) 中的象集 \(Z_{x1} = \{Z_1, Z_2, Z_3\}\)<br></li>
<li>\(x_2\) 在 \(R\) 中的象集 \(Z_{x2} = \{Z_2, Z_3\}\)<br></li>
<li>\(x_3\) 在 \(R\) 中的象集 \(Z_{x3} = \{Z_1, Z_3\}\)<br></li>
</ul>
</div>
<div id="outline-container-orgc8d02cd" class="outline-3">
<h3 id="orgc8d02cd">选择（selection）</h3>
<div class="outline-text-3" id="text-orgc8d02cd">
<dl class="org-dl">
<dt>选择又称为限制（restriction）。它是在关系 \(R\) 中选择满足给定条件的诸元组，记作</dt><dd>\(\sigma_{F}(R) = \{t \mid t \in R \land F(t) = '真'\}\)<br></dd>
</dl>

<p>
其中 \(F\) 表示选择条件，它是一个逻辑表达式，取逻辑值“真”或“假逻辑表达式 \(F\) 的基本形式为 \(X_1 \theta Y_1\)，其中 \(\theta\) 表示比较运算符，它可以是 \(>, \geq, <, \leq, =\) 或 \(<>\)。\(X_1, Y_1\) 等是属性名，或为常量，或为简单函数；属性名也可以用它的序号来代替。在基本的选择条件上可以进一步进行逻辑运算，即进行求非（\(\neg\)）、与（\(\lor\)）、或（\(\land\)）运算。<br>
</p>

<div style="display: block; width: auto; height: auto; margin-left: 50px;">
<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">

<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">比较运算符</th>
<th scope="col" class="org-left">含义</th>
<th scope="col" class="org-left">逻辑运算符</th>
<th scope="col" class="org-left">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">\(>\)</td>
<td class="org-left">大于</td>
<td class="org-left">\(\neg\)</td>
<td class="org-left">非</td>
</tr>

<tr>
<td class="org-left">\(\geq\)</td>
<td class="org-left">大于等于</td>
<td class="org-left">\(\land\)</td>
<td class="org-left">与</td>
</tr>

<tr>
<td class="org-left">\(<\)</td>
<td class="org-left">小于</td>
<td class="org-left">\(\lor\)</td>
<td class="org-left">或</td>
</tr>

<tr>
<td class="org-left">\(\leq\)</td>
<td class="org-left">小于等于</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">\(==\)</td>
<td class="org-left">等于</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">\(<>\)</td>
<td class="org-left">不等于</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>

<p>
选择运算实际上是从关系 \(R\) 中选取使逻辑表达式 \(F\) 为真的元组，这是从行的角度进行的运算。<br>
</p>

<p>
设有一个学生-课程数据库，包括学生关系 \(Student\)、课程关系 \(Course\) 和选修关系 \(SC\)。<br>
</p>

<div style="margin-bottom: -0.145rem;">
<p>
\(Student:\)<br>
</p>
</div>

<div style="display: block; width: auto; height: auto; margin-left: 50px;">
<table>


<colgroup>
<col  class="org-right">

<col  class="org-left">

<col  class="org-left">

<col  class="org-right">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-right">学号（\(Sno\)）</th>
<th scope="col" class="org-left">姓名（\(Sname\)）</th>
<th scope="col" class="org-left">性别（\(Ssex\)）</th>
<th scope="col" class="org-right">年龄（\(Sage\)）</th>
<th scope="col" class="org-left">所在系（\(Sdept\)）</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-right">201215121</td>
<td class="org-left">李勇</td>
<td class="org-left">男</td>
<td class="org-right">20</td>
<td class="org-left">CS</td>
</tr>

<tr>
<td class="org-right">201215122</td>
<td class="org-left">刘晨</td>
<td class="org-left">女</td>
<td class="org-right">19</td>
<td class="org-left">CS</td>
</tr>

<tr>
<td class="org-right">201215123</td>
<td class="org-left">王敏</td>
<td class="org-left">女</td>
<td class="org-right">18</td>
<td class="org-left">MA</td>
</tr>

<tr>
<td class="org-right">201215125</td>
<td class="org-left">张立</td>
<td class="org-left">男</td>
<td class="org-right">19</td>
<td class="org-left">IS</td>
</tr>
</tbody>
</table>
</div>

<div style="margin-bottom: -0.145rem;">
<p>
\(Course:\)<br>
</p>
</div>

<div style="display: block; width: auto; height: auto; margin-left: 50px;">
<table>


<colgroup>
<col  class="org-right">

<col  class="org-left">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-right">课程号（\(Cno\)）</th>
<th scope="col" class="org-left">课程名（\(Cname\)）</th>
<th scope="col" class="org-right">先行课（\(Cpno\)）</th>
<th scope="col" class="org-right">学分（\(Ccredit\)）</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-right">1</td>
<td class="org-left">数据库</td>
<td class="org-right">5</td>
<td class="org-right">4</td>
</tr>

<tr>
<td class="org-right">2</td>
<td class="org-left">数学</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">2</td>
</tr>

<tr>
<td class="org-right">3</td>
<td class="org-left">信息系统</td>
<td class="org-right">1</td>
<td class="org-right">4</td>
</tr>

<tr>
<td class="org-right">4</td>
<td class="org-left">操作系统</td>
<td class="org-right">6</td>
<td class="org-right">3</td>
</tr>

<tr>
<td class="org-right">5</td>
<td class="org-left">数据结构</td>
<td class="org-right">7</td>
<td class="org-right">4</td>
</tr>

<tr>
<td class="org-right">6</td>
<td class="org-left">数据处理</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">2</td>
</tr>

<tr>
<td class="org-right">7</td>
<td class="org-left">PASCAL语言</td>
<td class="org-right">6</td>
<td class="org-right">4</td>
</tr>
</tbody>
</table>
</div>

<div style="margin-bottom: -0.145rem;">
<p>
\(SC:\)<br>
</p>
</div>

<div style="display: block; width: auto; height: auto; margin-left: 50px;">
<table>


<colgroup>
<col  class="org-right">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-right">学号（\(Sno\)）</th>
<th scope="col" class="org-right">课程号（\(Cno\)）</th>
<th scope="col" class="org-right">成绩（\(Grade\)）</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-right">201215121</td>
<td class="org-right">1</td>
<td class="org-right">92</td>
</tr>

<tr>
<td class="org-right">201215121</td>
<td class="org-right">2</td>
<td class="org-right">85</td>
</tr>

<tr>
<td class="org-right">201215121</td>
<td class="org-right">3</td>
<td class="org-right">88</td>
</tr>

<tr>
<td class="org-right">201215122</td>
<td class="org-right">2</td>
<td class="org-right">90</td>
</tr>

<tr>
<td class="org-right">201215122</td>
<td class="org-right">3</td>
<td class="org-right">80</td>
</tr>
</tbody>
</table>
</div>

<p>
例1：查询信息系（IS系）全体学生。<br>
</p>

<div style="margin-bottom: -0.145rem;">
<p>
\(\sigma_{Sdept='IS'}(Student)\)<br>
</p>
</div>

<div style="display: block; width: auto; height: auto; margin-left: 50px;">
<table>


<colgroup>
<col  class="org-right">

<col  class="org-left">

<col  class="org-left">

<col  class="org-right">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-right">Sno</th>
<th scope="col" class="org-left">Sname</th>
<th scope="col" class="org-left">Ssex</th>
<th scope="col" class="org-right">Sage</th>
<th scope="col" class="org-left">Sdept</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-right">201215125</td>
<td class="org-left">张立</td>
<td class="org-left">男</td>
<td class="org-right">19</td>
<td class="org-left">IS</td>
</tr>
</tbody>
</table>
</div>

<p>
例2：查询年龄小于20岁的学生。<br>
</p>

<div style="margin-bottom: -0.145rem;">
<p>
\(\sigma_{Sage < 20}(Student)\)<br>
</p>
</div>

<div style="display: block; width: auto; height: auto; margin-left: 50px;">
<table>


<colgroup>
<col  class="org-right">

<col  class="org-left">

<col  class="org-left">

<col  class="org-right">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-right">Sno</th>
<th scope="col" class="org-left">Sname</th>
<th scope="col" class="org-left">Ssex</th>
<th scope="col" class="org-right">Sage</th>
<th scope="col" class="org-left">Sdept</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-right">201215122</td>
<td class="org-left">刘晨</td>
<td class="org-left">女</td>
<td class="org-right">19</td>
<td class="org-left">CS</td>
</tr>

<tr>
<td class="org-right">201215123</td>
<td class="org-left">王敏</td>
<td class="org-left">女</td>
<td class="org-right">18</td>
<td class="org-left">MA</td>
</tr>

<tr>
<td class="org-right">201215125</td>
<td class="org-left">张立</td>
<td class="org-left">男</td>
<td class="org-right">19</td>
<td class="org-left">IS</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="outline-container-org6a1ef4b" class="outline-3">
<h3 id="org6a1ef4b">投影（projection）</h3>
<div class="outline-text-3" id="text-org6a1ef4b">
<dl class="org-dl">
<dt>关系 \(R\) 上的投影是从 \(R\) 中选择出若干属性列组成新的关系，记作</dt><dd>\(\prod_A(R) = \{t[A] \mid t \in R\}\)<br></dd>
</dl>

<p>
其中 \(A\) 为 \(R\) 中的属性列，投影操作是从列的角度进行的运算。<br>
</p>

<p>
例3：查询学生的姓名和所在系，即求 \(Student\) 关系上学生姓名和所在系两个属性的投影。<br>
</p>

<div style="margin-bottom: -0.145rem;">
<p>
\(\prod_{Sname, Sdept}(Student)\)<br>
</p>
</div>

<div style="display: block; width: auto; height: auto; margin-left: 50px;">
<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Sanme</th>
<th scope="col" class="org-left">Sdept</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">李勇</td>
<td class="org-left">CS</td>
</tr>

<tr>
<td class="org-left">刘晨</td>
<td class="org-left">CS</td>
</tr>

<tr>
<td class="org-left">王敏</td>
<td class="org-left">MA</td>
</tr>

<tr>
<td class="org-left">张立</td>
<td class="org-left">IS</td>
</tr>
</tbody>
</table>
</div>

<p>
投影之后不仅取消了原关系中的某些列，而且还可能取消某些元组，因为取消某些属性列后，就可能出现重复行，应取消这些完全相同的行。<br>
</p>

<p>
例4：查询学生关系 \(Student\) 中都有哪些系，即查询关系 \(Student\) 上所在系属性上的投影。<br>
</p>

<div style="margin-bottom: -0.145rem;">
<p>
\(\prod_{Sdept}(Student)\)<br>
</p>
</div>

<div style="display: block; width: auto; height: auto; margin-left: 50px;">
<table>


<colgroup>
<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Sdept</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">CS</td>
</tr>

<tr>
<td class="org-left">MA</td>
</tr>

<tr>
<td class="org-left">IS</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="outline-container-org0d62bb7" class="outline-3">
<h3 id="org0d62bb7">连接（join）</h3>
<div class="outline-text-3" id="text-org0d62bb7">
<dl class="org-dl">
<dt>连接也称为 \(\theta\) 连接，它是从两个关系的笛卡尔积中选取属性间满足一定条件的元组，记作</dt><dd>\(R \mathop{\Join}\limits_{A \theta B} S = \{\frown{t_r t_s} \mid t_r \in R \land t_s \in S \land t_r[A] \ \theta\  t_s[B]\}\)<br></dd>
</dl>

<p>
其中，\(A\) 和 \(B\) 分别为 \(R\) 和 \(S\) 上列数相等且可比的属性组，\(\theta\) 是比较运算符。连接运算从 \(R\) 和 \(S\) 的笛卡尔积 \(R \times S\) 中选取 \(R\) 关系在 \(A\) 属性组上的值与 \(S\) 关系在 \(B\) 属性组上的值满足比较关系 \(\theta\) 的元组。<br>
</p>

<p>
连接运算中有两种最为重要也最为常用的连接，一种是等值连接（equijoin），另一种是自然连接（natural join）。<br>
</p>

<p>
\(\theta\) 为 "=" 的连接运算称为等值连接，它是从关系 \(R\) 与 \(S\) 的广义笛卡尔积中选取 \(A\)、\(B\) 属性值相等的那些元组，即等值连接为：\(R \mathop{\Join}\limits_{A = B} S = \{\frown{t_r t_s} \mid t_r \in R \land t_s \in S \land t_r[A] = t_s[B]\}\)<br>
</p>

<p>
自然连接是一种特殊的等值连接，它要求两个关系中进行比较的分量必须是同名的属性组，并且在结果中把重复的属性列去掉。即若 \(R\) 和 \(S\) 中具有相同的属性组 \(B\)，\(U\) 为 \(R\) 和 \(S\) 的全体属性集合，则自然连接记作：\(R \Join S = \{\frown{t_r t_s}[U - B] \mid t_r \in R \land t_s \in S \land t_r[B] = t_s[B]\}\)<br>
</p>

<p>
一般的连接操作是从行的角度进行运算，但自然连接还需要取消重复列，所以同时从行和列的角度进行运算。<br>
</p>

<img src="./images/关系代数02.png" style="display: block;"/>

<img src="./images/关系代数03.png" style="display: block; margin-top: 25px;"/>

<p>
两个关系 \(R\) 和 \(S\) 在做自然连接时，选择两个关系在公共属性上值相等的元组构成新的关系。此时，关系 \(R\) 中某些元组有可能在 \(S\) 中不存在公共属性上值相等的元组，从而造成 \(R\) 中这些元组在操作时被舍弃了，同样，\(S\) 中某些元组也可能被舍弃。这些被舍弃的元组称为悬浮元组（dangling tuple）。在上图中的自然连接中，\(R\) 中的第 4 个元组，\(S\) 中的第 5 个元组都是被舍弃掉的悬浮元组。<br>
</p>

<dl class="org-dl">
<dt>如果把悬浮元组也保存在结果关系中，而在其他属性上填空值（NULL），那么这种连接就叫做外连接（outer join），记作</dt><dd>\(R ⟗  S\)<br></dd>
<dt>如果只保留左边关系 \(R\) 中的悬浮元组就叫做左外连接（left outer join 或 left join），记作</dt><dd>\(R ⟕ S\) <br></dd>
<dt>如果只保留右边关系 \(S\) 中的悬浮元组就叫做右外连接（right outer join 或 right join），记作</dt><dd>\(R ⟖ S\) <br></dd>
</dl>

<img src="./images/关系代数04.png" style="display: block; margin-top: 25px;"/>
</div>
</div>
<div id="outline-container-org1fde028" class="outline-3">
<h3 id="org1fde028">除运算（division）</h3>
<div class="outline-text-3" id="text-org1fde028">
<p>
设关系 \(R\) 除以关系 \(S\) 的结果为关系 \(T\)，则 \(T\) 包含所有在 \(R\) 但不在 \(S\) 中的属性及其值，且 \(T\) 的元组与 \(S\) 的元组的所有组合都在 \(R\) 中。<br>
</p>

<p>
下面用象集来定义除法：<br>
</p>

<p>
给定关系 \(R(X, Y)\) 和 \(S(Y, Z)\)，其中 \(X、Y、Z\) 为属性组。\(R\) 中的 \(Y\) 与 \(S\) 中的 \(Y\) 可以有不同的属性名，但必须出自相同的域集。<br>
</p>

<dl class="org-dl">
<dt>\(R\) 与 \(S\) 的除运算得到一个新的关系 \(P(X)\)，\(P\) 是 \(R\) 中满足下列条件的元组在 \(X\) 属性列上的投影：元组在 \(X\) 上分量值 \(x\) 的象集 \(Y_x\) 包含 \(S\) 在 \(Y\) 上投影的集合，记作</dt><dd>\(R \div S = \{t_r[X] \mid t_r \in R \land \prod_Y(S)\subseteq Y_x\}\)<br></dd>
</dl>

<p>
其中 \(Y_x\) 为 \(x\) 在 \(R\) 中的象集， \(x = t_r[X]\)。<br>
</p>

<p>
例5：下面是关系 \(R、S、R \div S\)，在关系 \(R\) 中，\(A\) 可以取 4 个值 \(\{a_1, a_2, a_3, a_4\}\)。其中：<br>
</p>

<ul class="org-ul">
<li>\(a_1\) 的象集为 \(\{(b_1, c_2), (b_2, c_3), (b_2, c_1)\}\)<br></li>
<li>\(a_2\) 的象集为 \(\{(b_3, c_7), (b_2, c_3)\}\)<br></li>
<li>\(a_3\) 的象集为 \(\{(b_4, c_6)\}\)<br></li>
<li>\(a_4\) 的象集为 \(\{(b_6, c_6)\}\)<br></li>
</ul>

<p>
\(S\) 在 \((B, C)\) 上的投影为 \(\{(b_1, c_2), (b_2, c_1), (b_2, c_3)\}\)。<br>
</p>

<p>
显然只有 \(a_1\) 的象集 \((B, C)_{a_1}\) 包含了 \(S\) 在 \((B, C)\) 属性组上的投影，所以 \(R \div S = \{a_1\}\)<br>
</p>

<img src="./images/关系代数05.png" style="display: block; margin-top: 25px;"/>

<p>
例6：查询至少选修 1 号课程和 3 号课程的学生号码。首先建立一个临时关系 K：<br>
</p>

<div style="margin-bottom: -0.145rem;">
<p>
\(K:\)<br>
</p>
</div>

<div style="display: block; width: auto; height: auto; margin-left: 50px;">
<table>


<colgroup>
<col  class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-right">Cno</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-right">1</td>
</tr>

<tr>
<td class="org-right">3</td>
</tr>
</tbody>
</table>
</div>

<p>
然后求 \(\prod_{Sno, Cno}(SC) \div K\)，结果为 \(\{201215121\}\)。<br>
</p>

<p>
求解过程与例5类似，先对 \(SC\) 关系在 \((Sno, Cno)\) 属性上投影，然后逐一求出每一学生（\(sno\)）的象集，并依次检查这些象集是否包含 \(K\)。<br>
</p>

<p>
例7：查询选修了2号课程的学生的学号：\(\prod_{Sno}(\theta_{Cno='2'}(SC)) = \{201215121, 201215122\}\)<br>
</p>

<p>
例8：查询至少选修了一门其直接先行课为 5 号课程的学生姓名：\(\prod_{Sname}(\theta_{Cpno='5'} \Join SC \Join \prod_{Sno, Sname}(Student))\) 或 \(\prod_{Sname}(\prod_{Sno}(\theta_{Cpno='5'}(Course) \Join SC) \Join \prod_{Sno, Sname}(Student))\)<br>
</p>

<p>
例9：查询选修了全部课程的学生号码和姓名：\(\prod_{Sno, Cno}(SC) \div \prod_{Cno}(Course) \Join \prod_{Sno, Sname}(Student)\)<br>
</p>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Date: 2021-11-20 14:11 Sat</p>
<p class="author">Author: L.M.haoran</p>
<p class="date">Created: 2022-03-13 Sun 15:15</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
