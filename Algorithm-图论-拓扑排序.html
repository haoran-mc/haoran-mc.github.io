<!DOCTYPE html>
<html lang="zh">
<head>
<!-- 2021-10-21 Thu 19:54 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>拓扑排序</title>
<meta name="generator" content="Org mode">
<meta name="author" content="L.M.haoran">
<meta name="description" content="Copyright © 2021, L.M.haoran, all rights reserved."
>

                <link rel="stylesheet" href="static/css/org.css" type="text/css"  />
                <script type="module" src="static/js/main.js" defer></script>
                <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "0em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body>
<div id="content">
<h1 class="title">拓扑排序</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgcbf6fb5">什么是拓扑排序</a></li>
<li><a href="#org25fb677">引入拓扑排序</a></li>
<li><a href="#org5bb3900">入度与出度</a></li>
<li><a href="#orgb997680">只有有向无环图才有拓扑排序！</a></li>
<li><a href="#org8c34585">拓扑排序的过程</a></li>
<li><a href="#org67c0083">判断是否为有向无环图</a></li>
</ul>
</div>
</div>

<div id="outline-container-orgcbf6fb5" class="outline-2">
<h2 id="orgcbf6fb5">什么是拓扑排序</h2>
<div class="outline-text-2" id="text-orgcbf6fb5">
<p>
<b>拓扑排序</b> 是将有向无环图 \(g\) 的所有顶点排成一个线性序列，使得图 \(g\) 中的任意两个顶点 \(ver1, ver2\) 如果存在 \(ver1 -> ver2\)，那么在序列中 \(ver1\) 一定在 \(ver2\) 的前面，这个序列又被称为 *拓扑序列*。<br>
</p>
</div>
</div>
<div id="outline-container-org25fb677" class="outline-2">
<h2 id="org25fb677">引入拓扑排序</h2>
<div class="outline-text-2" id="text-org25fb677">
<p>
用学习课程的先后为例，只有在学习了"\(JAVA\)"之后才能学习"\(Spring Boot\)"，只有学习了一门编程语言" \(C/C++\) 程序设计"以及"高等数学"之后才能学习"离散数学"，只有学习了"计算机网络"，才能学习"网络安全"。<br>
</p>

<p>
如果现在有一个同学需要学习上述所有课程，那他就要给课程学习的先后排个序，每个课程的前导课程学会之后才能学习这个课程。<br>
</p>

<p>
拓扑排序就是这样一个根据结点的先后信息，将所有结点排序，得到的这样一个序列中，每个结点的前导结点一定在这个结点之前。<br>
</p>
</div>
</div>
<div id="outline-container-org5bb3900" class="outline-2">
<h2 id="org5bb3900">入度与出度</h2>
<div class="outline-text-2" id="text-org5bb3900">
<p>
入度是指图中一所有指向一个结点的边的个数和；出度是指图中一个结点指向其它结点的边的个数和。<br>
</p>

<img src="./images/有向无环图.jpeg" />

<p>
例如上图中<br>
</p>
<ul class="org-ul">
<li>结点 \(1\) 只有一条出边指向结点 \(2\)，所以结点 \(1\) 的出度为 \(1\)；结点 \(1\) 只有一条入边由结点 \(6\) 指向结点 \(1\)，所以结点 \(1\) 的入度为 \(1\)；<br></li>
<li>结点 \(6\) 有两条出边分别指向结点 \(1\)、结点 \(5\)，所以结点 \(6\) 的出度为 \(2\)；结点 \(6\) 有两条入边分别由结点 \(3\)、结点 \(4\) 指向，所以结点 \(6\) 的入度为 \(2\)。<br></li>
<li>\(\dots\)<br></li>
</ul>
</div>
</div>
<div id="outline-container-orgb997680" class="outline-2">
<h2 id="orgb997680">只有有向无环图才有拓扑排序！</h2>
<div class="outline-text-2" id="text-orgb997680">
<blockquote>
<p>
有向无环图(Directed Acyclic Graph, DAG)<br>
</p>
</blockquote>

<p>
继续看上面的那个例子，易知这个同学要上的第一门课一定是一个没有前导课程的课，同理，拓扑排序中的第一个结点一定是一个没有入度的结点。<br>
</p>

<p>
<b>一个有向无环图一定存在至少一个没有入度的结点。</b><br>
</p>

<blockquote>
<p>
证明：<br>
假设一个有向无环图中不存在一个没有入度的结点，也就是每个结点都有一个结点指向它。<br>
从这个图中的其中一个结点开始，由于每个结点都有一条入边，顺着这个入边找到上一个结点，同样的，上一个结点也有至少一条入边，继续寻找上一个结点。这样的操作可以进行无穷次，在进行到第 \(n\) 次时，根据鸽巢原理，我们遍历过 \(n + 1\) 个结点，这些结点中至少有一个结点被重复了两次，也就是说出现了环，这与这是一个有向无环图矛盾，所以一个有向无环图一定存在一个没有入度的结点。<br>
</p>
</blockquote>
</div>
</div>
<div id="outline-container-org8c34585" class="outline-2">
<h2 id="org8c34585">拓扑排序的过程</h2>
<div class="outline-text-2" id="text-org8c34585">
<p>
拓扑排序的操作：<br>
</p>
<ol class="org-ol">
<li>初始化所有边入度。<br></li>
<li>在图中寻找第一个入度为 \(0\) 的点，它就是拓扑序列的第一个元素，并把它的所有出边从图中删除。<br></li>
<li>删除了一个边后，就要把这个边所指向的结点的入度减一。<br></li>
<li>删除了一个点与它的所有出边，这个图还是一个有向无环图，所以也一定存在一个入度为 \(0\) 的点。<br></li>
<li>继续第一步的操作，不过这个结点是拓扑序列的第二个元素。<br></li>
<li>重复操作直到所有的结点都从这个图中删除，就得到了这个有向无环图的一个拓扑序列。<br></li>

<li>容易发现，这样的拓扑序列很可能不是唯一的，有时题目会要求输出其中一个拓扑排序就好，有时会要求输出一个字典序最小的一个拓扑排序。<br></li>
<li>普遍的，我们使用队列存储拓扑排序中删除的元素。<br></li>
</ol>
</div>
</div>
<div id="outline-container-org67c0083" class="outline-2">
<h2 id="org67c0083">判断是否为有向无环图</h2>
<div class="outline-text-2" id="text-org67c0083">
<ul class="org-ul">
<li>拓扑排序很重要的应用就是判断一个给定的图是否时有向无环图。<br></li>
<li>\(Bellman-Ford、SPFA\) 算法能判断是否有从源点可达的负环。<br></li>
</ul>
</div>
</div>
</div>
</body>
</html>
