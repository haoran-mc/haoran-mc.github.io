<!DOCTYPE html>
<html lang="zh">
<head>
<!-- 2022-06-05 Sun 13:56 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>ALGORITHM-动态规划-基础-最长非递增子串</title>
<meta name="generator" content="Org mode">
<meta name="author" content="L.M.haoran">
<meta name="description" content="Copyright © 2022, L.M.haoran, all rights reserved."
>

                <link rel="stylesheet" href="static/css/org.css" type="text/css"  />
                <script type="module" src="static/js/main.js" defer></script>
                <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
</head>
<body>
<div id="content">
<h1 class="title">ALGORITHM-动态规划-基础-最长非递增子串</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgd1c1b94">最长非递增子串</a></li>
</ul>
</div>
</div>

<div id="outline-container-orgd1c1b94" class="outline-2">
<h2 id="orgd1c1b94">最长非递增子串</h2>
<div class="outline-text-2" id="text-orgd1c1b94">
<ul class="org-ul">
<li><p>
导弹拦截<br>
</p>
<ul class="org-ul">
<li>[导弹拦截](<a href="https://vjudge.net/problem/OpenJ_Bailian-2945">https://vjudge.net/problem/OpenJ_Bailian-2945</a>)<br></li>
</ul>
<p>
&gt; 某国为了防御敌国的导弹袭击，发展出一种导弹拦截系统。但是它有一个缺陷: 虽然它的第一发炮弹能够到达任意的高度，但是以后每一发炮弹都不能高于前一发的高度。某天，雷达捕捉到敌国的导弹来袭。由于该系统还在适用阶段，所以只有一套系统，因此有可能不能拦截所有的导弹。<br>
</p>

<p>
输入: 第一行输入导弹的枚数N，第二行是n个数表示导弹依次飞来的高度<br>
输出: 第一行输出最多可拦截的导弹数，第二行输出拦截的导弹序列<br>
</p>

<p>
输入样例:<br>
8<br>
389 207 155 300 299 170 158 65<br>
</p>

<p>
输出样例:<br>
6<br>
380 300 299 170 158 65<br>
</p>
<div class="org-src-container">
<pre class="src src-C++"><span style="color: #d75fd7;">#include</span> <span style="color: #2aa198;">&lt;cstdio&gt;</span>
<span style="color: #d75fd7;">#include</span> <span style="color: #2aa198;">&lt;cstring&gt;</span>
<span style="color: #d75fd7;">#include</span> <span style="color: #2aa198;">&lt;algorithm&gt;</span>
<span style="color: #268bd2; font-weight: bold;">using</span> <span style="color: #268bd2; font-weight: bold;">namespace</span> <span style="color: #d75fd7;">std</span>;
<span style="color: #268bd2; font-weight: bold;">const</span> <span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">maxn</span> = 25;
<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">bomb</span>[maxn];
<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">dp</span>[maxn];
<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #d75fd7; font-weight: bold;">main</span>() {
    <span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">n</span>;
    scanf(<span style="color: #2aa198;">"%d"</span>, &amp;n);
    <span style="color: #268bd2; font-weight: bold;">for</span> (<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">i</span> = 0; i &lt; n; ++i)
        scanf(<span style="color: #2aa198;">"%d"</span>, &amp;bomb[i]);
    fill(dp, dp+n, 1);
    <span style="color: #268bd2; font-weight: bold;">for</span> (<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">i</span> = 0; i &lt; n; ++i)
        <span style="color: #268bd2; font-weight: bold;">for</span> (<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">j</span> = 0; j &lt; i; ++j)
            <span style="color: #268bd2; font-weight: bold;">if</span> (bomb[i] &lt;= bomb[j])
                dp[i] = max(dp[i], dp[j]+1);
    <span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">res</span> = 0;
    <span style="color: #268bd2; font-weight: bold;">for</span> (<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">i</span> = 0; i &lt; n; ++i)
        res = max(res, dp[i]);
    printf(<span style="color: #2aa198;">"%d\n"</span>, res);
    <span style="color: #268bd2; font-weight: bold;">return</span> 0;
}
</pre>
</div>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #d75fd7;">#include</span> <span style="color: #2aa198;">&lt;cstdio&gt;</span>
<span style="color: #d75fd7;">#include</span> <span style="color: #2aa198;">&lt;cstring&gt;</span>
<span style="color: #d75fd7;">#include</span> <span style="color: #2aa198;">&lt;algorithm&gt;</span>
<span style="color: #d75fd7;">#include</span> <span style="color: #2aa198;">&lt;vector&gt;</span>
<span style="color: #268bd2; font-weight: bold;">using</span> <span style="color: #268bd2; font-weight: bold;">namespace</span> <span style="color: #d75fd7;">std</span>;
<span style="color: #268bd2; font-weight: bold;">const</span> <span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">maxn</span> = 25;
<span style="color: #268bd2; font-weight: bold;">const</span> <span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">inf</span>  = 0x3f3f3f3f;
<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">bomb</span>[maxn];
<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">dp</span>[maxn]; <span style="color: #008787; background-color: #262626;">/*</span><span style="color: #008787; background-color: #262626;">&#24403;&#21069;&#23548;&#24377;&#20316;&#20026;&#32467;&#23614;&#26102;&#33021;&#25318;&#25130;&#30340;&#23548;&#24377;&#25968;</span><span style="color: #008787; background-color: #262626;">*/</span>
<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">link</span>[maxn];
<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #d75fd7; font-weight: bold;">main</span>() {
    freopen(<span style="color: #2aa198;">"in.txt"</span>, <span style="color: #2aa198;">"r"</span>, stdin);
    freopen(<span style="color: #2aa198;">"out.txt"</span>, <span style="color: #2aa198;">"w"</span>, stdout);
    <span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">n</span>;
    scanf(<span style="color: #2aa198;">"%d"</span>, &amp;n);
    ++n;
    bomb[0] = inf; <span style="color: #008787; background-color: #262626;">/*</span><span style="color: #008787; background-color: #262626;">&#24517;&#39035;&#35774;&#32622;&#31532;&#19968;&#20010;&#26159;&#26368;&#22823;&#30340;&#65292;&#20445;&#35777;&#20043;&#21518;&#30340;&#26368;&#22823;&#30340;&#33021;&#34987;link&#22312;&#36825;&#27425;&#20043;&#21518;&#65292;&#21542;&#21017;&#20043;&#21518;&#30340;&#26368;&#22823;&#30340;link&#26159;&#23427;&#33258;&#24049;&#65292;&#32780;&#26368;&#21518;&#30340;&#36755;&#20986;&#26465;&#20214;&#26159;&#21040;&#36798;-1&#25165;&#20572;&#27490;&#36755;&#20986;</span><span style="color: #008787; background-color: #262626;">*/</span>
    <span style="color: #268bd2; font-weight: bold;">for</span> (<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">i</span> = 1; i &lt;= n; ++i)
        scanf(<span style="color: #2aa198;">"%d"</span>, &amp;bomb[i]);
    memset(link, -1, <span style="color: #268bd2; font-weight: bold;">sizeof</span>(link));
    <span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">maxi</span>;
    <span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">idx</span>;
    <span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">res</span> = 1;
    <span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">start</span> = -1;
    dp[0] = 1; <span style="color: #008787; background-color: #262626;">/*</span><span style="color: #008787; background-color: #262626;">&#31532;&#19968;&#20010;&#23548;&#24377;&#19968;&#23450;&#33021;&#34987;&#25318;&#25130;</span><span style="color: #008787; background-color: #262626;">*/</span>
    <span style="color: #008787; background-color: #262626;">/*</span><span style="color: #008787; background-color: #262626;">dp[1]&#19981;&#38656;&#35201;&#39044;&#20808;&#35774;&#23450;&#65292;&#22914;&#26524;&#31243;&#24207;&#20013;&#27809;&#26377;&#25214;&#21040;&#21069;&#38754;&#27604;&#23427;&#39640;&#30340;&#23548;&#24377;&#65292;&#20250;&#33258;&#21160;&#35774;&#23450;1</span><span style="color: #008787; background-color: #262626;">*/</span>
    <span style="color: #008787; background-color: #262626;">/*</span><span style="color: #008787; background-color: #262626;">&#32780;dp[0]&#36890;&#36807;&#24490;&#29615;&#33258;&#24049;&#35774;&#23450;1&#65292;&#22240;&#20026;&#20250;&#21516;&#26102;&#25913;&#21464;idx&#30340;&#20540;</span><span style="color: #008787; background-color: #262626;">*/</span>
    <span style="color: #268bd2; font-weight: bold;">for</span> (<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">i</span> = 1; i &lt; n-1; ++i) {
        maxi = dp[i]; <span style="color: #008787; background-color: #262626;">/*</span><span style="color: #008787; background-color: #262626;">&#39318;&#20808;&#35748;&#20026;&#24403;&#21069;&#30340;dp&#26159;&#26368;&#22823;&#30340;&#65292;&#22914;&#26524;&#33021;&#21457;&#29616;&#26356;&#22823;&#30340;&#65292;&#37027;&#23601;&#26356;&#25913;&#20026;&#26356;&#22823;&#30340;</span><span style="color: #008787; background-color: #262626;">*/</span>
        idx  = i; <span style="color: #008787; background-color: #262626;">/*</span><span style="color: #008787; background-color: #262626;">idx&#23547;&#25214;&#21069;&#38754;&#27604;&#24403;&#21069;&#23548;&#24377;&#39640;&#30340;&#65292;&#19988;dp&#26356;&#22823;&#30340;&#23548;&#24377;&#30340;&#19979;&#26631;</span><span style="color: #008787; background-color: #262626;">*/</span>
        <span style="color: #008787; background-color: #262626;">/*</span><span style="color: #008787; background-color: #262626;">&#19968;&#23450;&#35201;&#20498;&#30528;&#23547;&#25214;&#65292;&#25214;&#21040;&#26368;&#36817;&#30340;</span><span style="color: #008787; background-color: #262626;">*/</span>
        <span style="color: #268bd2; font-weight: bold;">for</span> (<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">j</span> = i-1; j &gt;= 0; --j)
            <span style="color: #268bd2; font-weight: bold;">if</span> (bomb[j] &gt;= bomb[i] &amp;&amp; dp[j] &gt; maxi) {
                maxi = dp[j];
                idx  = j;
            }
        dp[i] = ++maxi;
        link[i] = idx;
        <span style="color: #268bd2; font-weight: bold;">if</span> (dp[i] &gt; res) { <span style="color: #008787; background-color: #262626;">/*</span><span style="color: #008787; background-color: #262626;">&#26368;&#22810;&#30340;&#33021;&#25318;&#25130;&#30340;&#23548;&#24377;&#25968;</span><span style="color: #008787; background-color: #262626;">*/</span>
            res = dp[i];
            start = i;
        }
    }
    printf(<span style="color: #2aa198;">"%d\n"</span>, res);
    <span style="color: #df005f; font-weight: bold;">vector</span>&lt;<span style="color: #df005f; font-weight: bold;">int</span>&gt; <span style="color: #8787d7;">vec</span>;
    <span style="color: #268bd2; font-weight: bold;">for</span> (<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">i</span> = start; i != -1; i = link[i])
        <span style="color: #268bd2; font-weight: bold;">if</span> (i != 0)
            vec.push_back(bomb[i]);
    <span style="color: #268bd2; font-weight: bold;">for</span> (<span style="color: #268bd2; font-weight: bold;">auto</span> <span style="color: #8787d7;">it</span> = vec.begin(); it != vec.end(); ++it)
        printf(<span style="color: #2aa198;">"%d "</span>, *it);
    <span style="color: #268bd2; font-weight: bold;">return</span> 0;
}
</pre>
</div></li>

<li><p>
矩阵嵌套<br>
</p>

<p>
&gt; 有n个矩形，每个矩形可以用a,b来描述，表示长和宽。矩形X(a,b)可以嵌套在矩形Y(c,d)中当且仅当a&lt;c,b&lt;d或者b&lt;c,a&lt;d（相当于旋转X90度）。例如（1,5）可以嵌套在（6,2）内，但不能嵌套在（3,4）中。你的任务是选出尽可能多的矩形排成一行，使得除最后一个外，每一个矩形都可以嵌套在下一个矩形内。<br>
</p>

<p>
输入: 第一行是一个正正数N(0&lt;N&lt;10)，表示测试数据组数，每组测试数据的第一行是一个正正数n，表示该组测试数据中含有矩形的个数(n&lt;=1000)随后的n行，每行有两个数a,b(0&lt;a,b&lt;100)，表示矩形的长和宽<br>
输出: 每组测试数据都输出一个数，表示最多符合条件的矩形数目，每组输出占一行<br>
</p>

<p>
输入样例:<br>
1<br>
10<br>
1 2<br>
2 4<br>
5 8<br>
6 10<br>
7 9<br>
3 1<br>
5 8<br>
12 10<br>
9 7<br>
2 2<br>
</p>

<p>
输出样例:<br>
5<br>
</p>

<p>
思路: 与导弹拦截差不多，先排序，然后求最长递增子序列<br>
</p>
<div class="org-src-container">
<pre class="src src-C++"><span style="color: #d75fd7;">#include</span> <span style="color: #2aa198;">&lt;stdio.h&gt;</span>
<span style="color: #d75fd7;">#include</span> <span style="color: #2aa198;">&lt;string.h&gt;</span>
<span style="color: #d75fd7;">#include</span> <span style="color: #2aa198;">&lt;algorithm&gt;</span>
<span style="color: #268bd2; font-weight: bold;">const</span> <span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">maxn</span> = 1005;
<span style="color: #268bd2; font-weight: bold;">using</span> <span style="color: #268bd2; font-weight: bold;">namespace</span> <span style="color: #d75fd7;">std</span>;

<span style="color: #268bd2; font-weight: bold;">struct</span> <span style="color: #df005f; font-weight: bold;">Matrix</span> {
    <span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">x</span>;
    <span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">y</span>;
} <span style="color: #8787d7;">matrix</span>[maxn];
<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">dp</span>[maxn]; <span style="color: #008787; background-color: #262626;">/*</span><span style="color: #008787; background-color: #262626;">&#34920;&#31034;&#20197;&#24403;&#21069;&#30697;&#38453;&#32467;&#26463;&#21487;&#20197;&#23884;&#22871;&#30340;&#30697;&#38453;&#26368;&#22810;&#26159;&#22810;&#23569;</span><span style="color: #008787; background-color: #262626;">*/</span>
<span style="color: #df005f; font-weight: bold;">bool</span> <span style="color: #d75fd7; font-weight: bold;">cmp</span>(<span style="color: #df005f; font-weight: bold;">Matrix</span> <span style="color: #8787d7;">a</span>, <span style="color: #df005f; font-weight: bold;">Matrix</span> <span style="color: #8787d7;">b</span>) {
    <span style="color: #268bd2; font-weight: bold;">return</span> a.x == b.x ? a.y &lt; b.y : a.x &lt; b.x;
}

<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #d75fd7; font-weight: bold;">main</span>() {
    <span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">n</span>;
    memset(dp, 0, <span style="color: #268bd2; font-weight: bold;">sizeof</span>(dp));
    scanf(<span style="color: #2aa198;">"%d"</span>, &amp;n);
    <span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">tempx</span>;
    <span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">tempy</span>;
    <span style="color: #268bd2; font-weight: bold;">for</span> (<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">i</span> = 0; i &lt; n; i++) {
        scanf(<span style="color: #2aa198;">"%d%d"</span>, &amp;tempx, &amp;tempy);
        <span style="color: #008787; background-color: #262626;">/*</span><span style="color: #008787; background-color: #262626;">&#23558;&#38271;&#23384;&#22312;y&#20013;&#65292;&#23485;&#23384;&#22312;x&#20013;</span><span style="color: #008787; background-color: #262626;">*/</span>
        <span style="color: #268bd2; font-weight: bold;">if</span> (tempx &lt; tempy) {
            matrix[i].x = tempx;
            matrix[i].y = tempy;
        }
        <span style="color: #268bd2; font-weight: bold;">else</span> {
            matrix[i].x = tempy;
            matrix[i].y = tempx;
        }
    }
    sort(matrix, matrix+n, cmp);
    <span style="color: #268bd2; font-weight: bold;">for</span>(<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">i</span> = 0; i &lt; n; i++)
        dp[i] = 1; <span style="color: #008787; background-color: #262626;">/*</span><span style="color: #008787; background-color: #262626;">&#26174;&#28982;&#26368;&#23569;&#20063;&#26159;&#19968;&#20010;&#37117;&#19981;&#33021;&#23884;&#22871;</span><span style="color: #008787; background-color: #262626;">*/</span>
    <span style="color: #268bd2; font-weight: bold;">for</span> (<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">i</span> = 1; i &lt; n; i++)
        <span style="color: #268bd2; font-weight: bold;">for</span> (<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">j</span> = i-1; j &gt;= 0; j--)
            <span style="color: #268bd2; font-weight: bold;">if</span> (matrix[i].x &gt; matrix[j].x &amp;&amp; matrix[i].y &gt; matrix[j].y  &amp;&amp; dp[j] &gt; dp[i])
                dp[i] = max(dp[i], dp[j] + 1);
    <span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">res</span> = 0;
    <span style="color: #268bd2; font-weight: bold;">for</span> (<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">i</span> = 0; i &lt; n; i++)
        res = max(res, dp[i]);
    printf(<span style="color: #2aa198;">"%d\n"</span>, res);
}
</pre>
</div></li>
<li>木棍加工<br></li>
<li><p>
Dilworth定理<br>
狄尔沃斯定理(Dilworth's theorem)亦称偏序集分解定理，其定义是：对于任意有限偏序集，其最大反链中元素的数目必等于最小链划分中链的数目。对偶形式也成立：对于任意有限偏序集，其最长链中元素的数目必等于其最小反链划分中反链的数目<br>
以洛谷P1020为例，求解一套导弹拦截系统最多能拦截导弹的数量，这个其实就是一个简单的LIS；而求解需要多少个导弹拦截系统，就使用Dilworth定理，所有发射的导弹高度构成一个偏序集，导弹链接系统的数量就是全序集的个数，每一个导弹拦截系统下一次拦截高度都不能高于前一次拦截的高度，所以，其反链就是最长不严格上升子序列<br>
</p>

<p>
最少的下降序列个数就等于整个序列最长上升子序列的长度<br>
</p>

<p>
要先降序排列，`return (a.x &gt; b.x || (a.x == b.x &amp;&amp; a.y &gt; b.y)) ? true : false;`，然后由于x是一定非递增的，比较y，y中的最长上升序列长度就是最少的下降序列<br>
</p></li>
</ul>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: L.M.haoran</p>
<p class="date">Created: 2022-06-05 Sun 13:56</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
