<!DOCTYPE html>
<html lang="zh">
<head>
<!-- 2022-07-22 Fri 02:28 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Go 网络编程</title>
<meta name="generator" content="Org mode">
<meta name="author" content="L.M.haoran">
<meta name="description" content="Copyright © 2022, L.M.haoran, all rights reserved."
>

                <link rel="stylesheet" href="static/css/org.css" type="text/css"  />
                <script type="module" src="static/js/main.js" defer></script>
                <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
</head>
<body>
<div id="content">
<h1 class="title">Go 网络编程</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgc0a3383">一、服务端</a>
<ul>
<li><a href="#org04fdc69">1. 解析地址</a></li>
<li><a href="#orgadcea3b">2. 监听请求</a></li>
<li><a href="#orge67ada1">3. 接收请求</a></li>
<li><a href="#orgac38a0b">4. 连接配置</a></li>
<li><a href="#org8b29f1b">5. 编写一个 TCP 服务端</a></li>
</ul>
</li>
<li><a href="#orgb3d9908">二、客户端</a>
<ul>
<li><a href="#orgd93564d">1. 解析 TCP 地址</a></li>
<li><a href="#org72036c0">2. 发送连接请求</a></li>
<li><a href="#org376447d">3. 编写一个 TCP 客户端</a></li>
</ul>
</li>
<li><a href="#orgf314fe7">三、管理连接</a>
<ul>
<li><a href="#orgf86037e">1. 客户端</a></li>
<li><a href="#org0baefad">2. 服务端</a></li>
<li><a href="#org7daf836">3. 测试</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-orgc0a3383" class="outline-2">
<h2 id="orgc0a3383">一、服务端</h2>
<div class="outline-text-2" id="text-orgc0a3383">
</div>
<div id="outline-container-org04fdc69" class="outline-3">
<h3 id="org04fdc69">1. 解析地址</h3>
<div class="outline-text-3" id="text-org04fdc69">
<p>
在服务端我们需要监听一个地址，因此建立服务端前我们需要生成一个正确的地址，这就需要用到下面的函数了。<br>
</p>

<div class="org-src-container">
<pre class="src src-go"><span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">ResolveTCPAddr&#20989;&#25968;&#20250;&#36755;&#20986;&#19968;&#20010;TCP&#36830;&#25509;&#22320;&#22336;&#21644;&#19968;&#20010;&#38169;&#35823;&#20449;&#24687;</span>
<span style="color: #268bd2; font-weight: bold;">func</span> <span style="color: #d75fd7; font-weight: bold;">ResolveTCPAddr</span>(<span style="color: #8787d7;">network</span>, <span style="color: #8787d7;">address</span> <span style="color: #df005f; font-weight: bold;">string</span>) (*<span style="color: #df005f; font-weight: bold;">TCPAddr</span>, <span style="color: #df005f; font-weight: bold;">error</span>)
<span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">&#35299;&#26512;IP&#22320;&#22336;</span>
<span style="color: #268bd2; font-weight: bold;">func</span> <span style="color: #d75fd7; font-weight: bold;">ResolveIPAddr</span>(<span style="color: #8787d7;">net</span>, <span style="color: #8787d7;">addr</span> <span style="color: #df005f; font-weight: bold;">string</span>) (*<span style="color: #df005f; font-weight: bold;">IPAddr</span>, <span style="color: #df005f; font-weight: bold;">error</span>)
<span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">&#35299;&#26512;UDP&#22320;&#22336;</span>
<span style="color: #268bd2; font-weight: bold;">func</span> <span style="color: #d75fd7; font-weight: bold;">ResolveUDPAddr</span>(<span style="color: #8787d7;">net</span>, <span style="color: #8787d7;">addr</span> <span style="color: #df005f; font-weight: bold;">string</span>) (*<span style="color: #df005f; font-weight: bold;">UDPAddr</span>, <span style="color: #df005f; font-weight: bold;">error</span>)
<span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">&#35299;&#26512;Unix&#22320;&#22336;</span>
<span style="color: #268bd2; font-weight: bold;">func</span> <span style="color: #d75fd7; font-weight: bold;">ResolveUnixAddr</span>(<span style="color: #8787d7;">net</span>, <span style="color: #8787d7;">addr</span> <span style="color: #df005f; font-weight: bold;">string</span>) (*<span style="color: #df005f; font-weight: bold;">UnixAddr</span>, <span style="color: #df005f; font-weight: bold;">error</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-orgadcea3b" class="outline-3">
<h3 id="orgadcea3b">2. 监听请求</h3>
<div class="outline-text-3" id="text-orgadcea3b">
<p>
通过 Listen方法监听我们解析后的网络地址。<br>
</p>

<div class="org-src-container">
<pre class="src src-go"><span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">&#30417;&#21548;net&#31867;&#22411;&#65292;&#22320;&#22336;&#20026;laddr&#30340;&#22320;&#22336;</span>
<span style="color: #268bd2; font-weight: bold;">func</span> <span style="color: #d75fd7; font-weight: bold;">Listen</span>(<span style="color: #8787d7;">net</span>, <span style="color: #8787d7;">laddr</span> <span style="color: #df005f; font-weight: bold;">string</span>) (<span style="color: #df005f; font-weight: bold;">Listener</span>, <span style="color: #df005f; font-weight: bold;">error</span>)
<span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">&#30417;&#21548;TCP&#22320;&#22336;</span>
<span style="color: #268bd2; font-weight: bold;">func</span> <span style="color: #d75fd7; font-weight: bold;">ListenTCP</span>(<span style="color: #8787d7;">network</span> <span style="color: #df005f; font-weight: bold;">string</span>, <span style="color: #8787d7;">laddr</span> *<span style="color: #df005f; font-weight: bold;">TCPAddr</span>) (*<span style="color: #df005f; font-weight: bold;">TCPListener</span>, <span style="color: #df005f; font-weight: bold;">error</span>)
<span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">&#30417;&#21548;IP&#22320;&#22336;</span>
<span style="color: #268bd2; font-weight: bold;">func</span> <span style="color: #d75fd7; font-weight: bold;">ListenIP</span>(<span style="color: #8787d7;">netProto</span> <span style="color: #df005f; font-weight: bold;">string</span>, <span style="color: #8787d7;">laddr</span> *<span style="color: #df005f; font-weight: bold;">IPAddr</span>) (*<span style="color: #df005f; font-weight: bold;">IPConn</span>, <span style="color: #df005f; font-weight: bold;">error</span>)
<span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">&#30417;&#21548;UDP&#22320;&#22336;</span>
<span style="color: #268bd2; font-weight: bold;">func</span> <span style="color: #d75fd7; font-weight: bold;">ListenMulticastUDP</span>(<span style="color: #8787d7;">net</span> <span style="color: #df005f; font-weight: bold;">string</span>, <span style="color: #8787d7;">ifi</span> *<span style="color: #df005f; font-weight: bold;">Interface</span>, <span style="color: #8787d7;">gaddr</span> *<span style="color: #df005f; font-weight: bold;">UDPAddr</span>) (*<span style="color: #df005f; font-weight: bold;">UDPConn</span>, <span style="color: #df005f; font-weight: bold;">error</span>)
<span style="color: #268bd2; font-weight: bold;">func</span> <span style="color: #d75fd7; font-weight: bold;">ListenUDP</span>(<span style="color: #8787d7;">net</span> <span style="color: #df005f; font-weight: bold;">string</span>, <span style="color: #8787d7;">laddr</span> *<span style="color: #df005f; font-weight: bold;">UDPAddr</span>) (*<span style="color: #df005f; font-weight: bold;">UDPConn</span>, <span style="color: #df005f; font-weight: bold;">error</span>)
<span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">&#30417;&#21548;Unix&#22320;&#22336;</span>
<span style="color: #268bd2; font-weight: bold;">func</span> <span style="color: #d75fd7; font-weight: bold;">ListenUnixgram</span>(<span style="color: #8787d7;">net</span> <span style="color: #df005f; font-weight: bold;">string</span>, <span style="color: #8787d7;">laddr</span> *<span style="color: #df005f; font-weight: bold;">UnixAddr</span>) (*<span style="color: #df005f; font-weight: bold;">UnixConn</span>, <span style="color: #df005f; font-weight: bold;">error</span>)
<span style="color: #268bd2; font-weight: bold;">func</span> <span style="color: #d75fd7; font-weight: bold;">ListenUnix</span>(<span style="color: #8787d7;">net</span> <span style="color: #df005f; font-weight: bold;">string</span>, <span style="color: #8787d7;">laddr</span> *<span style="color: #df005f; font-weight: bold;">UnixAddr</span>) (*<span style="color: #df005f; font-weight: bold;">UnixListener</span>, <span style="color: #df005f; font-weight: bold;">error</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-orge67ada1" class="outline-3">
<h3 id="orge67ada1">3. 接收请求</h3>
<div class="outline-text-3" id="text-orge67ada1">
<p>
TCPAddr 实现了两个接受请求的方法，两者代码实现其实是一样的，唯一的区别是第一种返回了一个对象，第二种返回了一个接口。<br>
</p>

<div class="org-src-container">
<pre class="src src-go">
</pre>
</div>
</div>
</div>
<div id="outline-container-orgac38a0b" class="outline-3">
<h3 id="orgac38a0b">4. 连接配置</h3>
</div>
<div id="outline-container-org8b29f1b" class="outline-3">
<h3 id="org8b29f1b">5. 编写一个 TCP 服务端</h3>
</div>
</div>
<div id="outline-container-orgb3d9908" class="outline-2">
<h2 id="orgb3d9908">二、客户端</h2>
<div class="outline-text-2" id="text-orgb3d9908">
</div>
<div id="outline-container-orgd93564d" class="outline-3">
<h3 id="orgd93564d">1. 解析 TCP 地址</h3>
</div>
<div id="outline-container-org72036c0" class="outline-3">
<h3 id="org72036c0">2. 发送连接请求</h3>
</div>
<div id="outline-container-org376447d" class="outline-3">
<h3 id="org376447d">3. 编写一个 TCP 客户端</h3>
</div>
</div>
<div id="outline-container-orgf314fe7" class="outline-2">
<h2 id="orgf314fe7">三、管理连接</h2>
<div class="outline-text-2" id="text-orgf314fe7">
</div>
<div id="outline-container-orgf86037e" class="outline-3">
<h3 id="orgf86037e">1. 客户端</h3>
</div>
<div id="outline-container-org0baefad" class="outline-3">
<h3 id="org0baefad">2. 服务端</h3>
</div>
<div id="outline-container-org7daf836" class="outline-3">
<h3 id="org7daf836">3. 测试</h3>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: L.M.haoran</p>
<p class="date">Created: 2022-07-22 Fri 02:28</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
