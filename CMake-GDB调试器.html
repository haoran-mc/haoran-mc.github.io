<!DOCTYPE html>
<html lang="zh">
<head>
<!-- 2022-03-31 Thu 21:34 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>GDB 调试器</title>
<meta name="generator" content="Org mode">
<meta name="author" content="L.M.haoran &lt;haoran.mc@outlook.com&gt;">
<meta name="description" content="Copyright © 2021, L.M.haoran, all rights reserved."
>

                <link rel="stylesheet" href="static/css/org.css" type="text/css"  />
                <script type="module" src="static/js/main.js" defer></script>
                <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
</head>
<body>
<div id="content">
<h1 class="title">GDB 调试器</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org936a24a">GDB 调试器</a>
<ul>
<li><a href="#org5985238">常用调试命令参数</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-org936a24a" class="outline-2">
<h2 id="org936a24a">GDB 调试器</h2>
<div class="outline-text-2" id="text-org936a24a">
<ul class="org-ul">
<li>GDB（GNU Debugger）是一个用来调试 C/C++ 程序的功能强大的调试器，是 Linux系统开发 C/C++ 最常用的调试器<br></li>
<li>程序员可以使用 GDB 来跟踪程序中的错误，从而减少程序员的工作量。<br></li>
<li><span class="underline">Linux 开发C/C++ 一定要熟悉 GDB</span><br></li>
<li>VSCode 是通过调用GDB调试器来实现 C/C++ 的调试工作的；<br></li>
<li>Windows 系统中，常见的集成开发环境（IDE），如 VS、VC 等，它们内部已经嵌套了相应的调试器<br></li>
</ul>

<p>
GDB主要功能：<br>
</p>
<ul class="org-ul">
<li>设置断点（断点可以是条件表达式）<br></li>
<li>使程序在指定的代码行上暂停执行，便于观察<br></li>
<li>单步执行程序，便于调试<br></li>
<li>查看程序中变量值的变化<br></li>
<li>动态改变程序的执行环境<br></li>
<li>分析崩溃程序产生的 core 文件<br></li>
</ul>
</div>
<div id="outline-container-org5985238" class="outline-3">
<h3 id="org5985238">常用调试命令参数</h3>
<div class="outline-text-3" id="text-org5985238">
<p>
调试开始：执行 gdb [exefilename]，进入 gdb 调试程序，其中 exefilename 为要调试的可执行文件名<br>
</p>

<div class="org-src-container">
<pre class="src src-shell"><span style="color: #008787; background-color: #262626;">## </span><span style="color: #008787; background-color: #262626;">&#20197;&#19979;&#21629;&#20196;&#21518;&#25324;&#21495;&#20869;&#20026;&#21629;&#20196;&#30340;&#31616;&#21270;&#20351;&#29992;&#65292;&#27604;&#22914; run(r)&#65292;&#30452;&#25509;&#36755;&#20837;&#21629;&#20196; r &#23601;&#20195;&#34920;&#21629;&#20196; run</span>

$(gdb) help(h)        <span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#26597;&#30475;&#21629;&#20196;&#24110;&#21161;&#65292;&#20855;&#20307;&#21629;&#20196;&#26597;&#35810;&#22312;gdb&#20013;&#36755;&#20837; help + &#21629;&#20196; </span>

$(gdb) run(<span style="color: #268bd2;">r</span>)         <span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#37325;&#26032;&#24320;&#22987;&#36816;&#34892;&#25991;&#20214;&#65288;run-text&#65306;&#21152;&#36733;&#25991;&#26412;&#25991;&#20214;&#65292;run-bin&#65306;&#21152;&#36733;&#20108;&#36827;&#21046;&#25991;&#20214;&#65289;</span>

$(gdb) start          <span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#21333;&#27493;&#25191;&#34892;&#65292;&#36816;&#34892;&#31243;&#24207;&#65292;&#20572;&#22312;&#31532;&#19968;&#34892;&#25191;&#34892;&#35821;&#21477;</span>

$(gdb) list(l)        <span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#26597;&#30475;&#21407;&#20195;&#30721;&#65288;list-n&#65292;&#20174;&#31532; n &#34892;&#24320;&#22987;&#26597;&#30475;&#20195;&#30721;&#12290;list + &#20989;&#25968;&#21517;&#65306;&#26597;&#30475;&#20855;&#20307;&#20989;&#25968;&#65289;</span>

$(gdb) <span style="color: #268bd2;">set</span>            <span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#35774;&#32622;&#21464;&#37327;&#30340;&#20540;</span>

$(gdb) next(n)        <span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#21333;&#27493;&#35843;&#35797;&#65288;&#36880;&#36807;&#31243;&#65292;&#20989;&#25968;&#30452;&#25509;&#25191;&#34892;&#65289;</span>

$(gdb) step(s)        <span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#21333;&#27493;&#35843;&#35797;&#65288;&#36880;&#35821;&#21477;&#65306;&#36339;&#20837;&#33258;&#23450;&#20041;&#20989;&#25968;&#20869;&#37096;&#25191;&#34892;&#65289;</span>

$(gdb) backtrace(bt)  <span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#26597;&#30475;&#20989;&#25968;&#30340;&#35843;&#29992;&#30340;&#26632;&#24103;&#21644;&#23618;&#32423;&#20851;&#31995;</span>

$(gdb) frame(f)       <span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#20999;&#25442;&#20989;&#25968;&#30340;&#26632;&#24103;</span>

$(gdb) info(i)        <span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#26597;&#30475;&#20989;&#25968;&#20869;&#37096;&#23616;&#37096;&#21464;&#37327;&#30340;&#25968;&#20540;</span>

$(gdb) finish         <span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#32467;&#26463;&#24403;&#21069;&#20989;&#25968;&#65292;&#36820;&#22238;&#21040;&#20989;&#25968;&#35843;&#29992;&#28857;</span>

$(gdb) <span style="color: #268bd2; font-weight: bold;">continue</span>(c)    <span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#32487;&#32493;&#36816;&#34892;</span>

$(gdb) <span style="color: #268bd2;">print</span>(p)       <span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#25171;&#21360;&#20540;&#21450;&#22320;&#22336;</span>

$(gdb) quit(q)        <span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#36864;&#20986; gdb</span>

$(gdb) <span style="color: #268bd2; font-weight: bold;">break</span>+num(b)                 <span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#22312;&#31532; num &#34892;&#35774;&#32622;&#26029;&#28857;</span>

$(gdb) info breakpoints             <span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#26597;&#30475;&#24403;&#21069;&#35774;&#32622;&#30340;&#25152;&#26377;&#26029;&#28857;</span>

$(gdb) delete breakpoints num(d)    <span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#21024;&#38500;&#31532; num &#20010;&#26029;&#28857;</span>

$(gdb) display                      <span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#36861;&#36394;&#26597;&#30475;&#20855;&#20307;&#21464;&#37327;&#20540;</span>

$(gdb) undisplay                    <span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#21462;&#28040;&#36861;&#36394;&#35266;&#23519;&#21464;&#37327;</span>

$(gdb) watch                        <span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#34987;&#35774;&#32622;&#35266;&#23519;&#28857;&#30340;&#21464;&#37327;&#21457;&#29983;&#20462;&#25913;&#26102;&#65292;&#25171;&#21360;&#26174;&#31034;</span>

$(gdb) i watch                      <span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#26174;&#31034;&#35266;&#23519;&#28857;</span>

$(gdb) <span style="color: #268bd2;">enable</span> breakpoints           <span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#21551;&#29992;&#26029;&#28857;</span>

$(gdb) <span style="color: #268bd2;">disable</span> breakpoints          <span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#31105;&#29992;&#26029;&#28857;</span>

$(gdb) x                            <span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#26597;&#30475;&#20869;&#23384; x/20xw &#26174;&#31034; 20 &#20010;&#21333;&#20803;&#65292;16 &#36827;&#21046;&#65292;4 &#23383;&#33410;&#27599;&#21333;&#20803;</span>

$(gdb) run argv[1] argv[2]          <span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#35843;&#35797;&#26102;&#21629;&#20196;&#34892;&#20256;&#21442;</span>

$(gdb) <span style="color: #268bd2;">set</span> follow-fork-mode child   <span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">Makefile &#39033;&#30446;&#31649;&#29702;&#65306;&#36873;&#25321;&#36319;&#36394;&#29238;&#23376;&#36827;&#31243;&#65288;fork()&#65289;</span>
</pre>
</div>

<blockquote>
<p>
Tips：<br>
</p>
<ol class="org-ol">
<li>编译程序时需要加上 -g，之后才能用 gdb 进行调试： <code>gcc -g main.c -o main</code><br></li>
<li>回车键：重复上一命令<br></li>
</ol>
</blockquote>
</div>
</div>
</div>
</div>
</body>
</html>
