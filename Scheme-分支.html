<!DOCTYPE html>
<html lang="zh">
<head>
<!-- 2021-09-30 四 22:28 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>分支</title>
<meta name="generator" content="Org mode">
<meta name="author" content="L.M.haoran">
<meta name="description" content="Copyright © 2021, L.M.haoran, all rights reserved."
>

                <link rel="stylesheet" href="static/css/org.css" type="text/css"  />
                <script type="module" src="static/js/main.js" defer></script>
                <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
</head>
<body>
<div id="content">
<h1 class="title">分支</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org2403f11">if表达式将过程分为两个部分</a></li>
<li><a href="#org5151529">逻辑运算</a>
<ul>
<li><a href="#org15d9d34">and</a></li>
<li><a href="#orgd5005ee">or</a></li>
<li><a href="#org1b6ca3f">not</a></li>
</ul>
</li>
<li><a href="#org4add05d">cond表达式</a></li>
<li><a href="#org98e4fae">case结构</a></li>
<li><a href="#orgac3b791">判断函数</a>
<ul>
<li><a href="#org336e417">eq?</a></li>
<li><a href="#org4f241e4">eqv?</a></li>
<li><a href="#org43773a2">equal?</a></li>
</ul>
</li>
<li><a href="#orgeaf5e2e">检查数据类型函数</a></li>
<li><a href="#org1fb4fd5">比较数函数</a>
<ul>
<li><a href="#orgc059bdc"><code>、&gt;、&lt;、&lt;=、&gt;</code></a></li>
<li><a href="#org05691e6">odd?、even?、positive?、negative?、zero?</a></li>
</ul>
</li>
<li><a href="#orgb47131c">比较符号函数</a></li>
<li><a href="#org015c639">比较字符串函数</a></li>
</ul>
</div>
</div>


<div id="outline-container-org2403f11" class="outline-2">
<h2 id="org2403f11">if表达式将过程分为两个部分</h2>
<div class="outline-text-2" id="text-org2403f11">
<pre class="example" id="org81151a1">
(if predicate then_value else_value)
如果predicate部分为真，那么then_value部分被求值
                       否则else_value部分被求值
而且求得的值会返回给if语句的括号外
true是除false以外的任意值，true使用#t表示，false使用#f表示
</pre>

<p>
使用函数null?判断表是否为空
</p>
<div class="org-src-container">
<pre class="src src-scheme">(null? '())
;;Value: #t

(null? '(a b c))
;;Value: #f
</pre>
</div>

<p>
函数not可用于对谓语取反此函数只有一个参数且如果参数值为#f则返回#t，反之，参数值为#t则返回#f
</p>

<div class="org-src-container">
<pre class="src src-scheme">;;几何增长数列的求和公式如下：
;;a0 * (1 - r^n) / (1 - r)                      (r ≠ 1)
;;a0 * n                                        (r = 1)

(define (sum-gp a0 r n)
	(* a0
		 (if (= r 1)
				 n
				 (/ (- 1 (expt r n)) (- 1 r)))))   ; !!
</pre>
</div>
</div>
</div>
<div id="outline-container-org5151529" class="outline-2">
<h2 id="org5151529">逻辑运算</h2>
<div class="outline-text-2" id="text-org5151529">
</div>
<div id="outline-container-org15d9d34" class="outline-3">
<h3 id="org15d9d34">and</h3>
<div class="outline-text-3" id="text-org15d9d34">
<p>
and具有任意个数的参数，并从左到右对它们求值。如果某一参数为#f，那么它就返回#f，而不对剩余参数求值。反过来说，如果所有的参数都不是#f，那么就返回最后一个参数的值。
</p>
<div class="org-src-container">
<pre class="src src-scheme">(and #f 0)
;;Value: ()
(and 1 2 3)
;;Value: 3
(and 1 2 3 #f)
;;Value: ()
</pre>
</div>
</div>
</div>
<div id="outline-container-orgd5005ee" class="outline-3">
<h3 id="orgd5005ee">or</h3>
<div class="outline-text-3" id="text-orgd5005ee">
<p>
or具有可变个数的参数，并从左到右对它们求值。它返回第一个不是值#f的参数，而余下的参数不会被求值。如果所有的参数的值都是#f的话，则返回最后一个参数的值。
</p>
<div class="org-src-container">
<pre class="src src-scheme">(or #f 0)
;;Value: 0
(or 1 2 3)
;;Value: 1
(or #f 1 2 3)
;;Value: 1
(or #f #f #f)
;;Value: ()
</pre>
</div>
</div>
</div>
<div id="outline-container-org1b6ca3f" class="outline-3">
<h3 id="org1b6ca3f">not</h3>
</div>
</div>
<div id="outline-container-org4add05d" class="outline-2">
<h2 id="org4add05d">cond表达式</h2>
<div class="outline-text-2" id="text-org4add05d">
<p>
尽管所有的分支都可以用if表达式表达，但当条件有更多的可能性时，你就需要使用嵌套的if表达式了，这将使代码变得复杂。处理这种情况可以使用cond表达式。cond表达式的格式如下：
</p>

<div class="org-src-container">
<pre class="src src-scheme">(cond
 (predicate_1 clauses_1)
 (predicate_2 clauses_2)
 ......
 (predicate_n clauses_n)
 (else        clauses_else))
</pre>
</div>

<p>
在cond表达式中，predicates_i是按照从上到下的顺序求值，而当predicates_i为真时，clause_i会被求值并返回。i之后的predicates和clauses不会被求值。如果所有的predicates_i都是假的话，则返回cluase_else。在一个子句中，你可以写数条S-表达式，而clause的值是最后一条S-表达式
</p>

<p>
城市游泳池的收费
Foo市的城市游泳池按照顾客的年龄收费：如果 age ≤ 3 或者 age ≥ 65 则 免费；如果 介于 4 ≤ age ≤ 6 则 0.5美元；如果 介于 7 ≤ age ≤ 12 则 1.0美元；如果 介于 13 ≤ age ≤ 15 则 1.5美元；如果 介于 16 ≤ age ≤ 18 则 1.8美元；其它 则 2.0美元；那么，一个返回城市游泳池收费的函数如下：
</p>

<div class="org-src-container">
<pre class="src src-scheme">(define (fee age)
	(cond
	 ((or (&lt;= age 3) (&gt;= age 65)) 0)
	 ((&lt;= 4 age 6) 0.5)
	 ((&lt;= 7 age 12) 1.0)
	 ((&lt;= 13 age 15) 1.5)
	 ((&lt;= 16 age 18) 1.8)
	 (else 2.0)))
</pre>
</div>
</div>
</div>
<div id="outline-container-org98e4fae" class="outline-2">
<h2 id="org98e4fae">case结构</h2>
<div class="outline-text-2" id="text-org98e4fae">
<p>
case结构和cond结构有点类似，它的格式为：
</p>
<div class="org-src-container">
<pre class="src src-scheme">(case (表达式) ((值) 操作)) ... (else 操作)))
</pre>
</div>
<p>
case结构中的值可以是复合类型数据，如列表，向量表等，只要列表中含有表达式的这个结果，则进行相应的操作，如下面的代码：
</p>

<div class="org-src-container">
<pre class="src src-scheme">(case (* 2 3)
	((2 3 5 7) 'prime)
	((1 4 6 8 9) 'composite))
</pre>
</div>
<p>
上面的例子返回结果是composite，因为列表(1 4 6 8 9)中含有表达式(* 2 3)的结果6；
</p>

<p>
在当前实例项目中，使用case结构来进行流行病调查分析：
</p>

<div class="org-src-container">
<pre class="src src-scheme">(display "2）最近14天，您是否去过 重点疫区国家？（0-未去过，1-意大利、西班牙，2-欧洲其它地方，3-美国，4-世界其它地方）")
(newline)
(set! Total_Risk (+ Total_Risk 
										(case (input_selected)
											((0) 0)
											((1) 50)
											((2 4) 30)
											((3) 80)
											(else 0)
											)
										))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgac3b791" class="outline-2">
<h2 id="orgac3b791">判断函数</h2>
<div class="outline-text-2" id="text-orgac3b791">
</div>
<div id="outline-container-org336e417" class="outline-3">
<h3 id="org336e417">eq?</h3>
<div class="outline-text-3" id="text-org336e417">
<p>
&gt; 该函数比较两个对象的地址，如果相同的话就返回#t。例如，(eq? str str)返回#t，因为str本身的地址是一致的。与此相对的，因为字符串”hello”和”hello”被储存在了不同的地址中，函数将返回#f。不要使用eq?来比较数字，因为不仅在R5RS中，甚至在MIT-Scheme实现中，它都没有指定返回值。使用eqv?或者=替代
&gt; 比较字符串
</p>

<div class="org-src-container">
<pre class="src src-scheme">(define str "hello")
;;Value: str
(eq? str str)
;;Value: #t
(eq? "hello" "hello")
;;Value: ()             ← It should be #f in R5RS
;;; comparing numbers depends on implementations
(eq? 1 1)
;;Value: #t
(eq? 1.0 1.0)
;;Value: ()
</pre>
</div>
</div>
</div>
<div id="outline-container-org4f241e4" class="outline-3">
<h3 id="org4f241e4">eqv?</h3>
<div class="outline-text-3" id="text-org4f241e4">
<p>
&gt; 该函数比较两个存储在内存中的对象的类型和值。如果类型和值都一致的话就返回#t。对于过程（lambda表达式）的比较依赖于具体的实现。这个函数不能用于类似于表和字符串一类的序列比较，因为尽管这些序列看起来是一致的，但它们的值是存储在不同的地址中
&gt; 比较值
</p>
<div class="org-src-container">
<pre class="src src-scheme">(eqv? 1.0 1.0)
;;Value: #t
(eqv? 1 1.0)
;;Value: ()
;;; don't use it to compare sequences
(eqv? (list 1 2 3) (list 1 2 3))
;;Value: ()
(eqv? "hello" "hello")
;;Value: ()
;;; the following depends on implementations
(eqv? (lambda(x) x) (lambda (x) x))
;;Value: ()
</pre>
</div>
</div>
</div>
<div id="outline-container-org43773a2" class="outline-3">
<h3 id="org43773a2">equal?</h3>
<div class="outline-text-3" id="text-org43773a2">
<p>
&gt; 该函数用于比较类似于表或者字符串一类的序列
</p>
<div class="org-src-container">
<pre class="src src-scheme">(equal? (list 1 2 3) (list 1 2 3))
;;Value: #t
(equal? "hello" "hello")
;;Value: #t
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgeaf5e2e" class="outline-2">
<h2 id="orgeaf5e2e">检查数据类型函数</h2>
<div class="outline-text-2" id="text-orgeaf5e2e">
<p>
检查类型的函数，这些函数都只有一个参数
</p>

<ul class="org-ul">
<li>pair? 如果对象为序对则返回#t</li>
<li>list? 如果对象是一个表则返回#t。要小心的是空表’()是一个表但是不是一个序对</li>
<li>null? 如果对象是空表’()的话就返回#t</li>
<li>symbol? 如果对象是一个符号则返回#t</li>
<li>char? 如果对象是一个字符则返回#t</li>
<li>string? 如果对象是一个字符串则返回#t</li>
<li>number? 如果对象是一个数字则返回#t</li>
<li>complex? 如果对象是一个复数则返回#t</li>
<li>real? 如果对象是一个实数则返回#t</li>
<li>rational? 如果对象是一个有理数则返回#t</li>
<li>integer? 如果对象是一个整数则返回#t</li>
<li>exact? 如果对象不是一个浮点数的话则返回#t</li>
<li>inexact? 如果对象是一个浮点数的话则返回#t</li>
</ul>

<div class="org-src-container">
<pre class="src src-scheme">(null? (cdr name-values))
</pre>
</div>
</div>
</div>
<div id="outline-container-org1fb4fd5" class="outline-2">
<h2 id="org1fb4fd5">比较数函数</h2>
<div class="outline-text-2" id="text-org1fb4fd5">
</div>
<div id="outline-container-orgc059bdc" class="outline-3">
<h3 id="orgc059bdc"><code>、&gt;、&lt;、&lt;=、&gt;</code></h3>
<div class="outline-text-3" id="text-orgc059bdc">
<p>
&gt; 这些函数都有任意个数的参数。如果参数是按照这些函数的名字排序的话，函数就返回#t。
</p>
<div class="org-src-container">
<pre class="src src-scheme">(= 1 1 1.0)
;;Value: #t
(&lt; 1 2 3)
;;Value: #t
(&lt; 1)
;;Value: #t
(&lt;)
;;Value: #t
(= 2 2 2)
;;Value: #t
(&lt; 2 3 3.1)
;;Value: #t
(&gt; 4 1 -0.2)
;;Value: #t
(&lt;= 1 1 1.1)
;;Value: #t
(&gt;= 2 1 1.0)
;;Value: #t
(&lt; 3 4 3.9)
;;Value: ()
</pre>
</div>
</div>
</div>
<div id="outline-container-org05691e6" class="outline-3">
<h3 id="org05691e6">odd?、even?、positive?、negative?、zero?</h3>
<div class="outline-text-3" id="text-org05691e6">
<p>
这些函数仅有一个参数，如果这些参数满足函数名所指示的条件话就返回#t
</p>
</div>
</div>
</div>
<div id="outline-container-orgb47131c" class="outline-2">
<h2 id="orgb47131c">比较符号函数</h2>
<div class="outline-text-2" id="text-orgb47131c">
<p>
在比较字符的时候可以使用char=?、char&lt;?、char&gt;?、char&lt;=?以及char&gt;=?函数
</p>
</div>
</div>
<div id="outline-container-org015c639" class="outline-2">
<h2 id="org015c639">比较字符串函数</h2>
<div class="outline-text-2" id="text-org015c639">
<p>
比较字符串时，可以使用string=?和string-ci=?等函数
</p>
</div>
</div>
</div>
</body>
</html>
