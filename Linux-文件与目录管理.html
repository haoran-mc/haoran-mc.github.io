<!DOCTYPE html>
<html lang="zh">
<head>
<!-- 2023-02-01 -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>文件与目录管理</title>
<meta name="author" content="L.M.haoran" />
<meta name="description" content="Copyright © 2022, L.M.haoran, all rights reserved." />
<meta name="generator" content="Org Mode" />
<link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
           <link rel="stylesheet" href="static/css/org.css" type="text/css"  />
           <script type="module" src="static/js/main.js" defer></script>
</head>
<body>
<div id="content" class="content">
<h1 class="title">文件与目录管理</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org1bc099c">目录与路径</a>
<ul>
<li><a href="#orgd9dd19e">相对路径与绝对路径</a></li>
<li><a href="#org49c9792">目录的相关操作</a>
<ul>
<li><a href="#org52eafaa">切换目录：cd</a></li>
<li><a href="#org5fe7b5f">显示目前所在的目录：pwd</a></li>
<li><a href="#orgd47604a">建立新目录：mkdir</a></li>
<li><a href="#org5931920">删除空目录：rmdir</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgad21ae2">文件与目录管理</a>
<ul>
<li><a href="#org6a89db1">文件与目录的查看：ls</a></li>
<li><a href="#org71a0b88">文件与目录的复制：cp</a></li>
<li><a href="#org87f4063">文件与目录的删除：rm</a></li>
<li><a href="#org92db592">文件与目录的移动：mv</a></li>
</ul>
</li>
<li><a href="#org61fc4b9">文件内容查看</a>
<ul>
<li><a href="#org4d45cee">直接查看文件内容</a>
<ul>
<li><a href="#orge07b17c">查看文件内容：cat</a></li>
<li><a href="#orgc467f0a">反向查看文件内容：tac</a></li>
<li><a href="#org207142b">添加行号打印：nl</a></li>
</ul>
</li>
<li><a href="#org106505e">可翻页查看</a>
<ul>
<li><a href="#org74711d5">翻页查看文件内容：more</a></li>
<li><a href="#orgd3792ce">翻页查看文件内容：less</a></li>
</ul>
</li>
<li><a href="#org6a54d79">数据截取</a>
<ul>
<li><a href="#orge88634a">截取前几行：head</a></li>
<li><a href="#orgf052e50">截取后几行：tail</a></li>
</ul>
</li>
<li><a href="#org6762a51">非纯文本文件：od</a></li>
<li><a href="#orgbbb71e9">修改文件时间或创建新文件：touch</a></li>
</ul>
</li>
<li><a href="#org9e77ea2">文件与目录的默认权限与隐藏权限</a>
<ul>
<li><a href="#orgdf5fa29">文件默认权限：umask</a></li>
<li><a href="#orgea9b2f3">文件隐藏属性</a>
<ul>
<li><a href="#org87635e3">chattr</a></li>
<li><a href="#org92c5281">lsattr</a></li>
</ul>
</li>
<li><a href="#orgb5b0f3a">文件特殊权限：SUID、SGID、SBIT</a></li>
<li><a href="#org69e421a">观察文件类型：file</a></li>
</ul>
</li>
<li><a href="#org0ece2d1">命令与文件的查找</a>
<ul>
<li><a href="#org164ba15">脚本文件的查找</a>
<ul>
<li><a href="#orgc23ff0f">查找执行文件：which</a></li>
<li><a href="#org545389b">查找二进制程序、代码等相关文件路径：whereis</a></li>
</ul>
</li>
<li><a href="#org462a915">文件的查找</a>
<ul>
<li><a href="#org6ae0eb9">查找文件：whereis</a></li>
<li><a href="#orgda9d0bd">查找符合条件的文档：locate/updatedb</a></li>
<li><a href="#org9c40dbf">指定目录下查找文件：find</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-org1bc099c" class="outline-2">
<h2 id="org1bc099c">目录与路径</h2>
<div class="outline-text-2" id="text-org1bc099c">
</div>
<div id="outline-container-orgd9dd19e" class="outline-3">
<h3 id="orgd9dd19e">相对路径与绝对路径</h3>
<div class="outline-text-3" id="text-orgd9dd19e">
<dl class="org-dl">
<dt>绝对路径</dt><dd>一定由根目录 <code>/</code> 写起<br></dd>
<dt>相对路径</dt><dd>相对于目前工作目录的路径<br></dd>
</dl>
</div>
</div>
<div id="outline-container-org49c9792" class="outline-3">
<h3 id="org49c9792">目录的相关操作</h3>
<div class="outline-text-3" id="text-org49c9792">
</div>
<div id="outline-container-org52eafaa" class="outline-4">
<h4 id="org52eafaa">切换目录：cd<a id="org7a8c2a2"></a></h4>
<div class="outline-text-4" id="text-org52eafaa">
<pre class="example" id="org7379197">
.          代表此层目录
..         代表上一层目录
-          代表前一个目录
~          代表目前使用者身份所在的家目录
~account   代表 account 这个使用者的家目录
</pre>
</div>
</div>
<div id="outline-container-org5fe7b5f" class="outline-4">
<h4 id="org5fe7b5f">显示目前所在的目录：pwd<a id="org06dbd5a"></a></h4>
<div class="outline-text-4" id="text-org5fe7b5f">
<pre class="example" id="orgb077806">
pwd - print name of current/working directory

-P: 显示出真正的路径，而非使用链接（link）路径
</pre>
</div>
</div>
<div id="outline-container-orgd47604a" class="outline-4">
<h4 id="orgd47604a">建立新目录：mkdir<a id="orgf915cd2"></a></h4>
<div class="outline-text-4" id="text-orgd47604a">
<pre class="example" id="orgbe5eb70">
mkdir - make directories

-m: 指定文件权限
-p: 帮助你直接将所需要的目录（包含上层目录）递归创建
</pre>

<div class="org-src-container">
<pre class="src src-bash">$ mkdir -m 711 test1
$ mkdir -p test2/test3/test4
</pre>
</div>
</div>
</div>
<div id="outline-container-org5931920" class="outline-4">
<h4 id="org5931920">删除空目录：rmdir<a id="orgf53f2bf"></a></h4>
<div class="outline-text-4" id="text-org5931920">
<pre class="example" id="org5424bca">
rmdir - remove empty directories

-p: 连同上层的空目录一起删除
</pre>

<div class="org-src-container">
<pre class="src src-bash">$ rm dir -p test1/test2/test3
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-orgad21ae2" class="outline-2">
<h2 id="orgad21ae2">文件与目录管理</h2>
<div class="outline-text-2" id="text-orgad21ae2">
</div>
<div id="outline-container-org6a89db1" class="outline-3">
<h3 id="org6a89db1">文件与目录的查看：ls<a id="orgdb770d5"></a></h3>
<div class="outline-text-3" id="text-org6a89db1">
<pre class="example" id="orgc8cd0db">
ls - list directory contents

ls [OPTION]... [FILE]...

-a: 全部的文件，连同隐藏文件；
-A: 全部的文件，连同隐藏文件，但不包括 . 与 .. 这两个目录；
-d: 仅列出目录本身，而不是列出目录内的文件数据；
-f: 直接列出结果，而不进行排序（ls 默认会以文件名排序）；
-F: 根据文件、目录等信息，给予附加数据结构，例如： *： 代表可执行文件；/: 代表目录；=: 代表 socket 文件；|: 代表 FIFO 文件
-h: 将文件容量以人类较易读的方式列出来（例如GB、KB等）；
-i: 列出 inode 号码；
-l: 详细信息显示，包括文件的属性和权限等数据；
-n: 列出 UID 与 GID 而非使用者与用户组的名称；
-r: 将排序结果反向输出；
-R: 连同子目录内容一起列出来；
-S: 以文件容量大小排序，而不是文件名排序；
-t: 以时间排序；
--color=never:  不要根据文件特性给予颜色显示；
--color=always: 显示颜色；
--color=auto:   让系统自行依据设置来判断是否给予颜色；
--full-time:    以完整时间模式（包含年、月、日、时、分）输出；
--time={atime,ctime}: 输出 access 时间或改变权限属性时间（ctime），而非内容修改时间（modification time）；
</pre>
</div>
</div>
<div id="outline-container-org71a0b88" class="outline-3">
<h3 id="org71a0b88">文件与目录的复制：cp<a id="org4f2dfa4"></a></h3>
<div class="outline-text-3" id="text-org71a0b88">
<pre class="example" id="org1c35947">
cp - copy files and directories

cp [OPTION]... [-T] SOURCE DEST
cp [OPTION]... SOURCE... DIRECTORY
cp [OPTION]... -t DIRECTORY SOURCE...

-a: 相当于 -dr --preserve=all 的意思；
-d: 若源文件为链接文件的属性（link file），则复制链接文件属性而非文件本身；
-f: 为强制（force）的意思，若目标文件已经存在且无法开启，则删除后再尝试一次；
-i: 若目标文件（destination）已经存在时，在覆盖时会先询问操作的进行；
-l: 进行硬链接（hard link）的链接文件建立，而非复制文件本身；
-p: 连同文件的属性（权限、用户、时间）一起复制过去，而非使用默认属性（备份常用）；
-r: 递归复制，用于目录的复制；
-s: 复制成为符号链接文件（symbolic link），亦即快捷方式文件；
-u: destination 比 source 旧才更新 destination，或 destination 不存在的情况下才复制；
--preserve=all: 除了 -p 的权限相关参数外，还加入 SELinux 属性，links、xattr 等也复制；
</pre>
</div>
</div>
<div id="outline-container-org87f4063" class="outline-3">
<h3 id="org87f4063">文件与目录的删除：rm<a id="org35a91d3"></a></h3>
<div class="outline-text-3" id="text-org87f4063">
<pre class="example" id="orgb0b1850">
rm - remove files or directories

rm [OPTION]... [FILE]...

-f: 强制删除，忽略不存在的文件，不会出现警告信息；
-I: 交互模式，在删除前会询问使用者是否操作；
-r: 递归删除，用于删除含有文件的目录，一般目录非空时不允许删除；
</pre>
</div>
</div>
<div id="outline-container-org92db592" class="outline-3">
<h3 id="org92db592">文件与目录的移动：mv<a id="org77c174c"></a></h3>
<div class="outline-text-3" id="text-org92db592">
<pre class="example" id="orgddd8bb5">
mv - move (rename) files

mv [OPTION]... [-T] SOURCE DEST
mv [OPTION]... SOURCE... DIRECTORY
mv [OPTION]... -t DIRECTORY SOURCE...

- -f 强制移动，如果目标文件已存在，不会询问而直接覆盖；
- -i 若目标文件已经存在，就会询问是否覆盖；
- -u 若目标文件已经存在，且源文件更新，才会更新；
</pre>
</div>
</div>
</div>
<div id="outline-container-org61fc4b9" class="outline-2">
<h2 id="org61fc4b9">文件内容查看</h2>
<div class="outline-text-2" id="text-org61fc4b9">
</div>
<div id="outline-container-org4d45cee" class="outline-3">
<h3 id="org4d45cee">直接查看文件内容</h3>
<div class="outline-text-3" id="text-org4d45cee">
</div>
<div id="outline-container-orge07b17c" class="outline-4">
<h4 id="orge07b17c">查看文件内容：cat<a id="orgc61c9e1"></a></h4>
<div class="outline-text-4" id="text-orge07b17c">
<pre class="example" id="org3258328">
cat - concatenate files and print on the standard output

-A: 相当于 -vET 的整合选项，可列出一些特殊符号而不是空白；
-b: 列出行号，仅针对非空白行做行号显示，空白行不标行号；
-E: 将结尾的换行符 $ 显示出来；
-n: 打印出行号，连同空白行也会有行号，与 -b 的选项不同；
-T: 将 [tab] 按键以 ^I 显示出来；
-v: 列出一些看不出来的特殊字符；
</pre>

<dl class="org-dl">
<dt>cat /etc/os-release</dt><dd>查看系统版本信息<br></dd>
</dl>
</div>
</div>
<div id="outline-container-orgc467f0a" class="outline-4">
<h4 id="orgc467f0a">反向查看文件内容：tac<a id="org1bb2ad4"></a></h4>
<div class="outline-text-4" id="text-orgc467f0a">
<pre class="example" id="org7105a6a">
tac - concatenate and print files in reverse
</pre>
</div>
</div>
<div id="outline-container-org207142b" class="outline-4">
<h4 id="org207142b">添加行号打印：nl<a id="org29b504a"></a></h4>
<div class="outline-text-4" id="text-org207142b">
<pre class="example" id="org196438e">
nl - number lines of files

-b: 指定行号指定的方式，主要有两种：
        -b a: 表示不论是否有空行，也同样列出行号（类似于 cat -n）；
        -b t: 如果有空行，空的那一行不要列出行号（默认值）；
-n: 列出行号表示的方法，主要有三种：
        -n ln: 行号在屏幕的最左方显示；
        -n rn: 行号在自己栏位的最右方显示，且不加 0；
        -n rz: 行号在自己栏位的最右方显示，且加 0；
-w: 行号栏位的占用字符数；
</pre>
</div>
</div>
</div>
<div id="outline-container-org106505e" class="outline-3">
<h3 id="org106505e">可翻页查看</h3>
<div class="outline-text-3" id="text-org106505e">
</div>
<div id="outline-container-org74711d5" class="outline-4">
<h4 id="org74711d5">翻页查看文件内容：more<a id="org652f422"></a></h4>
<div class="outline-text-4" id="text-org74711d5">
<pre class="example" id="org665ece8">
more - file perusal filter for crt viewing

- 最后一行会显示目前显示的百分比，而且还可以在最后一行输入一些有用的命令
- 空格键 代表向下翻一页；
- Enter 代表向下翻一行；
- /字符串  代表在这个显示的内容中, 向下查找字符串这个关键词；
- :f   立即显示出文件名以及目前显示的行数；
- q    结束命令；
- b 或 [ctrl]-b 代表向回翻页，不过这个操作只对文件有用，对管道无用；
</pre>
</div>
</div>
<div id="outline-container-orgd3792ce" class="outline-4">
<h4 id="orgd3792ce">翻页查看文件内容：less<a id="org7f92833"></a></h4>
<div class="outline-text-4" id="text-orgd3792ce">
<pre class="example" id="org83935ff">
less - opposite of more

- 空格键  向下翻动一页
- [pagedowm] 向下翻动一页
- [pageup] 向上翻动一页
- /字符串 向下查找字符串的功能
- ?字符串 向上查找字符串
- n 重复前一个查找
- N 反向重复前一个查找
- g 前进到这个文件内容的第一行
- G 前进到这个文件内容的最后一行
- q 结束命令
</pre>
</div>
</div>
</div>
<div id="outline-container-org6a54d79" class="outline-3">
<h3 id="org6a54d79">数据截取</h3>
<div class="outline-text-3" id="text-org6a54d79">
</div>
<div id="outline-container-orge88634a" class="outline-4">
<h4 id="orge88634a">截取前几行：head<a id="org1ee176b"></a></h4>
<div class="outline-text-4" id="text-orge88634a">
<pre class="example" id="org87f3a28">
head - output the first part of files

head [-n number] 文件名

n: 后面接数字，代表显示几行的意思；

- 如果没有 -n 参数，默认前十行；
- number 可以是负数，如果是负数，表示不截取最后 number 行数据，其余截取；
</pre>
</div>
</div>
<div id="outline-container-orgf052e50" class="outline-4">
<h4 id="orgf052e50">截取后几行：tail<a id="org8cfc64a"></a></h4>
<div class="outline-text-4" id="text-orgf052e50">
<pre class="example" id="org9dc5cf7">
tail - output the last part of files

tail [-n number] 文件名

-n: 后面接数字，代表显示几行的意思；
-t: 表示持续刷新显示后面所接文件中的内容，要等到按下 [ctrl]-c 才会结束；

- 如果没有 -n 参数，默认后十行；
- number 前面可以加 + 字符，表示从 number 行开始截取；
</pre>
</div>
</div>
</div>
<div id="outline-container-org6762a51" class="outline-3">
<h3 id="org6762a51">非纯文本文件：od<a id="org656d63d"></a></h3>
<div class="outline-text-3" id="text-org6762a51">
<pre class="example" id="org9dafe19">
od - dump files in octal and other formats

od [-t TYPE] 文件

-t: 后面接各种类型的输出，例如：

a: 利用默认的字符输出；
c: 使用 ASCII 字符来输出；
d[size]: 利用十进制（decimal）来输出数据，每个整数占用 size Bytes；
f[size]: 利用浮点数值（floating）来输出数据，每个数占用 size Bytes；
o[size]: 利用八进制（octal）来输出数据，每个整数占用 size Bytes；
x[size]: 利用十六进制（hexadecimal）来输出数据，每个整数占用 size Bytes；
</pre>
</div>
</div>
<div id="outline-container-orgbbb71e9" class="outline-3">
<h3 id="orgbbb71e9">修改文件时间或创建新文件：touch<a id="orgfe1292c"></a></h3>
<div class="outline-text-3" id="text-orgbbb71e9">
<ul class="org-ul">
<li>文件有三个时间，修改时间、状态时间、读取时间<br></li>
<li>当文件内容修改时，修改时间（mtime, modification time）会更新; 当文件状态更新时，状态时间（ctime, status time）会更新; 当文件内容被读取时，读取时间（atime, access time）会更新；<br></li>
<li><p>
在默认情况下，如果 touch 后面指定的文件存在，则改文件的三个时间都会更新为目前的时间；如果该文件不存在，则会主动创建一个该名字的文件；<br>
</p>

<pre class="example" id="orga65af44">
touch [-acdmt] file

-a: 仅自定义 access time；
-c: 仅修改文件的时间，若该文件不存在则不建立新文件；
-d: 后面可以接欲自定义的日期而不用目前的日期，也可以使用 --date="日期或时间"；
-m: 仅修改 mtime；
-t: 后面可以接欲自定义的时间而不用目前的时间，格式为 [YYYYMMDDhhmm]；
</pre></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org9e77ea2" class="outline-2">
<h2 id="org9e77ea2">文件与目录的默认权限与隐藏权限</h2>
<div class="outline-text-2" id="text-org9e77ea2">
</div>
<div id="outline-container-orgdf5fa29" class="outline-3">
<h3 id="orgdf5fa29">文件默认权限：umask<a id="org737691d"></a></h3>
</div>
<div id="outline-container-orgea9b2f3" class="outline-3">
<h3 id="orgea9b2f3">文件隐藏属性</h3>
<div class="outline-text-3" id="text-orgea9b2f3">
</div>
<div id="outline-container-org87635e3" class="outline-4">
<h4 id="org87635e3">chattr</h4>
</div>
<div id="outline-container-org92c5281" class="outline-4">
<h4 id="org92c5281">lsattr</h4>
</div>
</div>
<div id="outline-container-orgb5b0f3a" class="outline-3">
<h3 id="orgb5b0f3a">文件特殊权限：SUID、SGID、SBIT</h3>
</div>
<div id="outline-container-org69e421a" class="outline-3">
<h3 id="org69e421a">观察文件类型：file<a id="org75fc778"></a></h3>
<div class="outline-text-3" id="text-org69e421a">
<pre class="example" id="orgce6b36b">
file — determine file type
</pre>
</div>
</div>
</div>
<div id="outline-container-org0ece2d1" class="outline-2">
<h2 id="org0ece2d1">命令与文件的查找<a id="org620d380"></a></h2>
<div class="outline-text-2" id="text-org0ece2d1">
</div>
<div id="outline-container-org164ba15" class="outline-3">
<h3 id="org164ba15">脚本文件的查找</h3>
<div class="outline-text-3" id="text-org164ba15">
</div>
<div id="outline-container-orgc23ff0f" class="outline-4">
<h4 id="orgc23ff0f">查找执行文件：which<a id="org9672695"></a></h4>
<div class="outline-text-4" id="text-orgc23ff0f">
<pre class="example" id="orgb4f19d2">
which [-a] command

-a: 将所有由 PATH 目录中可以找到的命令列出，而不止第一个被找到的命令名称；
</pre>
</div>
</div>
<div id="outline-container-org545389b" class="outline-4">
<h4 id="org545389b">查找二进制程序、代码等相关文件路径：whereis<a id="orgc522915"></a></h4>
</div>
</div>
<div id="outline-container-org462a915" class="outline-3">
<h3 id="org462a915">文件的查找</h3>
<div class="outline-text-3" id="text-org462a915">
<p>
再来谈一谈怎么查找文件吧！在 Linux 下面也有相当优异的查找命令，通常 find 不很常用，因为速度慢之外， 也很影响硬盘！一般我们都是先使用 whereis 或者是 locate 来检查，如果真的找不到了，才以 find 来查找。为什么？因为 whereis 只找系统中某些特定目录下面的文件而已，locate 则是利用数据库来查找文件名，当然两者就相当的快速， 并且没有实际查找硬盘的文件系统状态，比较省时间。<br>
</p>
</div>
<div id="outline-container-org6ae0eb9" class="outline-4">
<h4 id="org6ae0eb9">查找文件：whereis<a id="org544f062"></a></h4>
<div class="outline-text-4" id="text-org6ae0eb9">
<pre class="example" id="orgbd70b11">
whereis [-bmsu] 文件或目录名

-l: 可以列出 whereis 会去查询的几个主要目录；
-b: 只找 binary（二进制）格式的文件；
-m: 只找在说明文件 manual 路径下的文件；
-s: 只找 source 源文件；
-u: 查找不在上述三个项目当中的其他特殊文件；
</pre>
</div>
</div>
<div id="outline-container-orgda9d0bd" class="outline-4">
<h4 id="orgda9d0bd">查找符合条件的文档：locate/updatedb<a id="org471c26a"></a></h4>
<div class="outline-text-4" id="text-orgda9d0bd">
<pre class="example" id="org57bd2cf">
locate [-ir] keyword

-i: 忽略大小写的差异；
-c: 不输出文件名，仅计算找到的文件数量；
-l: 仅输出几行的意思，例如输出五行则是 -l 5；
-S: 输出 locate 所使用的数据库文件的相关信息，包括该数据库记录的文件/目录数量等；
-r: 后面可接正则表达式的显示方式；
</pre>

<p>
locate 寻找的数据是由已建立的数据库/var/lib/mlocate/里面的数据所查找到的，所以不在直接再去硬盘当中读取数据，当然是很快速的。<br>
</p>

<p>
不同发行版数据库的更新频率不同，如果想手动更新数据库，可以使用 updatedb 这个命令。<br>
</p>

<p>
update 命令会去读取 /etc/updatedb.conf 这个配置文件，然后再去硬盘里面进行查找文件名的操作，最后就更新整个数据库文件。因为 updatedb 会去查找硬盘，所以当你执行 updatedb 时，可能会等待数分钟的时间。<br>
</p>
</div>
</div>
<div id="outline-container-org9c40dbf" class="outline-4">
<h4 id="org9c40dbf">指定目录下查找文件：find<a id="org0b9d28f"></a></h4>
<div class="outline-text-4" id="text-org9c40dbf">
<pre class="example" id="org0be2a21">
find - search for files in a directory hierarchy
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: L.M.haoran</p>
<p class="date">Created: 2023-02-01</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
