<!DOCTYPE html>
<html lang="zh">
<head>
<!-- 2022-11-26 -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>WIKI-正向代理与反向代理的区别</title>
<meta name="author" content="Haoran Liu" />
<meta name="description" content="Copyright © 2022, Haoran Liu, all rights reserved." />
<meta name="generator" content="Org Mode" />
<link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
           <link rel="stylesheet" href="static/css/org.css" type="text/css"  />
           <script type="module" src="static/js/main.js" defer></script>
</head>
<body>
<div id="content" class="content">
<h1 class="title">WIKI-正向代理与反向代理的区别</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org1b00ee9">正向代理与反向代理的区别</a>
<ul>
<li><a href="#org7f14901">概念</a></li>
<li><a href="#orgfa351ed">区别</a></li>
<li><a href="#orgf264548">使用场景</a>
<ul>
<li><a href="#orge6d9810">正向代理</a></li>
<li><a href="#org5f27599">反向代理</a>
<ul>
<li><a href="#org71484af">保护和隐藏原始资源服务器</a></li>
<li><a href="#org6fc9522">负载均衡</a></li>
</ul>
</li>
<li><a href="#orgba891a9">透明代理</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org30fa6bd">参考</a></li>
</ul>
</div>
</div>

<div id="outline-container-org1b00ee9" class="outline-2">
<h2 id="org1b00ee9">正向代理与反向代理的区别</h2>
<div class="outline-text-2" id="text-org1b00ee9">
</div>
<div id="outline-container-org7f14901" class="outline-3">
<h3 id="org7f14901">概念</h3>
<div class="outline-text-3" id="text-org7f14901">
<p>
正向代理是一个位于客户端和目标服务器之间的代理服务器（中间服务器）。为了从原始服务器取得内容，客户端向代理服务器发送一个请求，并且指定目标服务器，之后代理向目标服务器转交并且将获得的内容返回给客户端。正向代理的情况下客户端必须要进行一些特别的设置才能使用。<br>
</p>

<p>
反向代理正好相反。对于客户端来说，反向代理就好像目标服务器。并且客户端不需要进行任何设置。客户端向反向代理发送请求，接着反向代理判断请求走向何处，并将请求转交给客户端，使得这些内容就好似他自己一样，一次客户端并不会感知到反向代理后面的服务，也因此不需要客户端做任何设置，只需要把反向代理服务器当成真正的服务器就好了。<br>
</p>
</div>
</div>
<div id="outline-container-orgfa351ed" class="outline-3">
<h3 id="orgfa351ed">区别</h3>
<div class="outline-text-3" id="text-orgfa351ed">
<p>
正向代理需要你主动设置代理服务器 ip 或者域名进行访问，由设置的服务器 ip 或者域名去获取访问内容并返回；而反向代理不需要你做任何设置，直接访问服务器真实 ip 或者域名，但是服务器内部会自动根据访问内容进行跳转及内容返回，你不知道它最终访问的是哪些机器。<br>
</p>

<p>
正向代理是代理客户端，为客户端收发请求，使真实客户端对服务器不可见；而反向代理是代理服务器端，为服务器收发请求，使真实服务器对客户端不可见。<br>
</p>

<p>
从上面的描述也能看得出来正向代理和反向代理最关键的两点区别：<br>
</p>

<ul class="org-ul">
<li>是否指定目标服务器<br></li>
<li>客户端是否要做设置 下面用一张图来表示两者的差异：<br></li>
</ul>

<img src="./images/正向代理与反向代理.awebp" width="650px" />

<p>
正向代理中，proxy 和 client 同属一个LAN，对 server 透明； 反向代理中，proxy 和 server 同属一个 LAN，对 client 透明。 实际上 proxy 在两种代理中做的事都是代为收发请求和响应，不过从结构上来看正好左右互换了下，所以把前者那种代理方式叫做正向代理，后者叫做反向代理。<br>
</p>

<p>
从用途上来区分：<br>
</p>

<ul class="org-ul">
<li>正向代理：正向代理用途是为了在防火墙内的局域网提供访问internet的途径。另外还可以使用缓冲特性减少网络使用率；<br></li>
<li>反向代理：反向代理的用途是将防火墙后面的服务器提供给internet用户访问。同时还可以完成诸如负载均衡等功能；<br></li>
</ul>

<p>
从安全性来讲：<br>
</p>

<ul class="org-ul">
<li>正向代理：正向代理允许客户端通过它访问任意网站并且隐蔽客户端自身，因此你必须采取安全措施来确保仅为经过授权的客户端提供服务；<br></li>
<li>反向代理：对外是透明的，访问者并不知道自己访问的是代理。对访问者而言，他以为访问的就是原始服务器；<br></li>
</ul>
</div>
</div>
<div id="outline-container-orgf264548" class="outline-3">
<h3 id="orgf264548">使用场景</h3>
<div class="outline-text-3" id="text-orgf264548">
<p>
正向代理的典型用途是为在防火墙内的局域网客户端提供访问Internet的途径。正向代理还可以使用缓冲特性减少网络使用率。反向代理的典型用途是将 防火墙后面的服务器提供给Internet用户访问。反向代理还可以为后端的多台服务器提供负载平衡，或为后端较慢的服务器提供缓冲服务。<br>
</p>
</div>
<div id="outline-container-orge6d9810" class="outline-4">
<h4 id="orge6d9810">正向代理</h4>
<div class="outline-text-4" id="text-orge6d9810">
<p>
从上面的介绍也就可以猜出来正向代理的至少一个功能（俗称翻墙），也即：<br>
</p>

<p>
用户A无法访问 facebook，但是能访问服务器B，而服务器 B 可以访问 facebook。于是用户 A 访问服务器 B，通过服务器 B 去访问 facebook，服务器 B 收到请求后，去访问 facebook，facebook 把响应信息返回给服务器 B，服务器 B 再把响应信息返回给 A。这样，通过代理服务器 B，就实现了翻墙。<br>
</p>
</div>
</div>
<div id="outline-container-org5f27599" class="outline-4">
<h4 id="org5f27599">反向代理</h4>
<div class="outline-text-4" id="text-org5f27599">
<p>
从上面的介绍也可以猜出来反向代理的至少一个功能（比如负载均衡），也即：<br>
</p>

<p>
假设用户A访问 <verbatim>www.somesite.com/something.html</verbatim> ，但 <verbatim>www.somesite.com</verbatim> 上并不存在 <verbatim>something.html</verbatim> 页面，于是接收用户请求的该服务器就偷偷从另外一台服务器上取回来，然后返回给用户，而用户并不知道 <verbatim>something.html</verbatim> 页面究竟位于哪台机器上。<br>
</p>

<p>
反向代理的作用就比较多了，这里简单列举一下：<br>
</p>

<ul class="org-ul">
<li>保护和隐藏原始资源服务器<br></li>
<li>加密和SSL加速<br></li>
<li>负载均衡<br></li>
<li>缓存静态内容<br></li>
<li>压缩<br></li>
<li>减速上传<br></li>
<li>安全<br></li>
<li>外网发布<br></li>
</ul>

<p>
下面做两个简单介绍<br>
</p>
</div>

<div id="outline-container-org71484af" class="outline-5">
<h5 id="org71484af">保护和隐藏原始资源服务器</h5>
<div class="outline-text-5" id="text-org71484af">
<img src="./images/反向代理保护和隐藏原始资源服务器.awebp" width="650px" />

<p>
用户A始终认为它访问的是原始服务器B而不是代理服务器Z，但实用际上反向代理服务器接受用户A的应答，从原始资源服务器B中取得用户A的需求资源，然后发送给用户A。由于防火墙的作用，只允许代理服务器Z访问原始资源服务器B。尽管在这个虚拟的环境下，防火墙和反向代理的共同作用保护了原始资源服务器B，但用户A并不知情。<br>
</p>
</div>
</div>
<div id="outline-container-org6fc9522" class="outline-5">
<h5 id="org6fc9522">负载均衡</h5>
<div class="outline-text-5" id="text-org6fc9522">
<img src="./images/反向代理负载均衡.awebp" width="650px" />

<p>
当反向代理服务器不止一个的时候，我们甚至可以把它们做成集群，当更多的用户访问资源服务器B的时候，让不同的代理服务器Z（x）去应答不同的用户，然后发送不同用户需要的资源。<br>
</p>
</div>
</div>
</div>
<div id="outline-container-orgba891a9" class="outline-4">
<h4 id="orgba891a9">透明代理</h4>
<div class="outline-text-4" id="text-orgba891a9">
<p>
透明代理比较类似正向代理的功能，差别在于客户端根本不知道代理的存在，它改编你的request，并会传送真实IP（使用场景就是公司限制网络的访问）。<br>
</p>

<p>
比如为了工作效率或者安全，A公司屏蔽了QQ软件的使用。A公司的员工接上了网络，但发现无法使用qq。这就是透明代理捣的鬼。公司在内网和外网的中间插入一个透明代理，这个代理会根据规则抓取请求内容，遇到qq的请求我就把这个请求给屏蔽掉，这样就完成了透明屏蔽。当然了，如果你明白原理，就可以自己搞个正向代理来绕过公司的屏蔽。<br>
</p>
</div>
</div>
</div>
</div>
<div id="outline-container-org30fa6bd" class="outline-2">
<h2 id="org30fa6bd">参考</h2>
<div class="outline-text-2" id="text-org30fa6bd">
<div class="reference">
<ul style="list-style: none;">
<li>
<a href="https://juejin.cn/post/6844904064266960903" target="_blank">正向代理与反向代理的区别</a>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Date: 2022-11-26 19:11 Sat</p>
<p class="author">Author: Haoran Liu</p>
<p class="date">Created: 2022-11-26</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
