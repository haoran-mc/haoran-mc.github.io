<!DOCTYPE html>
<html lang="zh">
<head>
<!-- 2022-02-08 Tue 02:51 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>交替打印数字和字母</title>
<meta name="generator" content="Org mode">
<meta name="author" content="L.M.haoran">
<meta name="description" content="Copyright © 2022, L.M.haoran, all rights reserved."
>

                <link rel="stylesheet" href="static/css/org.css" type="text/css"  />
                <script type="module" src="static/js/main.js" defer></script>
                <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
</head>
<body>
<div id="content">
<h1 class="title">交替打印数字和字母</h1>
<p>
<b>问题描述</b><br>
</p>

<p>
使用两个 <code>goroutine</code> 交替打印序列，一个 <code>goroutine</code> 打印数字， 另外一个 <code>goroutine</code> 打印字母， 最终效果如下：<br>
</p>

<div class="org-src-container">
<pre class="src src-bash"><span style="color: #d75fd7;">12AB34CD56EF78GH910IJ1112KL1314MN1516OP1718QR1920ST2122UV2324WX2526YZ2728</span>
</pre>
</div>

<p>
<b>解题思路</b><br>
</p>

<p>
问题很简单，使用 <code>channel</code> 来控制打印的进度。使用两个 <code>channel</code> ，来分别控制数字和字母的打印序列， 数字打印完成后通过 <code>channel</code> 通知字母打印, 字母打印完成后通知数字打印，然后周而复始的工作。<br>
</p>

<p>
<b>代码参考</b><br>
</p>

<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">package</span> main

<span style="color: #268bd2; font-weight: bold;">import</span> (
    <span style="color: #2aa198;">"fmt"</span>
    <span style="color: #2aa198;">"sync"</span>
)

<span style="color: #268bd2; font-weight: bold;">func</span> <span style="color: #d75fd7; font-weight: bold;">main</span>() {
    <span style="color: #8787d7;">letter</span>, <span style="color: #8787d7;">number</span> := <span style="color: #268bd2;">make</span>(<span style="color: #268bd2; font-weight: bold;">chan</span> <span style="color: #df005f; font-weight: bold;">bool</span>), <span style="color: #268bd2;">make</span>(<span style="color: #268bd2; font-weight: bold;">chan</span> <span style="color: #df005f; font-weight: bold;">bool</span>)
    <span style="color: #8787d7;">wait</span> := <span style="color: #df005f; font-weight: bold;">sync.WaitGroup</span>{}

    <span style="color: #268bd2; font-weight: bold;">go</span> <span style="color: #268bd2; font-weight: bold;">func</span>() {
        <span style="color: #8787d7;">i</span> := <span style="color: #d75fd7;">1</span>
        <span style="color: #268bd2; font-weight: bold;">for</span> {
            <span style="color: #268bd2; font-weight: bold;">select</span> {
            <span style="color: #268bd2; font-weight: bold;">case</span> &lt;-number:
                fmt.<span style="color: #d75fd7; font-weight: bold;">Print</span>(i)
                i++
                fmt.<span style="color: #d75fd7; font-weight: bold;">Print</span>(i)
                i++
                letter &lt;- <span style="color: #d75fd7;">true</span>
            }
        }
    }()

    wait.<span style="color: #d75fd7; font-weight: bold;">Add</span>(<span style="color: #d75fd7;">1</span>)

    <span style="color: #268bd2; font-weight: bold;">go</span> <span style="color: #268bd2; font-weight: bold;">func</span>(<span style="color: #8787d7;">wait</span> *<span style="color: #df005f; font-weight: bold;">sync.WaitGroup</span>) {
        <span style="color: #8787d7;">i</span> := <span style="color: #2aa198;">'A'</span>
        <span style="color: #268bd2; font-weight: bold;">for</span> {
            <span style="color: #268bd2; font-weight: bold;">select</span> {
            <span style="color: #268bd2; font-weight: bold;">case</span> &lt;-letter:
                <span style="color: #268bd2; font-weight: bold;">if</span> i &gt;= <span style="color: #2aa198;">'Z'</span> {
                    wait.<span style="color: #d75fd7; font-weight: bold;">Done</span>()
                    <span style="color: #268bd2; font-weight: bold;">return</span>
                }

                fmt.<span style="color: #d75fd7; font-weight: bold;">Print</span>(<span style="color: #d75fd7; font-weight: bold;">string</span>(i))
                i++
                fmt.<span style="color: #d75fd7; font-weight: bold;">Print</span>(<span style="color: #d75fd7; font-weight: bold;">string</span>(i))
                i++
                number &lt;- <span style="color: #d75fd7;">true</span>
            }
        }
    }(&amp;wait)

    number &lt;- <span style="color: #d75fd7;">true</span>
    wait.<span style="color: #d75fd7; font-weight: bold;">Wait</span>()
}
</pre>
</div>

<p>
<b>代码解析</b><br>
</p>

<p>
这里用到了两个 <code>channel</code> 负责通知， <code>letter</code> 负责通知打印字母的 <code>goroutine</code> 来打印字母， <code>number</code> 用来通知打印数字的 <code>goroutine</code> 打印数字。<br>
</p>

<p>
<code>wait</code> 用来等待字母打印完成后退出循环。<br>
</p>
</div>
<div id="postamble" class="status">
<p class="date">Date: 2022-02-01 15:02 Tue</p>
<p class="author">Author: L.M.haoran</p>
<p class="date">Created: 2022-02-08 Tue 02:51</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
