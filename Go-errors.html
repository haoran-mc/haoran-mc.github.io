<!DOCTYPE html>
<html lang="zh">
<head>
<!-- 2022-02-10 Thu 03:22 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>ERRORS</title>
<meta name="generator" content="Org mode">
<meta name="author" content="L.M.haoran">
<meta name="description" content="Copyright © 2022, L.M.haoran, all rights reserved."
>

                <link rel="stylesheet" href="static/css/org.css" type="text/css"  />
                <script type="module" src="static/js/main.js" defer></script>
                <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
</head>
<body>
<div id="content">
<h1 class="title">ERRORS</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org6c44031">Introduction</a></li>
<li><a href="#org7e5cef7">func New</a></li>
</ul>
</div>
</div>

<div id="outline-container-org6c44031" class="outline-2">
<h2 id="org6c44031">Introduction</h2>
<div class="outline-text-2" id="text-org6c44031">
<p>
errors 包实现了创建错误值的函数。<br>
</p>

<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">package</span> errors_test

<span style="color: #268bd2; font-weight: bold;">import</span> (
    <span style="color: #2aa198;">"fmt"</span>
    <span style="color: #2aa198;">"time"</span>
)

<span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">MyError is an error implementation that includes a time and message.</span>
<span style="color: #268bd2; font-weight: bold;">type</span> <span style="color: #df005f; font-weight: bold;">MyError</span> <span style="color: #268bd2; font-weight: bold;">struct</span> {
    When <span style="color: #df005f; font-weight: bold;">time.Time</span>
    What <span style="color: #df005f; font-weight: bold;">string</span>
}

<span style="color: #268bd2; font-weight: bold;">func</span> (<span style="color: #8787d7;">e</span> <span style="color: #df005f; font-weight: bold;">MyError</span>) <span style="color: #d75fd7; font-weight: bold;">Error</span>() <span style="color: #df005f; font-weight: bold;">string</span> {
    <span style="color: #268bd2; font-weight: bold;">return</span> fmt.<span style="color: #d75fd7; font-weight: bold;">Sprintf</span>(<span style="color: #2aa198;">"%v: %v"</span>, e.When, e.What)
}

<span style="color: #268bd2; font-weight: bold;">func</span> <span style="color: #d75fd7; font-weight: bold;">oops</span>() <span style="color: #df005f; font-weight: bold;">error</span> {
    <span style="color: #268bd2; font-weight: bold;">return</span> MyError {
        time.<span style="color: #d75fd7; font-weight: bold;">Date</span>(<span style="color: #d75fd7;">1989</span>, <span style="color: #d75fd7;">3</span>, <span style="color: #d75fd7;">15</span>, <span style="color: #d75fd7;">22</span>, <span style="color: #d75fd7;">30</span>, <span style="color: #d75fd7;">0</span>, <span style="color: #d75fd7;">0</span>, time.UTC),
            <span style="color: #2aa198;">"the file system has gone away"</span>,
        }
}

<span style="color: #268bd2; font-weight: bold;">func</span> <span style="color: #d75fd7; font-weight: bold;">Example</span>() {
    <span style="color: #268bd2; font-weight: bold;">if</span> <span style="color: #8787d7;">err</span> := <span style="color: #d75fd7; font-weight: bold;">oops</span>(); err != <span style="color: #d75fd7;">nil</span> {
        fmt.<span style="color: #d75fd7; font-weight: bold;">Println</span>(err)
    }
    <span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">Output: 1989-03-15 22:30:00 +0000 UTC: the file system has gone away</span>
}
</pre>
</div>
</div>
</div>
<div id="outline-container-org7e5cef7" class="outline-2">
<h2 id="org7e5cef7">func New</h2>
<div class="outline-text-2" id="text-org7e5cef7">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">func</span> <span style="color: #d75fd7; font-weight: bold;">New</span>(<span style="color: #8787d7;">text</span> <span style="color: #df005f; font-weight: bold;">string</span>) <span style="color: #df005f; font-weight: bold;">error</span>
</pre>
</div>

<p>
使用字符串创建一个错误,请类比fmt包的Errorf方法，差不多可以认为是New(fmt.Sprintf(&#x2026;))。<br>
</p>

<div class="org-src-container">
<pre class="src src-go"><span style="color: #8787d7;">err</span> := errors.<span style="color: #d75fd7; font-weight: bold;">New</span>(<span style="color: #2aa198;">"emit macho dwarf: elf header corrupted"</span>)
<span style="color: #268bd2; font-weight: bold;">if</span> err != <span style="color: #d75fd7;">nil</span> {
        fmt.<span style="color: #d75fd7; font-weight: bold;">Print</span>(err)
}
</pre>
</div>

<p>
Output:<br>
</p>

<pre class="example" id="orge32f552">
emit macho dwarf: elf header corrupted
</pre>

<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">const</span> <span style="color: #d75fd7;">name</span>, <span style="color: #d75fd7;">id</span> = <span style="color: #2aa198;">"bimmler"</span>, <span style="color: #d75fd7;">17</span>
<span style="color: #8787d7;">err</span> := fmt.<span style="color: #d75fd7; font-weight: bold;">Errorf</span>(<span style="color: #2aa198;">"user %q (id %d) not found"</span>, name, id)
<span style="color: #268bd2; font-weight: bold;">if</span> err != <span style="color: #d75fd7;">nil</span> {
        fmt.<span style="color: #d75fd7; font-weight: bold;">Print</span>(err)
}
</pre>
</div>

<p>
Output:<br>
</p>

<pre class="example" id="orgf5f5612">
user "bimmler" (id 17) not found
</pre>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Date: 2022-02-10 02:02 Thu</p>
<p class="author">Author: L.M.haoran</p>
<p class="date">Created: 2022-02-10 Thu 03:22</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
