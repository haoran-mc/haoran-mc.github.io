<!DOCTYPE html>
<html lang="zh">
<head>
<!-- 2022-02-11 Fri 03:41 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>ENCODING_JSON</title>
<meta name="generator" content="Org mode">
<meta name="author" content="L.M.haoran">
<meta name="description" content="Copyright © 2022, L.M.haoran, all rights reserved."
>

                <link rel="stylesheet" href="static/css/org.css" type="text/css"  />
                <script type="module" src="static/js/main.js" defer></script>
                <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "0em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body>
<div id="content">
<h1 class="title">ENCODING_JSON</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgae0f564">type InvalidUTF8Error</a>
<ul>
<li><a href="#orgc9c2a0a">func (*InvalidUTF8Error) Error</a></li>
</ul>
</li>
<li><a href="#orga174c08">type InvalidUnmarshalError</a>
<ul>
<li><a href="#orgc26a9cc">func (*InvalidUnmarshalError) Error</a></li>
</ul>
</li>
<li><a href="#orge5085e4">type SyntaxError</a>
<ul>
<li><a href="#org3ddae15">func (*SyntaxError) Error</a></li>
</ul>
</li>
<li><a href="#orge9c61dd">type UnmarshalFieldError</a>
<ul>
<li><a href="#org662153f">func (*UnmarshalFieldError) Error</a></li>
</ul>
</li>
<li><a href="#org0d59aaa">type UnmarshalTypeError</a>
<ul>
<li><a href="#org58afd7f">func (*UnmarshalTypeError) Error</a></li>
</ul>
</li>
<li><a href="#org35c66b7">type UnsupportedTypeError</a>
<ul>
<li><a href="#org53dc472">func (*UnsupportedTypeError) Error</a></li>
</ul>
</li>
<li><a href="#orgeaf7eaf">type UnsupportedValueError</a>
<ul>
<li><a href="#orgf242c08">func (*UnsupportedValueError) Error</a></li>
</ul>
</li>
<li><a href="#org8e1e1bd">type MarshalerError</a></li>
<li><a href="#org0adf2a8">func (*MarshalerError) Error</a></li>
<li><a href="#orgfab7ab9">type Number</a>
<ul>
<li><a href="#orgefd80be">func (Number) Int64</a></li>
<li><a href="#org066aac5">func (Number) Float64</a></li>
<li><a href="#orgf94491f">func (Number) String</a></li>
</ul>
</li>
<li><a href="#org8dcb81c">type RawMessage</a>
<ul>
<li><a href="#org49b85c4">func (*RawMessage) MarshalJSON</a></li>
<li><a href="#org03bed4a">func (*RawMessage) UnmarshalJSON</a></li>
</ul>
</li>
<li><a href="#orge9225b9">type Marshaler</a></li>
<li><a href="#orgb2439d9">type Unmarshaler</a></li>
<li><a href="#org07d7cde">func Compact</a></li>
<li><a href="#orge95a60a">func HTMLEscape</a></li>
<li><a href="#org7c17220">func Indent</a></li>
<li><a href="#org500a100">func Marshal</a></li>
<li><a href="#org2893aa4">func MarshalIndent</a></li>
<li><a href="#org1e069ee">func Unmarshal</a></li>
<li><a href="#org70373a9">type Decoder</a>
<ul>
<li><a href="#org5a3370c">func NewDecoder</a></li>
<li><a href="#orgb0585d8">func (*Decoder) Buffered</a></li>
<li><a href="#orgdb83b21">func (*Decoder) UseNumber</a></li>
<li><a href="#orgf31c4fb">func (*Decoder) Decode</a></li>
</ul>
</li>
<li><a href="#org5530126">type Encoder</a>
<ul>
<li><a href="#orgca7ff2f">func NewEncoder</a></li>
<li><a href="#orga9038ba">func (*Encoder) Encode</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-orgae0f564" class="outline-2">
<h2 id="orgae0f564">type InvalidUTF8Error</h2>
<div class="outline-text-2" id="text-orgae0f564">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">type</span> <span style="color: #df005f; font-weight: bold;">InvalidUTF8Error</span> <span style="color: #268bd2; font-weight: bold;">struct</span> {
    S <span style="color: #df005f; font-weight: bold;">string</span> <span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">&#24341;&#21457;&#38169;&#35823;&#30340;&#23436;&#25972;&#23383;&#31526;&#20018;</span>
}
</pre>
</div>

<p>
Go 1.2之前版本，当试图编码一个包含非法utf-8序列的字符串时会返回本错误。Go 1.2及之后版本，编码器会强行将非法字节替换为unicode字符U+FFFD来使字符串合法。本错误已不会再出现，但出于向后兼容考虑而保留。<br>
</p>
</div>
<div id="outline-container-orgc9c2a0a" class="outline-3">
<h3 id="orgc9c2a0a">func (*InvalidUTF8Error) Error</h3>
<div class="outline-text-3" id="text-orgc9c2a0a">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">func</span> (<span style="color: #8787d7;">e</span> *<span style="color: #df005f; font-weight: bold;">InvalidUTF8Error</span>) <span style="color: #d75fd7; font-weight: bold;">Error</span>() <span style="color: #df005f; font-weight: bold;">string</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orga174c08" class="outline-2">
<h2 id="orga174c08">type InvalidUnmarshalError</h2>
<div class="outline-text-2" id="text-orga174c08">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">type</span> <span style="color: #df005f; font-weight: bold;">InvalidUnmarshalError</span> <span style="color: #268bd2; font-weight: bold;">struct</span> {
    Type <span style="color: #df005f; font-weight: bold;">reflect.Type</span>
}
</pre>
</div>

<p>
InvalidUnmarshalError用于描述一个传递给解码器的非法参数。（解码器的参数必须是非nil指针）<br>
</p>
</div>
<div id="outline-container-orgc26a9cc" class="outline-3">
<h3 id="orgc26a9cc">func (*InvalidUnmarshalError) Error</h3>
<div class="outline-text-3" id="text-orgc26a9cc">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">func</span> (<span style="color: #8787d7;">e</span> *<span style="color: #df005f; font-weight: bold;">InvalidUnmarshalError</span>) <span style="color: #d75fd7; font-weight: bold;">Error</span>() <span style="color: #df005f; font-weight: bold;">string</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orge5085e4" class="outline-2">
<h2 id="orge5085e4">type SyntaxError</h2>
<div class="outline-text-2" id="text-orge5085e4">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">type</span> <span style="color: #df005f; font-weight: bold;">SyntaxError</span> <span style="color: #268bd2; font-weight: bold;">struct</span> {
    Offset <span style="color: #df005f; font-weight: bold;">int64</span> <span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">&#22312;&#35835;&#21462;Offset&#20010;&#23383;&#33410;&#21518;&#20986;&#29616;&#38169;&#35823;</span>
    <span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">&#20869;&#21547;&#38544;&#34255;&#25110;&#38750;&#23548;&#20986;&#23383;&#27573;</span>
}
</pre>
</div>

<p>
SyntaxError表示一个json语法错误。<br>
</p>
</div>
<div id="outline-container-org3ddae15" class="outline-3">
<h3 id="org3ddae15">func (*SyntaxError) Error</h3>
<div class="outline-text-3" id="text-org3ddae15">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">func</span> (<span style="color: #8787d7;">e</span> *<span style="color: #df005f; font-weight: bold;">SyntaxError</span>) <span style="color: #d75fd7; font-weight: bold;">Error</span>() <span style="color: #df005f; font-weight: bold;">string</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orge9c61dd" class="outline-2">
<h2 id="orge9c61dd">type UnmarshalFieldError</h2>
<div class="outline-text-2" id="text-orge9c61dd">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">type</span> <span style="color: #df005f; font-weight: bold;">UnmarshalFieldError</span> <span style="color: #268bd2; font-weight: bold;">struct</span> {
    Key   <span style="color: #df005f; font-weight: bold;">string</span>
    Type  <span style="color: #df005f; font-weight: bold;">reflect.Type</span>
    Field <span style="color: #df005f; font-weight: bold;">reflect.StructField</span>
}
</pre>
</div>

<p>
UnmarshalFieldError表示一个json对象的键指向一个非导出字段。（因此不能写入；已不再使用，出于兼容保留）<br>
</p>
</div>
<div id="outline-container-org662153f" class="outline-3">
<h3 id="org662153f">func (*UnmarshalFieldError) Error</h3>
<div class="outline-text-3" id="text-org662153f">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">func</span> (<span style="color: #8787d7;">e</span> *<span style="color: #df005f; font-weight: bold;">UnmarshalFieldError</span>) <span style="color: #d75fd7; font-weight: bold;">Error</span>() <span style="color: #df005f; font-weight: bold;">string</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org0d59aaa" class="outline-2">
<h2 id="org0d59aaa">type UnmarshalTypeError</h2>
<div class="outline-text-2" id="text-org0d59aaa">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">type</span> <span style="color: #df005f; font-weight: bold;">UnmarshalTypeError</span> <span style="color: #268bd2; font-weight: bold;">struct</span> {
    Value <span style="color: #df005f; font-weight: bold;">string</span>       <span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">&#25551;&#36848;json&#20540;&#65306;"bool", "array", "number -5"</span>
    Type  <span style="color: #df005f; font-weight: bold;">reflect.Type</span> <span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">&#19981;&#33021;&#36716;&#21270;&#20026;&#30340;go&#31867;&#22411;</span>
}
</pre>
</div>

<p>
UnmarshalTypeError表示一个json值不能转化为特定的go类型的值。<br>
</p>
</div>
<div id="outline-container-org58afd7f" class="outline-3">
<h3 id="org58afd7f">func (*UnmarshalTypeError) Error</h3>
<div class="outline-text-3" id="text-org58afd7f">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">func</span> (<span style="color: #8787d7;">e</span> *<span style="color: #df005f; font-weight: bold;">UnmarshalTypeError</span>) <span style="color: #d75fd7; font-weight: bold;">Error</span>() <span style="color: #df005f; font-weight: bold;">string</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org35c66b7" class="outline-2">
<h2 id="org35c66b7">type UnsupportedTypeError</h2>
<div class="outline-text-2" id="text-org35c66b7">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">type</span> <span style="color: #df005f; font-weight: bold;">UnsupportedTypeError</span> <span style="color: #268bd2; font-weight: bold;">struct</span> {
    Type <span style="color: #df005f; font-weight: bold;">reflect.Type</span>
}
</pre>
</div>

<p>
UnsupportedTypeError表示试图编码一个不支持类型的值。<br>
</p>
</div>
<div id="outline-container-org53dc472" class="outline-3">
<h3 id="org53dc472">func (*UnsupportedTypeError) Error</h3>
<div class="outline-text-3" id="text-org53dc472">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">func</span> (<span style="color: #8787d7;">e</span> *<span style="color: #df005f; font-weight: bold;">UnsupportedTypeError</span>) <span style="color: #d75fd7; font-weight: bold;">Error</span>() <span style="color: #df005f; font-weight: bold;">string</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgeaf7eaf" class="outline-2">
<h2 id="orgeaf7eaf">type UnsupportedValueError</h2>
<div class="outline-text-2" id="text-orgeaf7eaf">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">type</span> <span style="color: #df005f; font-weight: bold;">UnsupportedValueError</span> <span style="color: #268bd2; font-weight: bold;">struct</span> {
    Value <span style="color: #df005f; font-weight: bold;">reflect.Value</span>
    Str   <span style="color: #df005f; font-weight: bold;">string</span>
}
</pre>
</div>
</div>
<div id="outline-container-orgf242c08" class="outline-3">
<h3 id="orgf242c08">func (*UnsupportedValueError) Error</h3>
<div class="outline-text-3" id="text-orgf242c08">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">func</span> (<span style="color: #8787d7;">e</span> *<span style="color: #df005f; font-weight: bold;">UnsupportedValueError</span>) <span style="color: #d75fd7; font-weight: bold;">Error</span>() <span style="color: #df005f; font-weight: bold;">string</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org8e1e1bd" class="outline-2">
<h2 id="org8e1e1bd">type MarshalerError</h2>
<div class="outline-text-2" id="text-org8e1e1bd">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">type</span> <span style="color: #df005f; font-weight: bold;">MarshalerError</span> <span style="color: #268bd2; font-weight: bold;">struct</span> {
    Type <span style="color: #df005f; font-weight: bold;">reflect.Type</span>
    Err  <span style="color: #df005f; font-weight: bold;">error</span>
}
</pre>
</div>
</div>
</div>
<div id="outline-container-org0adf2a8" class="outline-2">
<h2 id="org0adf2a8">func (*MarshalerError) Error</h2>
<div class="outline-text-2" id="text-org0adf2a8">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">func</span> (<span style="color: #8787d7;">e</span> *<span style="color: #df005f; font-weight: bold;">MarshalerError</span>) <span style="color: #d75fd7; font-weight: bold;">Error</span>() <span style="color: #df005f; font-weight: bold;">string</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgfab7ab9" class="outline-2">
<h2 id="orgfab7ab9">type Number</h2>
<div class="outline-text-2" id="text-orgfab7ab9">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">type</span> <span style="color: #df005f; font-weight: bold;">Number</span> <span style="color: #df005f; font-weight: bold;">string</span>
</pre>
</div>

<p>
Number类型代表一个json数字字面量。<br>
</p>
</div>
<div id="outline-container-orgefd80be" class="outline-3">
<h3 id="orgefd80be">func (Number) Int64</h3>
<div class="outline-text-3" id="text-orgefd80be">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">func</span> (<span style="color: #8787d7;">n</span> <span style="color: #df005f; font-weight: bold;">Number</span>) <span style="color: #d75fd7; font-weight: bold;">Int64</span>() (<span style="color: #df005f; font-weight: bold;">int64</span>, <span style="color: #df005f; font-weight: bold;">error</span>)
</pre>
</div>

<p>
将该数字作为int64类型返回。<br>
</p>
</div>
</div>
<div id="outline-container-org066aac5" class="outline-3">
<h3 id="org066aac5">func (Number) Float64</h3>
<div class="outline-text-3" id="text-org066aac5">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">func</span> (<span style="color: #8787d7;">n</span> <span style="color: #df005f; font-weight: bold;">Number</span>) <span style="color: #d75fd7; font-weight: bold;">Float64</span>() (<span style="color: #df005f; font-weight: bold;">float64</span>, <span style="color: #df005f; font-weight: bold;">error</span>)
</pre>
</div>

<p>
将该数字作为float64类型返回。<br>
</p>
</div>
</div>
<div id="outline-container-orgf94491f" class="outline-3">
<h3 id="orgf94491f">func (Number) String</h3>
<div class="outline-text-3" id="text-orgf94491f">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">func</span> (<span style="color: #8787d7;">n</span> <span style="color: #df005f; font-weight: bold;">Number</span>) <span style="color: #d75fd7; font-weight: bold;">String</span>() <span style="color: #df005f; font-weight: bold;">string</span>
</pre>
</div>

<p>
返回该数字的字面值文本表示。<br>
</p>
</div>
</div>
</div>
<div id="outline-container-org8dcb81c" class="outline-2">
<h2 id="org8dcb81c">type RawMessage</h2>
<div class="outline-text-2" id="text-org8dcb81c">
<div class="org-src-container">
<pre class="src src-g0">type RawMessage []byte
</pre>
</div>

<p>
RawMessage类型是一个保持原本编码的json对象。本类型实现了Marshaler和Unmarshaler接口，用于延迟json的解码或者预计算json的编码。<br>
</p>

<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">type</span> <span style="color: #df005f; font-weight: bold;">Color</span> <span style="color: #268bd2; font-weight: bold;">struct</span> {
    Space <span style="color: #df005f; font-weight: bold;">string</span>
    Point <span style="color: #df005f; font-weight: bold;">json.RawMessage</span> <span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">delay parsing until we know the color space</span>
}
<span style="color: #268bd2; font-weight: bold;">type</span> <span style="color: #df005f; font-weight: bold;">RGB</span> <span style="color: #268bd2; font-weight: bold;">struct</span> {
    R   <span style="color: #df005f; font-weight: bold;">uint8</span>
    G   <span style="color: #df005f; font-weight: bold;">uint8</span>
    B   <span style="color: #df005f; font-weight: bold;">uint8</span>
}
<span style="color: #268bd2; font-weight: bold;">type</span> <span style="color: #df005f; font-weight: bold;">YCbCr</span> <span style="color: #268bd2; font-weight: bold;">struct</span> {
    Y   <span style="color: #df005f; font-weight: bold;">uint8</span>
    Cb  <span style="color: #df005f; font-weight: bold;">int8</span>
    Cr  <span style="color: #df005f; font-weight: bold;">int8</span>
}
<span style="color: #268bd2; font-weight: bold;">var</span> <span style="color: #8787d7;">j</span> = []<span style="color: #d75fd7; font-weight: bold;">byte</span>(<span style="color: #2aa198;">`[</span>
<span style="color: #2aa198;">        {"Space": "YCbCr", "Point": {"Y": 255, "Cb": 0, "Cr": -10}},</span>
<span style="color: #2aa198;">        {"Space": "RGB",   "Point": {"R": 98, "G": 218, "B": 255}}</span>
<span style="color: #2aa198;">    ]`</span>)
<span style="color: #268bd2; font-weight: bold;">var</span> <span style="color: #8787d7;">colors</span> []<span style="color: #df005f; font-weight: bold;">Color</span>
<span style="color: #8787d7;">err</span> := json.<span style="color: #d75fd7; font-weight: bold;">Unmarshal</span>(j, &amp;colors)
<span style="color: #268bd2; font-weight: bold;">if</span> err != <span style="color: #d75fd7;">nil</span> {
    log.<span style="color: #d75fd7; font-weight: bold;">Fatalln</span>(<span style="color: #2aa198;">"error:"</span>, err)
}
<span style="color: #268bd2; font-weight: bold;">for</span> <span style="color: #8787d7;">_</span>, <span style="color: #8787d7;">c</span> := <span style="color: #268bd2; font-weight: bold;">range</span> colors {
    <span style="color: #268bd2; font-weight: bold;">var</span> <span style="color: #8787d7;">dst</span> <span style="color: #268bd2; font-weight: bold;">interface</span>{}
    <span style="color: #268bd2; font-weight: bold;">switch</span> c.Space {
    <span style="color: #268bd2; font-weight: bold;">case</span> <span style="color: #2aa198;">"RGB"</span>:
        dst = <span style="color: #268bd2;">new</span>(<span style="color: #df005f; font-weight: bold;">RGB</span>)
    <span style="color: #268bd2; font-weight: bold;">case</span> <span style="color: #2aa198;">"YCbCr"</span>:
        dst = <span style="color: #268bd2;">new</span>(<span style="color: #df005f; font-weight: bold;">YCbCr</span>)
    }
    <span style="color: #8787d7;">err</span> := json.<span style="color: #d75fd7; font-weight: bold;">Unmarshal</span>(c.Point, dst)
    <span style="color: #268bd2; font-weight: bold;">if</span> err != <span style="color: #d75fd7;">nil</span> {
        log.<span style="color: #d75fd7; font-weight: bold;">Fatalln</span>(<span style="color: #2aa198;">"error:"</span>, err)
    }
    fmt.<span style="color: #d75fd7; font-weight: bold;">Println</span>(c.Space, dst)
    <span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">Output:</span>
    <span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">YCbCr &amp;{255 0 -10}</span>
    <span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">RGB &amp;{98 218 255}</span>
}
</pre>
</div>
</div>
<div id="outline-container-org49b85c4" class="outline-3">
<h3 id="org49b85c4">func (*RawMessage) MarshalJSON</h3>
<div class="outline-text-3" id="text-org49b85c4">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">func</span> (<span style="color: #8787d7;">m</span> *<span style="color: #df005f; font-weight: bold;">RawMessage</span>) <span style="color: #d75fd7; font-weight: bold;">MarshalJSON</span>() ([]<span style="color: #df005f; font-weight: bold;">byte</span>, <span style="color: #df005f; font-weight: bold;">error</span>)
</pre>
</div>

<p>
MarshalJSON返回*m的json编码。<br>
</p>
</div>
</div>
<div id="outline-container-org03bed4a" class="outline-3">
<h3 id="org03bed4a">func (*RawMessage) UnmarshalJSON</h3>
<div class="outline-text-3" id="text-org03bed4a">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">func</span> (<span style="color: #8787d7;">m</span> *<span style="color: #df005f; font-weight: bold;">RawMessage</span>) <span style="color: #d75fd7; font-weight: bold;">UnmarshalJSON</span>(<span style="color: #8787d7;">data</span> []<span style="color: #df005f; font-weight: bold;">byte</span>) <span style="color: #df005f; font-weight: bold;">error</span>
</pre>
</div>

<p>
UnmarshalJSON将*m设为data的一个拷贝。<br>
</p>
</div>
</div>
</div>
<div id="outline-container-orge9225b9" class="outline-2">
<h2 id="orge9225b9">type Marshaler</h2>
<div class="outline-text-2" id="text-orge9225b9">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">type</span> <span style="color: #df005f; font-weight: bold;">Marshaler</span> <span style="color: #268bd2; font-weight: bold;">interface</span> {
    <span style="color: #d75fd7; font-weight: bold;">MarshalJSON</span>() ([]<span style="color: #df005f; font-weight: bold;">byte</span>, <span style="color: #df005f; font-weight: bold;">error</span>)
}
</pre>
</div>

<p>
实现了Marshaler接口的类型可以将自身序列化为合法的json描述。<br>
</p>
</div>
</div>
<div id="outline-container-orgb2439d9" class="outline-2">
<h2 id="orgb2439d9">type Unmarshaler</h2>
<div class="outline-text-2" id="text-orgb2439d9">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">type</span> <span style="color: #df005f; font-weight: bold;">Unmarshaler</span> <span style="color: #268bd2; font-weight: bold;">interface</span> {
    <span style="color: #d75fd7; font-weight: bold;">UnmarshalJSON</span>([]<span style="color: #df005f; font-weight: bold;">byte</span>) <span style="color: #df005f; font-weight: bold;">error</span>
}
</pre>
</div>

<p>
实现了Unmarshaler接口的对象可以将自身的json描述反序列化。该方法可以认为输入是合法的json字符串。如果要在方法返回后保存自身的json数据，必须进行拷贝。<br>
</p>
</div>
</div>
<div id="outline-container-org07d7cde" class="outline-2">
<h2 id="org07d7cde">func Compact</h2>
<div class="outline-text-2" id="text-org07d7cde">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">func</span> <span style="color: #d75fd7; font-weight: bold;">Compact</span>(<span style="color: #8787d7;">dst</span> *<span style="color: #df005f; font-weight: bold;">bytes.Buffer</span>, <span style="color: #8787d7;">src</span> []<span style="color: #df005f; font-weight: bold;">byte</span>) <span style="color: #df005f; font-weight: bold;">error</span>
</pre>
</div>

<p>
Compact函数将json编码的src中无用的空白字符剔除后写入dst。<br>
</p>
</div>
</div>
<div id="outline-container-orge95a60a" class="outline-2">
<h2 id="orge95a60a">func HTMLEscape</h2>
<div class="outline-text-2" id="text-orge95a60a">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">func</span> <span style="color: #d75fd7; font-weight: bold;">HTMLEscape</span>(<span style="color: #8787d7;">dst</span> *<span style="color: #df005f; font-weight: bold;">bytes.Buffer</span>, <span style="color: #8787d7;">src</span> []<span style="color: #df005f; font-weight: bold;">byte</span>)
</pre>
</div>

<p>
HTMLEscape 函数将json编码的src中的&lt;、&gt;、&amp;、U+2028 和U+2029字符替换为\u003c、\u003e、\u0026、\u2028、\u2029 转义字符串，以便json编码可以安全的嵌入HTML的&lt;script&gt;标签里。因为历史原因，网络浏览器不支持在&lt;script&gt;标签中使用标准HTML转义， 因此必须使用另一种json编码方案。<br>
</p>
</div>
</div>
<div id="outline-container-org7c17220" class="outline-2">
<h2 id="org7c17220">func Indent</h2>
<div class="outline-text-2" id="text-org7c17220">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">func</span> <span style="color: #d75fd7; font-weight: bold;">Indent</span>(<span style="color: #8787d7;">dst</span> *<span style="color: #df005f; font-weight: bold;">bytes.Buffer</span>, <span style="color: #8787d7;">src</span> []<span style="color: #df005f; font-weight: bold;">byte</span>, <span style="color: #8787d7;">prefix</span>, <span style="color: #8787d7;">indent</span> <span style="color: #df005f; font-weight: bold;">string</span>) <span style="color: #df005f; font-weight: bold;">error</span>
</pre>
</div>

<p>
Indent函数将json编码的调整缩进之后写入dst。每一个json元素/数组都另起一行开始，以prefix为起始，一或多个indent缩进（数目看嵌套层数）。写入dst的数据起始没有prefix字符，也没有indent字符，最后也不换行，因此可以更好的嵌入其他格式化后的json数据里。<br>
</p>

<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">type</span> <span style="color: #df005f; font-weight: bold;">Road</span> <span style="color: #268bd2; font-weight: bold;">struct</span> {
    Name   <span style="color: #df005f; font-weight: bold;">string</span>
    Number <span style="color: #df005f; font-weight: bold;">int</span>
}
<span style="color: #8787d7;">roads</span> := []<span style="color: #df005f; font-weight: bold;">Road</span>{
    {<span style="color: #2aa198;">"Diamond Fork"</span>, <span style="color: #d75fd7;">29</span>},
    {<span style="color: #2aa198;">"Sheep Creek"</span>, <span style="color: #d75fd7;">51</span>},
}
<span style="color: #8787d7;">b</span>, <span style="color: #8787d7;">err</span> := json.<span style="color: #d75fd7; font-weight: bold;">Marshal</span>(roads)
<span style="color: #268bd2; font-weight: bold;">if</span> err != <span style="color: #d75fd7;">nil</span> {
    log.<span style="color: #d75fd7; font-weight: bold;">Fatal</span>(err)
}
<span style="color: #268bd2; font-weight: bold;">var</span> <span style="color: #8787d7;">out</span> <span style="color: #df005f; font-weight: bold;">bytes.Buffer</span>
json.<span style="color: #d75fd7; font-weight: bold;">Indent</span>(&amp;out, b, <span style="color: #2aa198;">"="</span>, <span style="color: #2aa198;">"\t"</span>)
out.<span style="color: #d75fd7; font-weight: bold;">WriteTo</span>(os.Stdout)
</pre>
</div>

<p>
Output:<br>
</p>

<pre class="example" id="org9f6b8a2">
[
=	{
=		"Name": "Diamond Fork",
=		"Number": 29
=	},
=	{
=		"Name": "Sheep Creek",
=		"Number": 51
=	}
=]
</pre>
</div>
</div>
<div id="outline-container-org500a100" class="outline-2">
<h2 id="org500a100">func Marshal</h2>
<div class="outline-text-2" id="text-org500a100">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">func</span> <span style="color: #d75fd7; font-weight: bold;">Marshal</span>(<span style="color: #8787d7;">v</span> <span style="color: #268bd2; font-weight: bold;">interface</span>{}) ([]<span style="color: #df005f; font-weight: bold;">byte</span>, <span style="color: #df005f; font-weight: bold;">error</span>)
</pre>
</div>

<p>
Marshal函数返回v的json编码。<br>
</p>

<p>
Marshal函数会递归的处理值。如果一个值实现了Marshaler接口切非nil指针，会调用其MarshalJSON方法来生成json编码。nil指针异常并不是严格必需的，但会模拟与UnmarshalJSON的行为类似的必需的异常。<br>
</p>

<p>
否则，Marshal函数使用下面的基于类型的默认编码格式：<br>
</p>

<p>
布尔类型编码为json布尔类型。<br>
</p>

<p>
浮点数、整数和Number类型的值编码为json数字类型。<br>
</p>

<p>
字符串编码为json字符串。角括号"&lt;"和"&gt;"会转义为"\u003c"和"\u003e"以避免某些浏览器吧json输出错误理解为HTML。基于同样的原因，"&amp;"转义为"\u0026"。<br>
</p>

<p>
数组和切片类型的值编码为json数组，但[]byte编码为base64编码字符串，nil切片编码为null。<br>
</p>

<p>
结构体的值编码为json对象。每一个导出字段变成该对象的一个成员，除非：<br>
</p>

<pre class="example" id="org7c6e6c3">
- 字段的标签是"-"
- 字段是空值，而其标签指定了omitempty选项
</pre>

<p>
空值是false、0、""、nil指针、nil接口、长度为0的数组、切片、映射。对象默认键字符串是结构体的字段名，但可以在结构体字段的标签里指定。结构体标签值里的"json"键为键名，后跟可选的逗号和选项，举例如下：<br>
</p>

<div class="org-src-container">
<pre class="src src-go"><span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">&#23383;&#27573;&#34987;&#26412;&#21253;&#24573;&#30053;</span>
Field <span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #2aa198;">`json:"-"`</span>
<span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">&#23383;&#27573;&#22312;json&#37324;&#30340;&#38190;&#20026;"myName"</span>
Field <span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #2aa198;">`json:"myName"`</span>
<span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">&#23383;&#27573;&#22312;json&#37324;&#30340;&#38190;&#20026;"myName"&#19988;&#22914;&#26524;&#23383;&#27573;&#20026;&#31354;&#20540;&#23558;&#22312;&#23545;&#35937;&#20013;&#30465;&#30053;&#25481;</span>
Field <span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #2aa198;">`json:"myName,omitempty"`</span>
<span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">&#23383;&#27573;&#22312;json&#37324;&#30340;&#38190;&#20026;"Field"&#65288;&#40664;&#35748;&#20540;&#65289;&#65292;&#20294;&#22914;&#26524;&#23383;&#27573;&#20026;&#31354;&#20540;&#20250;&#36339;&#36807;&#65307;&#27880;&#24847;&#21069;&#23548;&#30340;&#36887;&#21495;</span>
Field <span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #2aa198;">`json:",omitempty"`</span>
</pre>
</div>

<p>
"string"选项标记一个字段在编码json时应编码为字符串。它只适用于字符串、浮点数、整数类型的字段。这个额外水平的编码选项有时候会用于和javascript程序交互：<br>
</p>

<div class="org-src-container">
<pre class="src src-go">Int64String <span style="color: #df005f; font-weight: bold;">int64</span> <span style="color: #2aa198;">`json:",string"`</span>
</pre>
</div>

<p>
如果键名是只含有unicode字符、数字、美元符号、百分号、连字符、下划线和斜杠的非空字符串，将使用它代替字段名。<br>
</p>

<p>
匿名的结构体字段一般序列化为他们内部的导出字段就好像位于外层结构体中一样。如果一个匿名结构体字段的标签给其提供了键名，则会使用键名代替字段名，而不视为匿名。<br>
</p>

<p>
Go结构体字段的可视性规则用于供json决定那个字段应该序列化或反序列化时是经过修正了的。如果同一层次有多个（匿名）字段且该层次是最小嵌套的（嵌套层次则使用默认go规则），会应用如下额外规则：<br>
</p>

<p>
1）json标签为"-"的匿名字段强行忽略，不作考虑；<br>
2）json标签提供了键名的匿名字段，视为非匿名字段；<br>
3）其余字段中如果只有一个匿名字段，则使用该字段；<br>
4）其余字段中如果有多个匿名字段，但压平后不会出现冲突，所有匿名字段压平；<br>
5）其余字段中如果有多个匿名字段，但压平后出现冲突，全部忽略，不产生错误。<br>
</p>

<p>
对匿名结构体字段的管理是从go1.1开始的，在之前的版本，匿名字段会直接忽略掉。<br>
</p>

<p>
映射类型的值编码为json对象。映射的键必须是字符串，对象的键直接使用映射的键。<br>
</p>

<p>
指针类型的值编码为其指向的值（的json编码）。nil指针编码为null。<br>
</p>

<p>
接口类型的值编码为接口内保持的具体类型的值（的json编码）。nil接口编码为null。<br>
</p>

<p>
通道、复数、函数类型的值不能编码进json。尝试编码它们会导致Marshal函数返回UnsupportedTypeError。<br>
</p>

<p>
Json不能表示循环的数据结构，将一个循环的结构提供给Marshal函数会导致无休止的循环。<br>
</p>

<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">type</span> <span style="color: #df005f; font-weight: bold;">ColorGroup</span> <span style="color: #268bd2; font-weight: bold;">struct</span> {
    ID     <span style="color: #df005f; font-weight: bold;">int</span>
    Name   <span style="color: #df005f; font-weight: bold;">string</span>
    Colors []<span style="color: #df005f; font-weight: bold;">string</span>
}
<span style="color: #8787d7;">group</span> := <span style="color: #df005f; font-weight: bold;">ColorGroup</span>{
    <span style="color: #d75fd7;">ID</span>:     <span style="color: #d75fd7;">1</span>,
    <span style="color: #d75fd7;">Name</span>:   <span style="color: #2aa198;">"Reds"</span>,
    <span style="color: #d75fd7;">Colors</span>: []<span style="color: #df005f; font-weight: bold;">string</span>{<span style="color: #2aa198;">"Crimson"</span>, <span style="color: #2aa198;">"Red"</span>, <span style="color: #2aa198;">"Ruby"</span>, <span style="color: #2aa198;">"Maroon"</span>},
}
<span style="color: #8787d7;">b</span>, <span style="color: #8787d7;">err</span> := json.<span style="color: #d75fd7; font-weight: bold;">Marshal</span>(group)
<span style="color: #268bd2; font-weight: bold;">if</span> err != <span style="color: #d75fd7;">nil</span> {
    fmt.<span style="color: #d75fd7; font-weight: bold;">Println</span>(<span style="color: #2aa198;">"error:"</span>, err)
}
os.Stdout.<span style="color: #d75fd7; font-weight: bold;">Write</span>(b)
<span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">Output:</span>
<span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">{"ID":1,"Name":"Reds","Colors":["Crimson","Red","Ruby","Maroon"]}</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org2893aa4" class="outline-2">
<h2 id="org2893aa4">func MarshalIndent</h2>
<div class="outline-text-2" id="text-org2893aa4">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">func</span> <span style="color: #d75fd7; font-weight: bold;">MarshalIndent</span>(<span style="color: #8787d7;">v</span> <span style="color: #268bd2; font-weight: bold;">interface</span>{}, <span style="color: #8787d7;">prefix</span>, <span style="color: #8787d7;">indent</span> <span style="color: #df005f; font-weight: bold;">string</span>) ([]<span style="color: #df005f; font-weight: bold;">byte</span>, <span style="color: #df005f; font-weight: bold;">error</span>)
</pre>
</div>

<p>
MarshalIndent类似Marshal但会使用缩进将输出格式化。<br>
</p>
</div>
</div>
<div id="outline-container-org1e069ee" class="outline-2">
<h2 id="org1e069ee">func Unmarshal</h2>
<div class="outline-text-2" id="text-org1e069ee">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">func</span> <span style="color: #d75fd7; font-weight: bold;">Unmarshal</span>(<span style="color: #8787d7;">data</span> []<span style="color: #df005f; font-weight: bold;">byte</span>, <span style="color: #8787d7;">v</span> <span style="color: #268bd2; font-weight: bold;">interface</span>{}) <span style="color: #df005f; font-weight: bold;">error</span>
</pre>
</div>

<p>
Unmarshal函数解析json编码的数据并将结果存入v指向的值。<br>
</p>

<p>
Unmarshal和Marshal做相反的操作，必要时申请映射、切片或指针，有如下的附加规则：<br>
</p>

<p>
要将json数据解码写入一个指针，Unmarshal函数首先处理json数据是json字面值null的情况。此时，函数将指针设为nil；否则，函数将json数据解码写入指针指向的值；如果指针本身是nil，函数会先申请一个值并使指针指向它。<br>
</p>

<p>
要将json数据解码写入一个结构体，函数会匹配输入对象的键和Marshal使用的键（结构体字段名或者它的标签指定的键名），优先选择精确的匹配，但也接受大小写不敏感的匹配。<br>
</p>

<p>
要将json数据解码写入一个接口类型值，函数会将数据解码为如下类型写入接口：<br>
</p>

<pre class="example" id="org6ae43cb">
Bool                   对应JSON布尔类型
float64                对应JSON数字类型
string                 对应JSON字符串类型
[]interface{}          对应JSON数组
map[string]interface{} 对应JSON对象
nil                    对应JSON的null
</pre>

<p>
如果一个JSON值不匹配给出的目标类型，或者如果一个json数字写入目标类型时溢出，Unmarshal函数会跳过该字段并尽量完成其余的解码操作。如果没有出现更加严重的错误，本函数会返回一个描述第一个此类错误的详细信息的UnmarshalTypeError。<br>
</p>

<p>
JSON的null值解码为go的接口、指针、切片时会将它们设为nil，因为null在json里一般表示“不存在”。 解码json的null值到其他go类型时，不会造成任何改变，也不会产生错误。<br>
</p>

<p>
当解码字符串时，不合法的utf-8或utf-16代理（字符）对不视为错误，而是将非法字符替换为unicode字符U+FFFD。<br>
</p>

<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">var</span> <span style="color: #8787d7;">jsonBlob</span> = []<span style="color: #d75fd7; font-weight: bold;">byte</span>(<span style="color: #2aa198;">`[</span>
<span style="color: #2aa198;">        {"Name": "Platypus", "Order": "Monotremata"},</span>
<span style="color: #2aa198;">        {"Name": "Quoll",    "Order": "Dasyuromorphia"}</span>
<span style="color: #2aa198;">    ]`</span>)
<span style="color: #268bd2; font-weight: bold;">type</span> <span style="color: #df005f; font-weight: bold;">Animal</span> <span style="color: #268bd2; font-weight: bold;">struct</span> {
    Name  <span style="color: #df005f; font-weight: bold;">string</span>
    Order <span style="color: #df005f; font-weight: bold;">string</span>
}
<span style="color: #268bd2; font-weight: bold;">var</span> <span style="color: #8787d7;">animals</span> []<span style="color: #df005f; font-weight: bold;">Animal</span>
<span style="color: #8787d7;">err</span> := json.<span style="color: #d75fd7; font-weight: bold;">Unmarshal</span>(jsonBlob, &amp;animals)
<span style="color: #268bd2; font-weight: bold;">if</span> err != <span style="color: #d75fd7;">nil</span> {
    fmt.<span style="color: #d75fd7; font-weight: bold;">Println</span>(<span style="color: #2aa198;">"error:"</span>, err)
}
fmt.<span style="color: #d75fd7; font-weight: bold;">Printf</span>(<span style="color: #2aa198;">"%+v"</span>, animals)
<span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">Output:</span>
<span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">[{Name:Platypus Order:Monotremata} {Name:Quoll Order:Dasyuromorphia}]</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org70373a9" class="outline-2">
<h2 id="org70373a9">type Decoder</h2>
<div class="outline-text-2" id="text-org70373a9">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">type</span> <span style="color: #df005f; font-weight: bold;">Decoder</span> <span style="color: #268bd2; font-weight: bold;">struct</span> {
    <span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">&#20869;&#21547;&#38544;&#34255;&#25110;&#38750;&#23548;&#20986;&#23383;&#27573;</span>
}
</pre>
</div>
<p>
Decoder从输入流解码json对象<br>
</p>

<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">const</span> <span style="color: #d75fd7;">jsonStream</span> = <span style="color: #2aa198;">`</span>
<span style="color: #2aa198;">        {"Name": "Ed", "Text": "Knock knock."}</span>
<span style="color: #2aa198;">        {"Name": "Sam", "Text": "Who's there?"}</span>
<span style="color: #2aa198;">        {"Name": "Ed", "Text": "Go fmt."}</span>
<span style="color: #2aa198;">        {"Name": "Sam", "Text": "Go fmt who?"}</span>
<span style="color: #2aa198;">        {"Name": "Ed", "Text": "Go fmt yourself!"}</span>
<span style="color: #2aa198;">    `</span>
<span style="color: #268bd2; font-weight: bold;">type</span> <span style="color: #df005f; font-weight: bold;">Message</span> <span style="color: #268bd2; font-weight: bold;">struct</span> {
    Name, Text <span style="color: #df005f; font-weight: bold;">string</span>
}
<span style="color: #8787d7;">dec</span> := json.<span style="color: #d75fd7; font-weight: bold;">NewDecoder</span>(strings.<span style="color: #d75fd7; font-weight: bold;">NewReader</span>(jsonStream))
<span style="color: #268bd2; font-weight: bold;">for</span> {
    <span style="color: #268bd2; font-weight: bold;">var</span> <span style="color: #8787d7;">m</span> <span style="color: #df005f; font-weight: bold;">Message</span>
    <span style="color: #268bd2; font-weight: bold;">if</span> <span style="color: #8787d7;">err</span> := dec.<span style="color: #d75fd7; font-weight: bold;">Decode</span>(&amp;m); err == io.EOF {
        <span style="color: #268bd2; font-weight: bold;">break</span>
    } <span style="color: #268bd2; font-weight: bold;">else</span> <span style="color: #268bd2; font-weight: bold;">if</span> err != <span style="color: #d75fd7;">nil</span> {
        log.<span style="color: #d75fd7; font-weight: bold;">Fatal</span>(err)
    }
    fmt.<span style="color: #d75fd7; font-weight: bold;">Printf</span>(<span style="color: #2aa198;">"%s: %s\n"</span>, m.Name, m.Text)
}
<span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">Output:</span>
<span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">Ed: Knock knock.</span>
<span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">Sam: Who's there?</span>
<span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">Ed: Go fmt.</span>
<span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">Sam: Go fmt who?</span>
<span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">Ed: Go fmt yourself!</span>
</pre>
</div>
</div>
<div id="outline-container-org5a3370c" class="outline-3">
<h3 id="org5a3370c">func NewDecoder</h3>
<div class="outline-text-3" id="text-org5a3370c">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">func</span> <span style="color: #d75fd7; font-weight: bold;">NewDecoder</span>(<span style="color: #8787d7;">r</span> <span style="color: #df005f; font-weight: bold;">io.Reader</span>) *<span style="color: #df005f; font-weight: bold;">Decoder</span>
</pre>
</div>

<p>
NewDecoder创建一个从r读取并解码json对象的*Decoder，解码器有自己的缓冲，并可能超前读取部分json数据。<br>
</p>
</div>
</div>
<div id="outline-container-orgb0585d8" class="outline-3">
<h3 id="orgb0585d8">func (*Decoder) Buffered</h3>
<div class="outline-text-3" id="text-orgb0585d8">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">func</span> (<span style="color: #8787d7;">dec</span> *<span style="color: #df005f; font-weight: bold;">Decoder</span>) <span style="color: #d75fd7; font-weight: bold;">Buffered</span>() <span style="color: #df005f; font-weight: bold;">io.Reader</span>
</pre>
</div>

<p>
Buffered方法返回保存在dec缓存里数据的读取器，该返回值在下次调用Decode方法之前有效。<br>
</p>
</div>
</div>
<div id="outline-container-orgdb83b21" class="outline-3">
<h3 id="orgdb83b21">func (*Decoder) UseNumber</h3>
<div class="outline-text-3" id="text-orgdb83b21">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">func</span> (<span style="color: #8787d7;">dec</span> *<span style="color: #df005f; font-weight: bold;">Decoder</span>) <span style="color: #d75fd7; font-weight: bold;">UseNumber</span>()
</pre>
</div>

<p>
UseNumber方法将dec设置为当接收端是interface{}接口时将json数字解码为Number类型而不是float64类型<br>
</p>
</div>
</div>
<div id="outline-container-orgf31c4fb" class="outline-3">
<h3 id="orgf31c4fb">func (*Decoder) Decode</h3>
<div class="outline-text-3" id="text-orgf31c4fb">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">func</span> (<span style="color: #8787d7;">dec</span> *<span style="color: #df005f; font-weight: bold;">Decoder</span>) <span style="color: #d75fd7; font-weight: bold;">Decode</span>(<span style="color: #8787d7;">v</span> <span style="color: #268bd2; font-weight: bold;">interface</span>{}) <span style="color: #df005f; font-weight: bold;">error</span>
</pre>
</div>

<p>
Decode从输入流读取下一个json编码值并保存在v指向的值里，参见Unmarshal函数的文档获取细节信息。<br>
</p>
</div>
</div>
</div>
<div id="outline-container-org5530126" class="outline-2">
<h2 id="org5530126">type Encoder</h2>
<div class="outline-text-2" id="text-org5530126">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">type</span> <span style="color: #df005f; font-weight: bold;">Encoder</span> <span style="color: #268bd2; font-weight: bold;">struct</span> {
    <span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">&#20869;&#21547;&#38544;&#34255;&#25110;&#38750;&#23548;&#20986;&#23383;&#27573;</span>
}
</pre>
</div>

<p>
Encoder将json对象写入输出流。<br>
</p>
</div>
<div id="outline-container-orgca7ff2f" class="outline-3">
<h3 id="orgca7ff2f">func NewEncoder</h3>
<div class="outline-text-3" id="text-orgca7ff2f">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">func</span> <span style="color: #d75fd7; font-weight: bold;">NewEncoder</span>(<span style="color: #8787d7;">w</span> <span style="color: #df005f; font-weight: bold;">io.Writer</span>) *<span style="color: #df005f; font-weight: bold;">Encoder</span>
</pre>
</div>

<p>
NewEncoder创建一个将数据写入w的*Encoder。<br>
</p>
</div>
</div>
<div id="outline-container-orga9038ba" class="outline-3">
<h3 id="orga9038ba">func (*Encoder) Encode</h3>
<div class="outline-text-3" id="text-orga9038ba">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">func</span> (<span style="color: #8787d7;">enc</span> *<span style="color: #df005f; font-weight: bold;">Encoder</span>) <span style="color: #d75fd7; font-weight: bold;">Encode</span>(<span style="color: #8787d7;">v</span> <span style="color: #268bd2; font-weight: bold;">interface</span>{}) <span style="color: #df005f; font-weight: bold;">error</span>
</pre>
</div>

<p>
Encode将v的json编码写入输出流，并会写入一个换行符，参见Marshal函数的文档获取细节信息。<br>
</p>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Date: 2022-02-11 03:02 Fri</p>
<p class="author">Author: L.M.haoran</p>
<p class="date">Created: 2022-02-11 Fri 03:41</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
