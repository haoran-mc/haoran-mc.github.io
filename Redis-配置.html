<!DOCTYPE html>
<html lang="zh">
<head>
<!-- 2022-02-22 Tue 17:52 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>REDIS 配置</title>
<meta name="generator" content="Org mode">
<meta name="author" content="L.M.haoran">
<meta name="description" content="Copyright © 2022, L.M.haoran, all rights reserved."
>

                <link rel="stylesheet" href="static/css/org.css" type="text/css"  />
                <script type="module" src="static/js/main.js" defer></script>
                <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
</head>
<body>
<div id="content">
<h1 class="title">REDIS 配置</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgf30f786">大小写不敏感</a></li>
<li><a href="#orgde8812d">导入其他配置文件</a></li>
<li><a href="#org39d6a15">网络</a></li>
<li><a href="#org7a9e0d3">通用</a></li>
<li><a href="#orgc727771">快照</a></li>
<li><a href="#org79f0476">REPLICATION 复制</a></li>
<li><a href="#org7fb5f21">SECURITY 安全设置</a></li>
<li><a href="#orgf2d1fb7">CLIENTS 客户端限制</a></li>
<li><a href="#org4d95ff6">MEMORY 内存设置</a></li>
<li><a href="#org96ce426">APPEND ONLY</a></li>
</ul>
</div>
</div>

<div id="outline-container-orgf30f786" class="outline-2">
<h2 id="orgf30f786">大小写不敏感</h2>
<div class="outline-text-2" id="text-orgf30f786">
<div class="org-src-container">
<pre class="src src-conf"><span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">Note on units: when memory size is needed, it is possible to specify</span>
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">it in the usual form of 1k 5GB 4M and so forth:</span>
<span style="color: #008787; background-color: #262626;">#</span>
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">1k =&gt; 1000 bytes</span>
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">1kb =&gt; 1024 bytes</span>
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">1m =&gt; 1000000 bytes</span>
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">1mb =&gt; 1024*1024 bytes</span>
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">1g =&gt; 1000000000 bytes</span>
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">1gb =&gt; 1024*1024*1024 bytes</span>
<span style="color: #008787; background-color: #262626;">#</span>
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">units are case insensitive so 1GB 1Gb 1gB are all the same.</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgde8812d" class="outline-2">
<h2 id="orgde8812d">导入其他配置文件</h2>
<div class="outline-text-2" id="text-orgde8812d">
<div class="org-src-container">
<pre class="src src-conf"><span style="color: #008787; background-color: #262626;">################################## </span><span style="color: #008787; background-color: #262626;">INCLUDES ###################################</span>

<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">Include one or more other config files here.  This is useful if you</span>
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">have a standard template that goes to all Redis servers but also need</span>
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">to customize a few per-server settings.  Include files can include</span>
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">other files, so use this wisely.</span>
<span style="color: #008787; background-color: #262626;">#</span>
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">Note that option "include" won't be rewritten by command "CONFIG REWRITE"</span>
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">from admin or Redis Sentinel. Since Redis always uses the last processed</span>
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">line as value of a configuration directive, you'd better put includes</span>
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">at the beginning of this file to avoid overwriting config change at runtime.</span>
<span style="color: #008787; background-color: #262626;">#</span>
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">If instead you are interested in using includes to override configuration</span>
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">options, it is better to use include as the last line.</span>
<span style="color: #008787; background-color: #262626;">#</span>
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">include /path/to/local.conf</span>
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">include /path/to/other.conf</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org39d6a15" class="outline-2">
<h2 id="org39d6a15">网络</h2>
<div class="outline-text-2" id="text-org39d6a15">
<dl class="org-dl">
<dt>bind 127.0.0.1 -::1</dt><dd>绑定的 ip<br></dd>
<dt>protected-mode yes</dt><dd>保护模式<br></dd>
<dt>port 6379</dt><dd>默认端口<br></dd>
</dl>
</div>
</div>
<div id="outline-container-org7a9e0d3" class="outline-2">
<h2 id="org7a9e0d3">通用</h2>
<div class="outline-text-2" id="text-org7a9e0d3">
<dl class="org-dl">
<dt>daemonize yes</dt><dd>以守护进程的方式运行（后台运行），默认是 <code>no</code> <br></dd>
<dt>pidfile /var/run/redis_6379.pid</dt><dd>如果以后台方式运行，需要指定一个 pid 文件<br></dd>
<dt>loglevel notice</dt><dd>日志级别<br></dd>
</dl>

<div class="org-src-container">
<pre class="src src-conf"><span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">Specify the server verbosity level.</span>
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">This can be one of:</span>
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">debug (a lot of information, useful for development/testing)</span>
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">verbose (many rarely useful info, but not a mess like the debug level)</span>
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">notice (moderately verbose, what you want in production probably)</span>
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">warning (only very important / critical messages are logged)</span>
loglevel notice
</pre>
</div>

<dl class="org-dl">
<dt>logfile ""</dt><dd>生成的文件<br></dd>
</dl>

<div class="org-src-container">
<pre class="src src-conf"><span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">Specify the log file name. Also the empty string can be used to force</span>
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">Redis to log on the standard output. Note that if you use standard</span>
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">output for logging but daemonize, logs will be sent to /dev/null</span>
logfile <span style="color: #2aa198;">""</span>
</pre>
</div>

<dl class="org-dl">
<dt>databases 16</dt><dd>默认的数据库数量<br></dd>
</dl>
</div>
</div>
<div id="outline-container-orgc727771" class="outline-2">
<h2 id="orgc727771">快照</h2>
<div class="outline-text-2" id="text-orgc727771">
<p>
redis 是内存数据库，如果没有持久化，数据断电即失。<br>
</p>

<div class="org-src-container">
<pre class="src src-conf"><span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#22914;&#26524; 900s &#20869;&#33267;&#23569;&#26377; 1 &#20010; key &#36827;&#34892;&#20102;&#20462;&#25913;&#65292;&#21017;&#36827;&#34892;&#25345;&#20037;&#21270;&#25805;&#20316;</span>
save 3600 1
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#22914;&#26524; 300s &#20869;&#33267;&#23569;&#26377; 100 &#20010; key &#36827;&#34892;&#20102;&#20462;&#25913;&#65292;&#21017;&#36827;&#34892;&#25345;&#20037;&#21270;&#25805;&#20316;</span>
save 300 100
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#22914;&#26524; 60s &#20869;&#33267;&#23569;&#26377; 10000 &#20010; key &#36827;&#34892;&#20102;&#20462;&#25913;&#65292;&#21017;&#36827;&#34892;&#25345;&#20037;&#21270;&#25805;&#20316;</span>
save 60 10000
</pre>
</div>

<dl class="org-dl">
<dt>stop-writes-on-bgsave-error yes</dt><dd>持久化出错，是否还继续工作<br></dd>
<dt>rdbcompression yes</dt><dd>是否压缩 rbd 文件，会消耗 CPU 资源<br></dd>
<dt>rdbchecksum yes</dt><dd>保存 rdb 文件时进行错误检查<br></dd>
<dt>dir ./</dt><dd>rdb 文件的保存目录<br></dd>
</dl>
</div>
</div>
<div id="outline-container-org79f0476" class="outline-2">
<h2 id="org79f0476">REPLICATION 复制</h2>
</div>
<div id="outline-container-org7fb5f21" class="outline-2">
<h2 id="org7fb5f21">SECURITY 安全设置</h2>
</div>
<div id="outline-container-orgf2d1fb7" class="outline-2">
<h2 id="orgf2d1fb7">CLIENTS 客户端限制</h2>
<div class="outline-text-2" id="text-orgf2d1fb7">
<dl class="org-dl">
<dt>maxclients 10000</dt><dd>设置能连接上 redis 的最大客户端数量<br></dd>
</dl>
</div>
</div>
<div id="outline-container-org4d95ff6" class="outline-2">
<h2 id="org4d95ff6">MEMORY 内存设置</h2>
<div class="outline-text-2" id="text-org4d95ff6">
<dl class="org-dl">
<dt>maxmemory &lt;bytes&gt;</dt><dd>配置最大的内存容量<br></dd>
<dt>maxmemory-policy noeviction</dt><dd>内存到达上限之后的处理策略<br></dd>
</dl>
</div>
</div>
<div id="outline-container-org96ce426" class="outline-2">
<h2 id="org96ce426">APPEND ONLY</h2>
<div class="outline-text-2" id="text-org96ce426">
<dl class="org-dl">
<dt>appendonly no</dt><dd>默认不开启 aof 模式，使用 rdb 方式持久化，在大多数情况下，rdb 够用<br></dd>
<dt>appendfilename "appendonly.aof"</dt><dd>持久化文件名<br></dd>
</dl>

<div class="org-src-container">
<pre class="src src-conf"><span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">appendfsync always</span>
appendfsync everysec    <span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#27599;&#31186;&#25191;&#34892;&#19968;&#27425; sync</span>
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">appendfsync no</span>
</pre>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Date: 2022-01-30 21:01 Sun</p>
<p class="author">Author: L.M.haoran</p>
<p class="date">Created: 2022-02-22 Tue 17:52</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
