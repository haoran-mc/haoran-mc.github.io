<!DOCTYPE html>
<html lang="zh">
<head>
<!-- 2023-01-26 -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>呈现数据</title>
<meta name="author" content="Haoran Liu" />
<meta name="description" content="Copyright © 2023, Haoran Liu, all rights reserved." />
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="static/css/org.css"/>
</head>
<body>
<div id="content" class="content">
<h1 class="title">呈现数据</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org7bd997b">数据流重定向</a></li>
<li><a href="#org0b54c89">在脚本中重定向输入输出</a>
<ul>
<li><a href="#org0741106">临时重定向</a></li>
<li><a href="#org4f851fe">永久重定向</a></li>
</ul>
</li>
<li><a href="#orgb5780f5">创建自己的重定向</a></li>
<li><a href="#orgec5fd20">创建临时文件</a></li>
<li><a href="#orge5c32be">双向重定向</a></li>
</ul>
</div>
</div>

<div id="outline-container-org7bd997b" class="outline-2">
<h2 id="org7bd997b">数据流重定向</h2>
<div class="outline-text-2" id="text-org7bd997b">
<p>
<a href="Linux-bash.html#org3b17c05">数据流重定向</a><br>
</p>
</div>
</div>
<div id="outline-container-org0b54c89" class="outline-2">
<h2 id="org0b54c89">在脚本中重定向输入输出</h2>
<div class="outline-text-2" id="text-org0b54c89">
</div>
<div id="outline-container-org0741106" class="outline-3">
<h3 id="org0741106">临时重定向</h3>
<div class="outline-text-3" id="text-org0741106">
<div class="org-src-container">
<pre class="src src-shell"><span style="color: #546A90;">#</span><span style="color: #546A90;">!/bin/</span><span style="color: #ff2afc; font-weight: bold;">bash</span>

<span style="color: #1ea8fc;">echo</span> <span style="color: #7984D1;">"my name is haoran."</span>
<span style="color: #1ea8fc;">echo</span> <span style="color: #7984D1;">"error message"</span> &gt;&amp;2
</pre>
</div>

<div class="org-src-container">
<pre class="src src-bash">$ ./test.sh 2&gt; err.txt
my name is haoran.

$ cat err.txt
error message
</pre>
</div>
</div>
</div>
<div id="outline-container-org4f851fe" class="outline-3">
<h3 id="org4f851fe">永久重定向</h3>
<div class="outline-text-3" id="text-org4f851fe">
<p>
如果脚本中有大量数据需要重定向，那重定向每个 echo 语句就会很繁琐。取而代之，你可以用 exec 命令告诉 shell 脚本执行期间重定向某个特定文件描述符。<br>
</p>

<div class="org-src-container">
<pre class="src src-shell"><span style="color: #546A90;">#</span><span style="color: #546A90;">!/bin/</span><span style="color: #ff2afc; font-weight: bold;">bash</span>

<span style="color: #ff2afc; font-weight: bold;">exec</span> 1&gt; testout

<span style="color: #1ea8fc;">echo</span> <span style="color: #7984D1;">"1"</span>
<span style="color: #1ea8fc;">echo</span> <span style="color: #7984D1;">"2"</span>
<span style="color: #1ea8fc;">echo</span> <span style="color: #7984D1;">"3"</span>

<span style="color: #ff2afc; font-weight: bold;">exec</span> 2&gt; errout

<span style="color: #1ea8fc;">echo</span> <span style="color: #7984D1;">"4"</span> &gt;&amp;2
</pre>
</div>

<p>
重定向输入同理。<br>
</p>
</div>
</div>
</div>
<div id="outline-container-orgb5780f5" class="outline-2">
<h2 id="orgb5780f5">创建自己的重定向</h2>
</div>
<div id="outline-container-orgec5fd20" class="outline-2">
<h2 id="orgec5fd20">创建临时文件<a id="orgb11c1a1"></a></h2>
<div class="outline-text-2" id="text-orgec5fd20">
<p>
指定一个文件名模板，模板可以包含任意文本文件名，在文件名末尾加上 6 个 <verbatim>X</verbatim> 就行了。<br>
</p>

<div class="org-src-container">
<pre class="src src-shell">mktemp testing.XXXXXX

-t &#24378;&#21046; mktemp &#21629;&#20196;&#26469;&#22312;&#31995;&#32479;&#30340;&#20020;&#26102;&#30446;&#24405;&#26469;&#21019;&#24314;&#35813;&#25991;&#20214;&#65292;&#36825;&#26102;&#21629;&#20196;&#20250;&#36820;&#22238;&#21019;&#24314;&#25991;&#20214;&#30340;&#20840;&#36335;&#24452;&#12290;
-d &#21019;&#24314;&#20020;&#26102;&#30446;&#24405;&#65292;mktemp -d dir.XXXXXX
</pre>
</div>

<p>
在脚本中获取文件名：<br>
</p>

<div class="org-src-container">
<pre class="src src-shell"><span style="color: #df85ff;">testfile</span>=$(mktemp testing.XXXXXX)

<span style="color: #df85ff;">testdir</span>=$(mktemp -d dir.XXXXXX)
<span style="color: #1ea8fc;">cd</span> $<span style="color: #df85ff;">testdir</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orge5c32be" class="outline-2">
<h2 id="orge5c32be">双向重定向</h2>
<div class="outline-text-2" id="text-orge5c32be">
<p>
<a href="Linux-bash.html#orgc5efa26">Linux-bash.org::双向重定向（tee）</a><br>
</p>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Date: 2023-01-25 22:01 Wed</p>
<p class="author">Author: Haoran Liu</p>
<p class="date">Created: 2023-01-26</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
