<!DOCTYPE html>
<html lang="zh">
<head>
<!-- 2021-09-30 四 22:38 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>符号</title>
<meta name="generator" content="Org mode">
<meta name="author" content="L.M.haoran">
<meta name="description" content="Copyright © 2021, L.M.haoran, all rights reserved."
>

                <link rel="stylesheet" href="static/css/org.css" type="text/css"  />
                <script type="module" src="static/js/main.js" defer></script>
                <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
</head>
<body>
<div id="content">
<h1 class="title">符号</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgd3f5180">有关符号的基本函数</a></li>
<li><a href="#org1e0c05f">统计文本中的单词</a></li>
</ul>
</div>
</div>

<div id="outline-container-orgd3f5180" class="outline-2">
<h2 id="orgd3f5180">有关符号的基本函数</h2>
<div class="outline-text-2" id="text-orgd3f5180">
<p>
下列都是有关符号的基本函数
</p>

<p>
(symbol? x)
如果x是一个符号则返回#t。
</p>

<p>
(string-&gt;symbol str)
将str转换为符号。str应该都是小写的，否则地址系统可能无法正常工作。在MIT-Scheme中，(string-&gt;symbol "Hello")和'Hello是不同的。 scheme (eq? (string-&gt;symbol "Hello") 'Hello) ;Value: () (eq? (string-&gt;symbol "Hello") (string-&gt;symbol "Hello")) ;Value: #t (symbol-&gt;string (string-&gt;symbol "Hello")) ;Value 15: "Hello"
</p>

<p>
(symbol-&gt;string sym)
将sym转换为字符
</p>
</div>
</div>

<div id="outline-container-org1e0c05f" class="outline-2">
<h2 id="org1e0c05f">统计文本中的单词</h2>
<div class="outline-text-2" id="text-org1e0c05f">
<p>
下面的代码是一段统计文本中单词个数的程序，这也是被经常用作演示符号的例子。这个程序使用了哈希表（Hash table）和关联表（Association list），这些都将在下一章中讲解
</p>

<div class="org-src-container">
<pre class="src src-scheme">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;   wc.scm
;;;   a scheme word-count program
;;;
;;;    by T.Shido
;;;    on August 19, 2005
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

(define (list-&gt;symbol ls0)
	(string-&gt;symbol (list-&gt;string (reverse! ls0))))

(define (char-in c . ls)
	(let loop((ls0 ls))
		(if (null? ls0)
				#f
			(or (char=? c (car ls0))
					(loop (cdr ls0))))))

(define (read-words fname)
	(with-input-from-file fname
		(lambda ()
			(let loop((w '()) (wls '()))
				(let ((c (read-char)))
		(cond
		 ((eof-object? c)
						(reverse! (if (pair? w)
													(cons (list-&gt;symbol w) wls)
												wls)))
		 ((char-in c #\Space #\Linefeed #\Tab #\, #\.  #\ #\( #\) #\= #\? #\! #\; #\:)
						(loop '() (if (pair? w)
													(cons (list-&gt;symbol w) wls)
												wls)))
		 (else
			(loop (cons (char-downcase c) w) wls))))))))

(define (sort-by-frequency al)
	(sort al (lambda (x y) (&gt; (cdr x) (cdr y)))))

(define (wc fname)
	(let ((wh (make-eq-hash-table)))
		(let loop((ls (read-words fname)))
			(if (null? ls)
					(sort-by-frequency (hash-table-&gt;alist wh))
				(begin
				 (hash-table/put! wh (car ls) (1+ (hash-table/get wh (car ls) 0)))
				 (loop (cdr ls)))))))
(wc "opensource.txt")
</pre>
</div>

<p>
((the . 208) (to . 142) (a . 104) (of . 103) (and . 83) (that . 75) (is . 73) (in . 65) (i . 64)
(you . 55) (it . 54) (they . 48) (for . 46) (what . 38) (work . 37) (but . 35) (have . 32) (on . 32)
(people . 32) (are . 30) (be . 29) (do . 29) (from . 27) (so . 26) (like . 25) (as . 25) (by . 24)
(source . 24) (not . 23) (open . 23) (can . 23) (we . 22) (was . 22) (one . 22) (it's . 22) (an . 21)
(this . 20) (about . 20) (business . 18) (working . 18) (most . 17) (there . 17) (at . 17) (with . 16)
(don't . 16) (just . 16) (their . 16) (something . 15) (than . 15) (has . 15) (if . 15) (when . 14)
(because . 14) (more . 14) (were . 13) (office . 13) (own . 13) (or . 12) (online . 12) (now . 12)
(blogging . 12) (how . 12) (employees . 11) (them . 11) (think . 11) (time . 11) (company . 11)
(lot . 11) (want . 11) (companies . 10) (could . 10) (know . 10) (get . 10) (learn . 10) (better . 10)
(some . 10) (who . 10) (even . 9) (thing . 9) (much . 9) (no . 9) (make . 9) (up . 9) (being . 9)
(money . 9) (relationship . 9) (that's . 9) (us . 9) (anyone . 8) (average . 8) (bad . 8) (same . 8)
&#x2026;&#x2026;&#x2026;.)
</p>

<p>
行号 函数 说明 09 (list-&gt;symbo ls0) 将一个由字符构成的列表（ls0）转换为一个符号 12 (char-in c . ls) 检查
</p>
</div>
</div>
</div>
</body>
</html>
