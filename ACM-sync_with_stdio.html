<!DOCTYPE html>
<html lang="zh">
<head>
<!-- 2021-09-29 三 22:58 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>sync_with_stdio</title>
<meta name="generator" content="Org mode">
<meta name="author" content="L.M.haoran">
<meta name="description" content="Copyright © 2021, L.M.haoran, all rights reserved."
>

                <link rel="stylesheet" href="static/css/org.css" type="text/css"  />
                <script type="module" src="static/js/main.js" defer></script>
                <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "0em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body>
<div id="content">
<h1 class="title">sync_with_stdio</h1>
<p>
这句语句是用来取消cin的同步，什么叫同步呢？就是iostream的缓冲跟stdio的同步。如果你已经在头文件上用了using namespace std;那么就可以去掉前面的std::了。取消后就cin就不能和scanf，sscanf, getchar, fgets之类同时用了，否则就可能会导致输出和预期的不一样。取消同步的目的，是为了让cin不超时，另外cout的时候尽量少用endl，换用”\n”，也是防止超时的方法。当然，尽量用scanf，printf就不用考虑这种因为缓冲的超时了。
</p>

<p>
The two calls have different meanings that have nothing to do with performance; the fact that it speeds up the execution time is (or might be) just a side effect. You should understand what each of them does and not blindly include them in every program because they look like an optimization.
</p>

<div class="org-src-container">
<pre class="src src-C++">ios_base::sync_with_stdio(false);
</pre>
</div>
<p>
This disables the synchronization between the C and C++ standard streams. By default, all standard streams are synchronized, which in practice allows you to mix C- and C++-style I/O and get sensible and expected results. If you disable the synchronization, then C++ streams are allowed to have their own independent buffers, which makes mixing C- and C++-style I/O an adventure.
</p>

<p>
Also keep in mind that synchronized C++ streams are thread-safe (output from different threads may interleave, but you get no data races).
</p>

<div class="org-src-container">
<pre class="src src-C++">cin.tie(NULL);
</pre>
</div>

<p>
This unties cin from cout. Tied streams ensure that one stream is flushed automatically before each I/O operation on the other stream.
</p>

<p>
By default cin is tied to cout to ensure a sensible user interaction. For example:
</p>

<div class="org-src-container">
<pre class="src src-C++">std::cout &lt;&lt; "Enter name:";
std::cin &gt;&gt; name;
</pre>
</div>

<p>
If cin and cout are tied, you can expect the output to be flushed (i.e., visible on the console) before the program prompts input from the user. If you untie the streams, the program might block waiting for the user to enter their name but the "Enter name" message is not yet visible (because cout is buffered by default, output is flushed/displayed on the console only on demand or when the buffer is full).
</p>

<p>
So if you untie cin from cout, you must make sure to flush cout manually every time you want to display something before expecting input on cin.
</p>

<p>
In conclusion, know what each of them does, understand the consequences, and then decide if you really want or need the possible side effect of speed improvement.
</p>

<div class="org-src-container">
<pre class="src src-C++">//lambda 表达式，可以立即执行，在main函数之前执行，取消输入输出同步，较快输入输出速度
int x = []() {
		std::ios::sync_with_stdio(false);
		cin.tie(NULL);
		return 0;
}();
</pre>
</div>
</div>
</body>
</html>
