<!DOCTYPE html>
<html lang="zh">
<head>
<!-- 2022-12-06 -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ETCD</title>
<meta name="author" content="Haoran Liu" />
<meta name="description" content="Copyright © 2022, Haoran Liu, all rights reserved." />
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="static/css/org.css"/>
</head>
<body>
<div id="content" class="content">
<h1 class="title">ETCD</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#orgea5331b">什么是 KV 存储</a></li>
<li><a href="#org789b944">什么是元数据</a></li>
<li><a href="#orgf3cdd87">什么是 etcd</a>
<ul>
<li><a href="#org5ef91d8">etcd 的特点</a></li>
<li><a href="#org0363064">用户对于 etcd 集群所有节点进行读写</a></li>
</ul>
</li>
<li><a href="#org77fba98">etcd 和传统的数据库有什么区别，为什么分布式架构都要用这个玩意</a>
<ul>
<li><a href="#orgeeab22b">etcd 和 redis 的区别</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-orgea5331b" class="outline-2">
<h2 id="orgea5331b">什么是 KV 存储</h2>
<div class="outline-text-2" id="text-orgea5331b">
<p>
KV 存储（Key-Value，键值对存储）。常用的高性能 KV 存储主要有 Redis、Memcached、etcd、Zookeeper 等。<br>
</p>

<p>
其中 Redis 和 Memcached 主要是用来缓存业务数据，etcd 和 Zookeeper 主要是缓存元信息数据。<br>
</p>
</div>
</div>
<div id="outline-container-org789b944" class="outline-2">
<h2 id="org789b944">什么是元数据</h2>
<div class="outline-text-2" id="text-org789b944">
<p>
在分布式系统中，元数据就是系统的基本信息，包括系统名称、服务名称、服务配置、节点IP等。<br>
</p>
</div>
</div>
<div id="outline-container-orgf3cdd87" class="outline-2">
<h2 id="orgf3cdd87">什么是 etcd</h2>
<div class="outline-text-2" id="text-orgf3cdd87">
<p>
etcd 是 CoreOS 团队于 2013 年 6月发起的开源项目，它的目标是构建一个高可用的分布式键值（key-value）数据库。etcd 内部采用 raft 协议作为一致性算法，etcd 基于 Go 语言实现。<br>
</p>
</div>
<div id="outline-container-org5ef91d8" class="outline-3">
<h3 id="org5ef91d8">etcd 的特点</h3>
<div class="outline-text-3" id="text-org5ef91d8">
<ul class="org-ul">
<li>简单：安装配置简单，而且提供了 HTTP API 进行交互，使用也很简单；<br></li>
<li>安全：支持 SSL 证书验证；<br></li>
<li>快速：根据官方提供的 benchmark 数据，单实例支持每秒 2k+ 读操作；<br></li>
<li>可靠：采用 raft 算法，实现分布式系统数据的可用性和一致性；<br></li>
</ul>
</div>
</div>
<div id="outline-container-org0363064" class="outline-3">
<h3 id="org0363064">用户对于 etcd 集群所有节点进行读写</h3>
<div class="outline-text-3" id="text-org0363064">
<p>
为了保证数据的强一致性，etcd 集群中所有的数据流向都是一个方向，从 Leader （主节点）流向 Follower，也就是所有 Follower 的数据必须与 Leader 保持一致，如果不一致会被覆盖。<br>
</p>

<ul class="org-ul">
<li>读取：由于集群所有节点数据是强一致性的，读取可以从集群中随便哪个节点进行读取数据<br></li>
<li>写入：etcd 集群有 leader，如果写入往 leader 写入，可以直接写入，然后然后Leader节点会把写入分发给所有 Follower，如果往 follower 写入，然后Leader节点会把写入分发给所有 Follower<br></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org77fba98" class="outline-2">
<h2 id="org77fba98">etcd 和传统的数据库有什么区别，为什么分布式架构都要用这个玩意</h2>
<div class="outline-text-2" id="text-org77fba98">
<ul class="org-ul">
<li><a href="file:///Users/haoran/haoran/n/pdf/知乎/etcd与传统数据库的区别.pdf">pdf</a><br></li>
</ul>
</div>
<div id="outline-container-orgeeab22b" class="outline-3">
<h3 id="orgeeab22b">etcd 和 redis 的区别</h3>
<div class="outline-text-3" id="text-orgeeab22b">
<img src="./images/etcd和redis的区别.png" width="650px" />
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Date: 2022-11-27 18:11 Sun</p>
<p class="author">Author: Haoran Liu</p>
<p class="date">Created: 2022-12-06</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
