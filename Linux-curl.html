<!DOCTYPE html>
<html lang="zh">
<head>
<!-- 2023-01-12 -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>CURL</title>
<meta name="author" content="L.M.haoran" />
<meta name="description" content="Copyright © 2021, L.M.haoran, all rights reserved." />
<meta name="generator" content="Org Mode" />
<link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
           <link rel="stylesheet" href="static/css/org.css" type="text/css"  />
           <script type="module" src="static/js/main.js" defer></script>
</head>
<body>
<div id="content" class="content">
<h1 class="title">CURL</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#orge8fc9ac">curl 的功能</a>
<ul>
<li><a href="#orgd17c2e2">一、查看网页码源</a></li>
<li><a href="#orgfb1d4ac">二、自动跳转</a></li>
<li><a href="#org2e55e31">三、显示头信息</a></li>
<li><a href="#orgde7e26b">四、显示通信过程</a></li>
<li><a href="#org19be7c5">五、发送表单信息</a></li>
<li><a href="#org2415da4">六、HTTP动词</a></li>
<li><a href="#orga10ae15">七、文件上传</a></li>
<li><a href="#org23ca775">八、Referer字段</a></li>
<li><a href="#orgc9c2b35">九、User Agent字段</a></li>
<li><a href="#orgad91bb4">十、cookie</a></li>
<li><a href="#org33da60d">十一、增加头信息</a></li>
<li><a href="#orgf31a342">十二、HTTP认证</a></li>
</ul>
</li>
<li><a href="#orgd9d8b1c">使用 curl 代替 postman</a>
<ul>
<li><a href="#org8d667c7">发送 GET 请求</a></li>
<li><a href="#org77e82a6">发送 POST 请求</a></li>
<li><a href="#org75ba96f">发送 PUT 请求</a></li>
<li><a href="#orgf053eff">发送 DELETE 请求</a></li>
</ul>
</li>
<li><a href="#org957f5aa">curl 参数</a>
<ul>
<li><a href="#org5d9851e">-A</a></li>
<li><a href="#orgc17da27">-b</a></li>
<li><a href="#org4272418">-c</a></li>
<li><a href="#org28613c5">-d</a></li>
<li><a href="#org779be2a">&#x2013;data-urlencode</a></li>
<li><a href="#orgf8f2652">-e</a></li>
<li><a href="#orged750f2">-F</a></li>
<li><a href="#orgb56a3dc">-G</a></li>
<li><a href="#org58eb96d">-H</a></li>
<li><a href="#org7e1a5ab">-i</a></li>
<li><a href="#orgeda1b40">-I</a></li>
<li><a href="#orge81626d">-k</a></li>
<li><a href="#org68d580c">-L</a></li>
<li><a href="#orga3987ee">&#x2013;limit-rate</a></li>
<li><a href="#orgdde78b7">-o</a></li>
<li><a href="#org6ccf030">-O</a></li>
<li><a href="#org285daad">-s</a></li>
<li><a href="#orgbe78f7e">-S</a></li>
<li><a href="#org0b16fd6">-u</a></li>
<li><a href="#org24cb44b">-v</a></li>
<li><a href="#org1bf43eb">-x</a></li>
<li><a href="#orga84c5ce">-X</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-orge8fc9ac" class="outline-2">
<h2 id="orge8fc9ac">curl 的功能</h2>
<div class="outline-text-2" id="text-orge8fc9ac">
<p>
curl是一种命令行工具，作用是发出网络请求，然后得到和提取数据，显示在"标准输出"（stdout）上面。<br>
</p>

<p>
它支持多种协议，下面举例讲解如何将它用于网站开发。<br>
</p>
</div>
<div id="outline-container-orgd17c2e2" class="outline-3">
<h3 id="orgd17c2e2">一、查看网页码源</h3>
<div class="outline-text-3" id="text-orgd17c2e2">
<ul class="org-ul">
<li>curl www.sina.com.cn<br></li>
</ul>

<pre class="example" id="orgf451f33">
&lt;!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN"&gt;
&lt;html&gt;
&lt;head&gt;&lt;title&gt;302 Found&lt;/title&gt;&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;302 Found&lt;/h1&gt;
&lt;p&gt;The requested resource resides temporarily under a different URI.&lt;/p&gt;
&lt;hr/&gt;Powered by Tengine&lt;/body&gt;
&lt;/html&gt;
</pre>

<p>
如果要把网页保存下来，使用 <code>-o</code> 参数，这就相当于使用 wget 命令。<br>
</p>

<div class="org-src-container">
<pre class="src src-shell">curl -o sina.html www.sina.com.cn
</pre>
</div>
</div>
</div>
<div id="outline-container-orgfb1d4ac" class="outline-3">
<h3 id="orgfb1d4ac">二、自动跳转</h3>
<div class="outline-text-3" id="text-orgfb1d4ac">
<p>
有的网址是自动跳转的，使用 <code>-L</code> 参数，curl 就会跳到新的网址。<br>
</p>

<ul class="org-ul">
<li>curl -L www.sina.com.cn<br></li>
</ul>

<p>
这时候显示的就是新浪主页的源码，很长，就不再展示了。<br>
</p>
</div>
</div>
<div id="outline-container-org2e55e31" class="outline-3">
<h3 id="org2e55e31">三、显示头信息</h3>
<div class="outline-text-3" id="text-org2e55e31">
<p>
<code>-i</code> 参数可以显示 http response 头信息，<br>
</p>

<ul class="org-ul">
<li>curl -i www.sina.com<br></li>
</ul>

<pre class="example" id="org83b1500">
HTTP/1.1 302 Found
Server: Tengine
Date: Wed, 01 Dec 2021 02:22:00 GMT
Content-Type: text/html
Content-Length: 242
Connection: keep-alive
Location: https://www.sina.com.cn/
X-DSL-CHECK: 5
X-Via-CDN: f=alicdn,s=cache14.cn4026,c=2408:844c:608:220:c7ff:a61a:8ab9:be64;
Via: cache14.cn4026[,0]
Timing-Allow-Origin: *
EagleId: 7499412216383253208014035e

&lt;!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN"&gt;
&lt;html&gt;
&lt;head&gt;&lt;title&gt;302 Found&lt;/title&gt;&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;302 Found&lt;/h1&gt;
&lt;p&gt;The requested resource resides temporarily under a different URI.&lt;/p&gt;
&lt;hr/&gt;Powered by Tengine&lt;/body&gt;
&lt;/html&gt;
</pre>

<p>
<code>-I</code> 参数则只是显示头信息。<br>
</p>
</div>
</div>
<div id="outline-container-orgde7e26b" class="outline-3">
<h3 id="orgde7e26b">四、显示通信过程</h3>
<div class="outline-text-3" id="text-orgde7e26b">
<p>
<code>-v</code> 参数可以显示一次 http 通信的整个过程，包括端口连接和 http request 头信息。<br>
</p>

<ul class="org-ul">
<li>curl -v www.sina.com.cn<br></li>
</ul>

<pre class="example" id="org6e17a6d">
*   Trying 2408:874c:1ff:e:3::3fe:80...
* Connected to www.sina.com.cn (2408:874c:1ff:e:3::3fe) port 80 (#0)
&gt; GET / HTTP/1.1
&gt; Host: www.sina.com.cn
&gt; User-Agent: curl/7.79.1
&gt; Accept: */*
&gt;
* Mark bundle as not supporting multiuse
&lt; HTTP/1.1 302 Found
&lt; Server: Tengine
&lt; Date: Wed, 01 Dec 2021 02:32:53 GMT
&lt; Content-Type: text/html
&lt; Content-Length: 242
&lt; Connection: keep-alive
&lt; Location: https://www.sina.com.cn/
&lt; X-DSL-CHECK: 5
&lt; X-Via-CDN: f=alicdn,s=cache9.cn4027,c=2408:844c:608:220:c7ff:a61a:8ab9:be64;
&lt; Via: cache9.cn4027[,0]
&lt; Timing-Allow-Origin: *
&lt; EagleId: 7499421d16383259732214855e
&lt;
&lt;!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN"&gt;
&lt;html&gt;
&lt;head&gt;&lt;title&gt;302 Found&lt;/title&gt;&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;302 Found&lt;/h1&gt;
&lt;p&gt;The requested resource resides temporarily under a different URI.&lt;/p&gt;
&lt;hr/&gt;Powered by Tengine&lt;/body&gt;
&lt;/html&gt;
* Connection #0 to host www.sina.com.cn left intact
</pre>

<p>
或者使用 <code>--trace</code> 或 <code>--trace-ascii</code> 参数来查看更详细的通信过程。<br>
</p>

<ul class="org-ul">
<li>curl &#x2013;trace output.txt www.sina.com.cn<br></li>
<li>curl &#x2013;trace-ascii output.txt www.sina.com.cn<br></li>
</ul>

<p>
需要打开 output.txt 文件查看。<br>
</p>
</div>
</div>
<div id="outline-container-org19be7c5" class="outline-3">
<h3 id="org19be7c5">五、发送表单信息</h3>
<div class="outline-text-3" id="text-org19be7c5">
<p>
发送表单信息有GET和POST两种方法。GET方法相对简单，只要把数据附在网址后面就行。<br>
</p>

<ul class="org-ul">
<li>curl example.com/form.cgi?data=xxx<br></li>
</ul>

<p>
POST方法必须把数据和网址分开，curl就要用到&#x2013;data参数。<br>
</p>

<ul class="org-ul">
<li>curl -X POST &#x2013;data "data=xxx" example.com/form.cgi<br></li>
</ul>

<p>
如果你的数据没有经过表单编码，还可以让curl为你编码，参数是 <code>--data-urlencode</code> 。<br>
</p>

<ul class="org-ul">
<li>curl -X POST&#x2013;data-urlencode "date=April 1" example.com/form.cgi<br></li>
</ul>
</div>
</div>
<div id="outline-container-org2415da4" class="outline-3">
<h3 id="org2415da4">六、HTTP动词</h3>
<div class="outline-text-3" id="text-org2415da4">
<p>
curl默认的HTTP动词是GET，使用 <code>-X</code> 参数可以支持其他动词。<br>
</p>

<ul class="org-ul">
<li>curl -X POST www.example.com<br></li>
<li>curl -X DELETE www.example.com<br></li>
</ul>
</div>
</div>
<div id="outline-container-orga10ae15" class="outline-3">
<h3 id="orga10ae15">七、文件上传</h3>
<div class="outline-text-3" id="text-orga10ae15">
<p>
假定文件上传的表单是下面这样：<br>
</p>

<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #81a2be;">form</span> <span style="color: #cc6666;">method</span>=<span style="color: #b5bd68;">"POST"</span> <span style="color: #cc6666;">enctype</span>=<span style="color: #b5bd68;">'multipart/form-data'</span> <span style="color: #cc6666;">action</span>=<span style="color: #b5bd68;">"upload.cgi"</span>&gt;
  &lt;<span style="color: #81a2be;">input</span> type=file name=upload&gt;
  &lt;<span style="color: #81a2be;">input</span> type=submit name=press <span style="color: #cc6666;">value</span>=<span style="color: #b5bd68;">"OK"</span>&gt;
&lt;/<span style="color: #81a2be;">form</span>&gt;
</pre>
</div>

<p>
你可以用curl这样上传文件：<br>
</p>

<ul class="org-ul">
<li>curl &#x2013;form upload=@localfilename &#x2013;form press=OK [URL]<br></li>
</ul>
</div>
</div>
<div id="outline-container-org23ca775" class="outline-3">
<h3 id="org23ca775">八、Referer字段</h3>
<div class="outline-text-3" id="text-org23ca775">
<p>
有时你需要在http request头信息中，提供一个referer字段，表示你是从哪里跳转过来的。<br>
</p>

<ul class="org-ul">
<li>curl &#x2013;referer <a href="http://www.example.com">http://www.example.com</a> <a href="http://www.example.com">http://www.example.com</a><br></li>
</ul>
</div>
</div>
<div id="outline-container-orgc9c2b35" class="outline-3">
<h3 id="orgc9c2b35">九、User Agent字段</h3>
<div class="outline-text-3" id="text-orgc9c2b35">
<p>
这个字段是用来表示客户端的设备信息。服务器有时会根据这个字段，针对不同设备，返回不同格式的网页，比如手机版和桌面版。<br>
</p>

<p>
iPhone4的User Agent是：<br>
</p>

<pre class="example" id="org7ff1261">
　Mozilla/5.0 (iPhone; U; CPU iPhone OS 4_0 like Mac OS X; en-us) AppleWebKit/532.9 (KHTML, like Gecko) Version/4.0.5 Mobile/8A293 Safari/6531.22.7
</pre>

<p>
curl可以这样模拟：<br>
</p>

<ul class="org-ul">
<li>curl &#x2013;user-agent "[User Agent]" [URL]<br></li>
</ul>
</div>
</div>
<div id="outline-container-orgad91bb4" class="outline-3">
<h3 id="orgad91bb4">十、cookie</h3>
<div class="outline-text-3" id="text-orgad91bb4">
<p>
使用 <code>--cookie</code> 参数，可以让curl发送cookie。<br>
</p>

<ul class="org-ul">
<li>curl &#x2013;cookie "name=xxx" www.example.com<br></li>
</ul>

<p>
至于具体的cookie的值，可以从http response头信息的 <code>Set-Cookie</code> 字段中得到。<br>
</p>

<p>
<code>-c cookie-file</code> 可以保存服务器返回的cookie到文件， <code>-b cookie-file</code> 可以使用这个文件作为cookie信息，进行后续的请求。<br>
</p>

<div class="org-src-container">
<pre class="src src-shell">$ curl -c cookies http://example.com
$ curl -b cookies http://example.com
</pre>
</div>
</div>
</div>
<div id="outline-container-org33da60d" class="outline-3">
<h3 id="org33da60d">十一、增加头信息</h3>
<div class="outline-text-3" id="text-org33da60d">
<p>
有时需要在 http request 之中，自行增加一个头信息。 ~ &#x2013;header ~ 参数就可以起到这个作用。<br>
</p>

<ul class="org-ul">
<li>curl &#x2013;header "Content-Type:application/json" <a href="http://example.com">http://example.com</a><br></li>
</ul>
</div>
</div>
<div id="outline-container-orgf31a342" class="outline-3">
<h3 id="orgf31a342">十二、HTTP认证</h3>
<div class="outline-text-3" id="text-orgf31a342">
<p>
有些网域需要HTTP认证，这时curl需要用到 ~ &#x2013;user ~ 参数。<br>
</p>

<ul class="org-ul">
<li>curl &#x2013;user name:password example.com<br></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgd9d8b1c" class="outline-2">
<h2 id="orgd9d8b1c">使用 curl 代替 postman</h2>
<div class="outline-text-2" id="text-orgd9d8b1c">
</div>
<div id="outline-container-org8d667c7" class="outline-3">
<h3 id="org8d667c7">发送 GET 请求</h3>
<div class="outline-text-3" id="text-org8d667c7">
<ul class="org-ul">
<li>curl example.com/form.cgi?data=xxx<br></li>
</ul>
</div>
</div>
<div id="outline-container-org77e82a6" class="outline-3">
<h3 id="org77e82a6">发送 POST 请求</h3>
<div class="outline-text-3" id="text-org77e82a6">
<ul class="org-ul">
<li>curl -H "Content-Type: application/json" -X POST -d "{\"id\": 1, \"username\": \"haoran\", \"password\": \"haoran232\", \"grade\": 2019, \"role_id\": 1}" <a href="http://127.0.0.1:8070/api/v1/user/renew">http://127.0.0.1:8070/api/v1/user/renew</a><br></li>
</ul>
</div>
</div>
<div id="outline-container-org75ba96f" class="outline-3">
<h3 id="org75ba96f">发送 PUT 请求</h3>
<div class="outline-text-3" id="text-org75ba96f">
<ul class="org-ul">
<li>curl -H "Content-Type: application/json" -X PUT -d "{\"id\": 1, \"username\": \"haoran\", \"password\": \"haoran232\", \"grade\": 2019, \"role_id\": 1}" <a href="http://127.0.0.1:8070/api/v1/user/renew">http://127.0.0.1:8070/api/v1/user/renew</a><br></li>
</ul>
</div>
</div>
<div id="outline-container-orgf053eff" class="outline-3">
<h3 id="orgf053eff">发送 DELETE 请求</h3>
<div class="outline-text-3" id="text-orgf053eff">
<ul class="org-ul">
<li>curl -H "Content-Type: application/json" -X DELETE -d "{\"id\": 1, \"username\": \"haoran\", \"password\": \"haoran232\", \"grade\": 2019, \"role_id\": 1}" <a href="http://127.0.0.1:8070/api/v1/user/renew">http://127.0.0.1:8070/api/v1/user/renew</a><br></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org957f5aa" class="outline-2">
<h2 id="org957f5aa">curl 参数</h2>
<div class="outline-text-2" id="text-org957f5aa">
<p>
<a href="https://www.ruanyifeng.com/blog/2019/09/curl-reference.html">https://www.ruanyifeng.com/blog/2019/09/curl-reference.html</a><br>
</p>

<p>
curl 是常用的命令行工具，用来请求 Web 服务器。它的名字就是客户端（client）的 URL 工具的意思。<br>
</p>

<p>
它的功能非常强大，命令行参数多达几十种。如果熟练的话，完全可以取代 Postman 这一类的图形界面工具。<br>
</p>

<dl class="org-dl">
<dt>curl <a href="http://www.baidu.com">http://www.baidu.com</a></dt><dd>向 <code>www.baidu.com</code> 发送 GET 请求<br></dd>
</dl>
</div>
<div id="outline-container-org5d9851e" class="outline-3">
<h3 id="org5d9851e">-A</h3>
<div class="outline-text-3" id="text-org5d9851e">
<p>
指定客户端的用户代理标头，即 <code>User-Agent</code> ，默认的用户代理字符串是 <code>curl/[version]</code><br>
</p>

<ul class="org-ul">
<li>curl -A 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/76.0.3809.100 Safari/537.36' <a href="https://google.com">https://google.com</a><br></li>
</ul>

<p>
上面命令将User-Agent改成 Chrome 浏览器。<br>
</p>

<ul class="org-ul">
<li>curl -A '' <a href="https://google.com">https://google.com</a><br></li>
</ul>

<p>
上面命令会移除User-Agent标头。<br>
</p>

<p>
也可以通过-H参数直接指定标头，更改User-Agent。<br>
</p>

<ul class="org-ul">
<li>curl -H 'User-Agent: php/1.0' <a href="https://google.com">https://google.com</a><br></li>
</ul>
</div>
</div>
<div id="outline-container-orgc17da27" class="outline-3">
<h3 id="orgc17da27">-b</h3>
<div class="outline-text-3" id="text-orgc17da27">
<p>
-b参数用来向服务器发送 Cookie。<br>
</p>

<ul class="org-ul">
<li>curl -b 'foo=bar' <a href="https://google.com">https://google.com</a><br></li>
</ul>

<p>
上面命令会生成一个标头Cookie: foo=bar，向服务器发送一个名为foo、值为bar的 Cookie。<br>
</p>


<ul class="org-ul">
<li>curl -b 'foo1=bar;foo2=bar2' <a href="https://google.com">https://google.com</a><br></li>
</ul>

<p>
上面命令发送两个 Cookie。<br>
</p>

<ul class="org-ul">
<li>curl -b cookies.txt <a href="https://www.google.com">https://www.google.com</a><br></li>
</ul>

<p>
上面命令读取本地文件cookies.txt，里面是服务器设置的 Cookie（参见-c参数），将其发送到服务器。<br>
</p>
</div>
</div>
<div id="outline-container-org4272418" class="outline-3">
<h3 id="org4272418">-c</h3>
<div class="outline-text-3" id="text-org4272418">
<p>
-c参数将服务器设置的 Cookie 写入一个文件。<br>
</p>

<ul class="org-ul">
<li>curl -c cookies.txt <a href="https://www.google.com">https://www.google.com</a><br></li>
</ul>

<p>
上面命令将服务器的 HTTP 回应所设置 Cookie 写入文本文件cookies.txt。<br>
</p>
</div>
</div>
<div id="outline-container-org28613c5" class="outline-3">
<h3 id="org28613c5">-d</h3>
<div class="outline-text-3" id="text-org28613c5">
<p>
-d参数用于发送 POST 请求的数据体。<br>
</p>

<ul class="org-ul">
<li>curl -d 'login=emma＆password=123'-X POST <a href="https://google.com/login">https://google.com/login</a><br></li>
<li>curl -d 'login=emma' -d 'password=123' -X POST  <a href="https://google.com/login">https://google.com/login</a><br></li>
</ul>

<p>
使用 -d 参数以后，HTTP 请求会自动加上标头Content-Type : application/x-www-form-urlencoded。并且会自动将请求转为 POST 方法，因此可以省略-X POST。<br>
</p>

<p>
-d 参数可以读取本地文本文件的数据，向服务器发送。<br>
</p>


<ul class="org-ul">
<li>curl -d '@data.txt' <a href="https://google.com/login">https://google.com/login</a><br></li>
</ul>

<p>
上面命令读取 data.txt 文件的内容，作为数据体向服务器发送。<br>
</p>
</div>
</div>
<div id="outline-container-org779be2a" class="outline-3">
<h3 id="org779be2a">&#x2013;data-urlencode</h3>
<div class="outline-text-3" id="text-org779be2a">
<p>
&#x2013;data-urlencode参数等同于-d，发送 POST 请求的数据体，区别在于会自动将发送的数据进行 URL 编码。<br>
</p>

<ul class="org-ul">
<li>curl &#x2013;data-urlencode 'comment=hello world' <a href="https://google.com/login">https://google.com/login</a><br></li>
</ul>

<p>
上面代码中，发送的数据hello world之间有一个空格，需要进行 URL 编码。<br>
</p>
</div>
</div>
<div id="outline-container-orgf8f2652" class="outline-3">
<h3 id="orgf8f2652">-e</h3>
<div class="outline-text-3" id="text-orgf8f2652">
<p>
-e参数用来设置 HTTP 的标头Referer，表示请求的来源。<br>
</p>

<ul class="org-ul">
<li>curl -e 'https://google.com?q=example' <a href="https://www.example.com">https://www.example.com</a><br></li>
</ul>

<p>
上面命令将Referer标头设为<a href="https://google.com?q=example">https://google.com?q=example</a>。<br>
</p>

<p>
-H 参数可以通过直接添加标头Referer，达到同样效果。<br>
</p>

<ul class="org-ul">
<li>curl -H 'Referer: <a href="https://google.com?q=example">https://google.com?q=example</a>' <a href="https://www.example.com">https://www.example.com</a><br></li>
</ul>
</div>
</div>
<div id="outline-container-orged750f2" class="outline-3">
<h3 id="orged750f2">-F</h3>
<div class="outline-text-3" id="text-orged750f2">
<p>
-F 参数用来向服务器上传二进制文件。<br>
</p>

<ul class="org-ul">
<li>curl -F 'file=@photo.png' <a href="https://google.com/profile">https://google.com/profile</a><br></li>
</ul>

<p>
上面命令会给 HTTP 请求加上标头 Content-Type: multipart/form-data，然后将文件 photo.png 作为 file 字段上传。<br>
</p>

<p>
-F 参数可以指定 MIME 类型。<br>
</p>

<ul class="org-ul">
<li>curl -F 'file=@photo.png;type=image/png' <a href="https://google.com/profile">https://google.com/profile</a><br></li>
</ul>

<p>
上面命令指定 MIME 类型为 image/png，否则 curl 会把 MIME 类型设为 application/octet-stream。<br>
</p>

<p>
-F 参数也可以指定文件名。<br>
</p>

<ul class="org-ul">
<li>curl -F 'file=@photo.png;filename=me.png' <a href="https://google.com/profile">https://google.com/profile</a><br></li>
</ul>

<p>
上面命令中，原始文件名为 photo.png，但是服务器接收到的文件名为 me.png。<br>
</p>
</div>
</div>
<div id="outline-container-orgb56a3dc" class="outline-3">
<h3 id="orgb56a3dc">-G</h3>
<div class="outline-text-3" id="text-orgb56a3dc">
<p>
-G参数用来构造 URL 的查询字符串。<br>
</p>

<ul class="org-ul">
<li><p>
curl -G -d 'q=kitties' -d 'count=20' <a href="https://google.com/search">https://google.com/search</a><br>
</p>

<p>
上面命令会发出一个 GET 请求，实际请求的 URL 为<a href="https://google.com/search?q=kitties&amp;count=20%E3%80%82%E5%A6%82%E6%9E%9C%E7%9C%81%E7%95%A5--G%EF%BC%8C%E4%BC%9A%E5%8F%91%E5%87%BA%E4%B8%80%E4%B8%AA">https://google.com/search?q=kitties&amp;count=20%E3%80%82%E5%A6%82%E6%9E%9C%E7%9C%81%E7%95%A5--G%EF%BC%8C%E4%BC%9A%E5%8F%91%E5%87%BA%E4%B8%80%E4%B8%AA</a> POST 请求。<br>
</p>

<p>
如果数据需要 URL 编码，可以结合&#x2013;data&#x2013;urlencode参数。<br>
</p></li>

<li>curl -G &#x2013;data-urlencode 'comment=hello world' <a href="https://www.example.com">https://www.example.com</a><br></li>
</ul>
</div>
</div>
<div id="outline-container-org58eb96d" class="outline-3">
<h3 id="org58eb96d">-H</h3>
<div class="outline-text-3" id="text-org58eb96d">
<p>
-H 参数添加 HTTP 请求的标头。<br>
</p>

<ul class="org-ul">
<li>curl -H 'Accept-Language: en-US' <a href="https://google.com">https://google.com</a><br></li>
</ul>

<p>
上面命令添加 HTTP 标头 Accept-Language: en-US。<br>
</p>

<ul class="org-ul">
<li>curl -H 'Accept-Language: en-US' -H 'Secret-Message: xyzzy' <a href="https://google.com">https://google.com</a><br></li>
</ul>

<p>
上面命令添加两个 HTTP 标头。<br>
</p>

<ul class="org-ul">
<li>curl -d '{"login": "emma", "pass": "123"}' -H 'Content-Type: application/json' <a href="https://google.com/login">https://google.com/login</a><br></li>
</ul>

<p>
上面命令添加 HTTP 请求的标头是 Content-Type: application/json，然后用 -d 参数发送 JSON 数据。<br>
</p>
</div>
</div>
<div id="outline-container-org7e1a5ab" class="outline-3">
<h3 id="org7e1a5ab">-i</h3>
<div class="outline-text-3" id="text-org7e1a5ab">
<p>
-i 参数打印出服务器回应的 HTTP 标头。<br>
</p>

<ul class="org-ul">
<li>curl -i <a href="https://www.example.com">https://www.example.com</a><br></li>
</ul>

<p>
上面命令收到服务器回应后，先输出服务器回应的标头，然后空一行，再输出网页的源码。<br>
</p>
</div>
</div>
<div id="outline-container-orgeda1b40" class="outline-3">
<h3 id="orgeda1b40">-I</h3>
<div class="outline-text-3" id="text-orgeda1b40">
<p>
-I参数向服务器发出 HEAD 请求，然会将服务器返回的 HTTP 标头打印出来。<br>
</p>

<ul class="org-ul">
<li>curl -I <a href="https://www.example.com">https://www.example.com</a><br></li>
</ul>

<p>
上面命令输出服务器对 HEAD 请求的回应。<br>
</p>

<p>
&#x2013;head参数等同于-I。<br>
</p>

<ul class="org-ul">
<li>curl &#x2013;head <a href="https://www.example.com">https://www.example.com</a><br></li>
</ul>
</div>
</div>
<div id="outline-container-orge81626d" class="outline-3">
<h3 id="orge81626d">-k</h3>
<div class="outline-text-3" id="text-orge81626d">
<p>
-k参数指定跳过 SSL 检测。<br>
</p>

<ul class="org-ul">
<li>curl -k <a href="https://www.example.com">https://www.example.com</a><br></li>
</ul>

<p>
上面命令不会检查服务器的 SSL 证书是否正确。<br>
</p>
</div>
</div>
<div id="outline-container-org68d580c" class="outline-3">
<h3 id="org68d580c">-L</h3>
<div class="outline-text-3" id="text-org68d580c">
<p>
-L参数会让 HTTP 请求跟随服务器的重定向。curl 默认不跟随重定向。<br>
</p>

<ul class="org-ul">
<li>curl -L -d 'tweet=hi' <a href="https://api.twitter.com/tweet">https://api.twitter.com/tweet</a><br></li>
</ul>
</div>
</div>
<div id="outline-container-orga3987ee" class="outline-3">
<h3 id="orga3987ee">&#x2013;limit-rate</h3>
<div class="outline-text-3" id="text-orga3987ee">
<p>
&#x2013;limit-rate用来限制 HTTP 请求和回应的带宽，模拟慢网速的环境。<br>
</p>

<ul class="org-ul">
<li>curl &#x2013;limit-rate 200k <a href="https://google.com">https://google.com</a><br></li>
</ul>

<p>
上面命令将带宽限制在每秒 200K 字节。<br>
</p>
</div>
</div>
<div id="outline-container-orgdde78b7" class="outline-3">
<h3 id="orgdde78b7">-o</h3>
<div class="outline-text-3" id="text-orgdde78b7">
<p>
-o 参数将服务器的回应保存成文件，等同于 wget 命令。<br>
</p>

<ul class="org-ul">
<li>curl -o example.html <a href="https://www.example.com">https://www.example.com</a><br></li>
</ul>

<p>
上面命令将 www.example.com 保存成 example.html。<br>
</p>
</div>
</div>
<div id="outline-container-org6ccf030" class="outline-3">
<h3 id="org6ccf030">-O</h3>
<div class="outline-text-3" id="text-org6ccf030">
<p>
-O参数将服务器回应保存成文件，并将 URL 的最后部分当作文件名。<br>
</p>

<ul class="org-ul">
<li>curl -O <a href="https://www.example.com/foo/bar.html">https://www.example.com/foo/bar.html</a><br></li>
</ul>

<p>
上面命令将服务器回应保存成文件，文件名为bar.html。<br>
</p>
</div>
</div>
<div id="outline-container-org285daad" class="outline-3">
<h3 id="org285daad">-s</h3>
<div class="outline-text-3" id="text-org285daad">
<p>
-s参数将不输出错误和进度信息。<br>
</p>

<ul class="org-ul">
<li>curl -s <a href="https://www.example.com">https://www.example.com</a><br></li>
</ul>

<p>
上面命令一旦发生错误，不会显示错误信息。不发生错误的话，会正常显示运行结果。<br>
</p>

<p>
如果想让 curl 不产生任何输出，可以使用下面的命令。<br>
</p>

<ul class="org-ul">
<li>curl -s -o /dev/null <a href="https://google.com">https://google.com</a><br></li>
</ul>
</div>
</div>
<div id="outline-container-orgbe78f7e" class="outline-3">
<h3 id="orgbe78f7e">-S</h3>
<div class="outline-text-3" id="text-orgbe78f7e">
<p>
-S参数指定只输出错误信息，通常与-s一起使用。<br>
</p>

<ul class="org-ul">
<li>curl -s -o /dev/null <a href="https://google.com">https://google.com</a><br></li>
</ul>

<p>
上面命令没有任何输出，除非发生错误。<br>
</p>
</div>
</div>
<div id="outline-container-org0b16fd6" class="outline-3">
<h3 id="org0b16fd6">-u</h3>
<div class="outline-text-3" id="text-org0b16fd6">
<p>
-u参数用来设置服务器认证的用户名和密码。<br>
</p>

<ul class="org-ul">
<li>curl -u 'bob:12345' <a href="https://google.com/login">https://google.com/login</a><br></li>
</ul>

<p>
上面命令设置用户名为bob，密码为12345，然后将其转为 HTTP 标头Authorization: Basic Ym9iOjEyMzQ1。<br>
</p>

<p>
curl 能够识别 URL 里面的用户名和密码。<br>
</p>

<ul class="org-ul">
<li>curl <a href="https://bob:12345@google.com/login">https://bob:12345@google.com/login</a><br></li>
</ul>

<p>
上面命令能够识别 URL 里面的用户名和密码，将其转为上个例子里面的 HTTP 标头。<br>
</p>

<ul class="org-ul">
<li>curl -u 'bob' <a href="https://google.com/login">https://google.com/login</a><br></li>
</ul>

<p>
上面命令只设置了用户名，执行后，curl 会提示用户输入密码。<br>
</p>
</div>
</div>
<div id="outline-container-org24cb44b" class="outline-3">
<h3 id="org24cb44b">-v</h3>
<div class="outline-text-3" id="text-org24cb44b">
<p>
-v 参数输出通信的整个过程，用于调试。<br>
</p>

<ul class="org-ul">
<li>curl -v <a href="https://www.example.com">https://www.example.com</a><br></li>
</ul>

<p>
&#x2013;trace 参数也可以用于调试，还会输出原始的二进制数据。<br>
</p>

<ul class="org-ul">
<li>curl &#x2013;trace - <a href="https://www.example.com">https://www.example.com</a><br></li>
</ul>
</div>
</div>
<div id="outline-container-org1bf43eb" class="outline-3">
<h3 id="org1bf43eb">-x</h3>
<div class="outline-text-3" id="text-org1bf43eb">
<p>
-x参数指定 HTTP 请求的代理。<br>
</p>

<ul class="org-ul">
<li>curl -x socks5://james:cats@myproxy.com:8080 <a href="https://www.example.com">https://www.example.com</a><br></li>
</ul>

<p>
上面命令指定 HTTP 请求通过myproxy.com:8080的 socks5 代理发出。<br>
</p>

<p>
如果没有指定代理协议，默认为 HTTP。<br>
</p>

<ul class="org-ul">
<li>curl -x james:cats@myproxy.com:8080 <a href="https://www.example.com">https://www.example.com</a><br></li>
</ul>

<p>
上面命令中，请求的代理使用 HTTP 协议。<br>
</p>
</div>
</div>
<div id="outline-container-orga84c5ce" class="outline-3">
<h3 id="orga84c5ce">-X</h3>
<div class="outline-text-3" id="text-orga84c5ce">
<p>
-X参数指定 HTTP 请求的方法。<br>
</p>

<ul class="org-ul">
<li>curl -X POST <a href="https://www.example.com">https://www.example.com</a><br></li>
</ul>

<p>
上面命令对<a href="https://www.example.com发出">https://www.example.com发出</a> POST 请求。<br>
</p>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Date: 2021-12-01 09:12 Wed</p>
<p class="author">Author: L.M.haoran</p>
<p class="date">Created: 2023-01-12</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
