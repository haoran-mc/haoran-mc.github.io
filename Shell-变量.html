<!DOCTYPE html>
<html lang="zh">
<head>
<!-- 2023-01-25 -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>SHELL-变量</title>
<meta name="author" content="Haoran Liu" />
<meta name="description" content="Copyright © 2023, Haoran Liu, all rights reserved." />
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="static/css/org.css"/>
</head>
<body>
<div id="content" class="content">
<h1 class="title">SHELL-变量</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org9e67041">默认变量类型：字符串</a></li>
<li><a href="#org7f41c32">重定义变量</a></li>
<li><a href="#orgd0cea08">只读变量</a></li>
<li><a href="#org351efad">shell 脚本的默认变量（$0、$1&#x2026;）</a></li>
</ul>
</div>
</div>

<div id="outline-container-org9e67041" class="outline-2">
<h2 id="org9e67041">默认变量类型：字符串</h2>
<div class="outline-text-2" id="text-org9e67041">
<p>
字符串是 shell 编程中默认的变量类型，也是最常用的数据类型，字符串的表示可以用单引号，也可以用双引号，也可以不用引号。<br>
</p>

<p>
变量的设置规则：<br>
</p>

<ul class="org-ul">
<li>变量与变量内容以一个等号 <code>=</code> 来链接，如： <code>your_name=Alice</code> ，定义变量时，变量名不加美元符号 <code>$</code><br></li>
<li>等号两边不能直接接空白字符，如下所示为错误；<br></li>
<li>变量名称只能是英文字母与数字，但是开头字符不能是数字；<br></li>
<li>变量内容若有空白字符可使用双引号 <code>"</code> 或单引号 <code>'</code> 将变量内容结合起来，但<br>
<ul class="org-ul">
<li><span class="underline">双引号内的特殊字符如 <code>$</code> 等，可以保有原本的特性</span><br></li>
<li>单引号内的特殊字符则仅为一般字符（纯文本）<br></li>
<li>可用跳脱字符 <code>\</code> 将特殊符号（如 [Enter], $, \, 空白字符, '等）变成一般字符<br></li>
</ul></li>
<li><p>
在一串指令的执行中，还需要借由其他额外的指令所提供的信息时，可以使用反单引号 <code>`</code> 或 <code>$</code><br>
</p>
<div class="org-src-container">
<pre class="src src-shell"><span style="color: #1ea8fc;">cd</span> /lib/modules/<span style="color: #ff2afc; font-weight: bold;">`uname -r`</span>/kernel
<span style="color: #546A90;"># </span><span style="color: #546A90;">&#24314;&#35758;&#20351;&#29992;&#19979;&#38754;&#36825;&#31181;&#26041;&#24335;&#65292;&#21644;&#25968;&#23398;&#20013;&#21152;&#20943;&#20056;&#38500;&#30340;&#25324;&#21495;&#30456;&#20284;</span>
<span style="color: #1ea8fc;">cd</span> /lib/modules/$(uname -r)/kernel
</pre>
</div></li>
<li><p>
若该变量为扩增变量内容时，则可用 "$变量名称" 或 ${变量} 累加内容<br>
</p>
<div class="org-src-container">
<pre class="src src-shell"><span style="color: #df85ff;">PATH</span>=<span style="color: #7984D1;">"$PATH"</span>:/home/bin
<span style="color: #df85ff;">PATH</span>=${<span style="color: #df85ff;">PATH</span>}:/home/bin
</pre>
</div></li>
<li>若该变量需要在其他子程序执行，则需要以 export 来使变量变成环境变量<br></li>
<li>通常大写字符为系统默认变量，自行设置变量可以使用小写字符，方便判断（纯粹依照使用者兴趣与嗜好）；<br></li>
<li>取消变量的方法为使用 <code>unset~me</code><br></li>
</ul>
</div>
</div>
<div id="outline-container-org7f41c32" class="outline-2">
<h2 id="org7f41c32">重定义变量</h2>
<div class="outline-text-2" id="text-org7f41c32">
<p>
已定义的变量，可以被重新定义，如：<br>
</p>

<div class="org-src-container">
<pre class="src src-shell"><span style="color: #df85ff;">your_name</span>=<span style="color: #7984D1;">"Alice"</span>
<span style="color: #1ea8fc;">echo</span> $<span style="color: #df85ff;">your_name</span>

<span style="color: #df85ff;">your_name</span>=<span style="color: #7984D1;">"Bob"</span>
<span style="color: #1ea8fc;">echo</span> $<span style="color: #df85ff;">your_name</span>
</pre>
</div>

<p>
这样写是合法的，但注意，第二次赋值的时候不能写 <code>$your_name="alibaba"</code> ，使用变量的时候才加美元符。<br>
</p>
</div>
</div>
<div id="outline-container-orgd0cea08" class="outline-2">
<h2 id="orgd0cea08">只读变量</h2>
<div class="outline-text-2" id="text-orgd0cea08">
<p>
使用 <code>readonly</code> 命令可以将变量定义为只读变量，只读变量的值不能被改变。<br>
</p>

<div class="org-src-container">
<pre class="src src-shell"><span style="color: #546A90;">#</span><span style="color: #546A90;">!/bin/</span><span style="color: #ff2afc; font-weight: bold;">bash</span>
<span style="color: #df85ff;">your_name</span>=Tom
<span style="color: #1ea8fc;">readonly</span> your_name
</pre>
</div>
</div>
</div>
<div id="outline-container-org351efad" class="outline-2">
<h2 id="org351efad">shell 脚本的默认变量（$0、$1&#x2026;）<a id="org87f4468"></a></h2>
<div class="outline-text-2" id="text-org351efad">
<div class="org-src-container">
<pre class="src src-bash">/path/to/scriptname opt1 opt2 opt3 opt4
$<span style="color: #df85ff;">0</span>                  $<span style="color: #df85ff;">1</span>   $<span style="color: #df85ff;">2</span>   $<span style="color: #df85ff;">3</span>   $<span style="color: #df85ff;">4</span>
</pre>
</div>

<dl class="org-dl">
<dt><code>$0</code></dt><dd>执行脚本的文件名，使用 <code>name=$(basename $0)</code> 将脚本的运行路径剥离掉；<br></dd>
<dt><code>$1</code></dt><dd>执行命令后接的第一个参数；<br></dd>
<dt><code>$2</code></dt><dd>执行命令后接的第二个参数；<br></dd>
<dt><code>$3</code></dt><dd>执行命令后接的第三个参数；<br></dd>
<dt><code>$4</code></dt><dd>执行命令后接的第四个参数；<br></dd>
<dt>&#x2026;</dt><dd>&#x2026;<br></dd>
<dt><code>${10}</code></dt><dd>执行命令后接的第十个参数；<br></dd>
<dt><code>$#</code></dt><dd>参数个数，返回最后一个参数： <code>${!#}</code> ，花括号内不能使用 <code>$</code> ；<br></dd>
<dt><code>$@</code></dt><dd>代表【"$1" "$2" "$3" "$4"】之意，每个变量是独立的；<br></dd>
<dt><code>$*</code></dt><dd>代表【"$1c$2c$3c$4"】之意，其中 c 为分隔字符，默认为空格，所以本例代表【"$1 $2 $3 $4"】；<br></dd>
</dl>

<p>
这个 <code>$@</code> 和 <code>$*</code> 还是不同的，不过，一般情况下可以直接记忆 <code>$@</code> 。<br>
</p>

<ul class="org-ul">
<li><p>
shift: 造成参数变量号码偏移，可以理解为每次删除前面一个参数；<br>
</p>

<pre class="example" id="org1588269">
# 假设有六个参数 [ one two three four five six ]
shift   # [ one two three four five six ]
shift   # [ two three four five six ]
shift   # [ three four five six ]
shift   # [ four five six ]
shift   # [ five six ]
</pre>

<p>
注意： <code>$0</code> 不会改变。<br>
</p></li>
</ul>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Date: 2023-01-21 16:01 Sat</p>
<p class="author">Author: Haoran Liu</p>
<p class="date">Created: 2023-01-25</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
