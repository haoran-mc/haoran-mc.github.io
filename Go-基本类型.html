<!DOCTYPE html>
<html lang="zh">
<head>
<!-- 2022-02-11 Fri 21:11 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>基本类型</title>
<meta name="generator" content="Org mode">
<meta name="author" content="L.M.haoran">
<meta name="description" content="Copyright © 2022, L.M.haoran, all rights reserved."
>

                <link rel="stylesheet" href="static/css/org.css" type="text/css"  />
                <script type="module" src="static/js/main.js" defer></script>
                <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "0em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body>
<div id="content">
<h1 class="title">基本类型</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org8389adb">基本类型介绍</a></li>
<li><a href="#org372a5a1">整型</a></li>
<li><a href="#org5cb42c8">浮点型</a></li>
<li><a href="#org44ee388">复数</a></li>
<li><a href="#org81879d5">布尔值</a></li>
<li><a href="#orgffa7e4f">字符串</a>
<ul>
<li><a href="#org6d5d803">字符串转义符</a></li>
<li><a href="#org447c9e5">多行字符串</a></li>
<li><a href="#org3e0fedc">字符串的常用操作</a></li>
<li><a href="#orgf378c79">字符串的遍历</a>
<ul>
<li><a href="#org792dc4a">for</a></li>
<li><a href="#org0c84a5d">for range</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orge69e181">byte 和 rune 类型</a></li>
<li><a href="#org549cb83">修改字符串</a></li>
<li><a href="#org5209b63">类型转换</a></li>
</ul>
</div>
</div>

<div id="outline-container-org8389adb" class="outline-2">
<h2 id="org8389adb">基本类型介绍</h2>
<div class="outline-text-2" id="text-org8389adb">
<p>
Golang 更明确的数字类型命名，支持 Unicode，支持常用数据结构。<br>
</p>

<table>


<colgroup>
<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">类型</th>
<th scope="col" class="org-right">长度(字节)</th>
<th scope="col" class="org-right">默认值</th>
<th scope="col" class="org-left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">bool</td>
<td class="org-right">1</td>
<td class="org-right">false</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">byte</td>
<td class="org-right">1</td>
<td class="org-right">0</td>
<td class="org-left">uint8</td>
</tr>

<tr>
<td class="org-left">rune</td>
<td class="org-right">4</td>
<td class="org-right">0</td>
<td class="org-left">Unicode Code Point, int32</td>
</tr>

<tr>
<td class="org-left">int, uint</td>
<td class="org-right">4或8</td>
<td class="org-right">0</td>
<td class="org-left">32 或 64 位</td>
</tr>

<tr>
<td class="org-left">int8, uint8</td>
<td class="org-right">1</td>
<td class="org-right">0</td>
<td class="org-left">-128 ~ 127, 0 ~ 255, byte是uint8 的别名</td>
</tr>

<tr>
<td class="org-left">int16, uint16</td>
<td class="org-right">2</td>
<td class="org-right">0</td>
<td class="org-left">-32768 ~ 32767, 0 ~ 65535</td>
</tr>

<tr>
<td class="org-left">int32, uint32</td>
<td class="org-right">4</td>
<td class="org-right">0</td>
<td class="org-left">-21亿~ 21亿, 0 ~ 42亿, rune是int32 的别名</td>
</tr>

<tr>
<td class="org-left">int64, uint64</td>
<td class="org-right">8</td>
<td class="org-right">0</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">float32</td>
<td class="org-right">4</td>
<td class="org-right">0.0</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">float64</td>
<td class="org-right">8</td>
<td class="org-right">0.0</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">complex64</td>
<td class="org-right">8</td>
<td class="org-right">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">complex128</td>
<td class="org-right">16</td>
<td class="org-right">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">uintptr</td>
<td class="org-right">4或8</td>
<td class="org-right">&#xa0;</td>
<td class="org-left">以存储指针的 uint32 或 uint64 整数</td>
</tr>

<tr>
<td class="org-left">array</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-left">值类型</td>
</tr>

<tr>
<td class="org-left">struct</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-left">值类型</td>
</tr>

<tr>
<td class="org-left">string</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">""</td>
<td class="org-left">UTF-8 字符串</td>
</tr>

<tr>
<td class="org-left">slice</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">nil</td>
<td class="org-left">引用类型</td>
</tr>

<tr>
<td class="org-left">map</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">nil</td>
<td class="org-left">引用类型</td>
</tr>

<tr>
<td class="org-left">channel</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">nil</td>
<td class="org-left">引用类型</td>
</tr>

<tr>
<td class="org-left">interface</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">nil</td>
<td class="org-left">接口</td>
</tr>

<tr>
<td class="org-left">function</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">nil</td>
<td class="org-left">函数</td>
</tr>
</tbody>
</table>

<p>
空指针值 nil。<br>
</p>

<p>
支持八进制、 六进制，以及科学记数法。标准库 math 定义了各数字类型取值范围。<br>
</p>

<div class="org-src-container">
<pre class="src src-go"><span style="color: #8787d7;">a</span>, <span style="color: #8787d7;">b</span>, <span style="color: #8787d7;">c</span>, <span style="color: #8787d7;">d</span> := <span style="color: #d75fd7;">071</span>, <span style="color: #d75fd7;">0x1F</span>, <span style="color: #d75fd7;">1e9</span>, math.MinInt16
</pre>
</div>
</div>
</div>
<div id="outline-container-org372a5a1" class="outline-2">
<h2 id="org372a5a1">整型</h2>
<div class="outline-text-2" id="text-org372a5a1">
<p>
整型分为以下两个大类： 按长度分为： <code>int8</code> 、 <code>int16</code> 、 <code>int32</code> 、 <code>int64</code> 对应的无符号整型： <code>uint8</code> 、 <code>uint16</code> 、 <code>uint32</code> 、 <code>uint64</code> 。<br>
</p>

<p>
其中， <code>uint8</code> 就是我们熟知的 <code>byte</code> 型， <code>int16</code> 对应 C 语言中的 <code>short</code> 型， <code>int64</code> 对应 C 语言中的 <code>long</code> 型。<br>
</p>
</div>
</div>
<div id="outline-container-org5cb42c8" class="outline-2">
<h2 id="org5cb42c8">浮点型</h2>
<div class="outline-text-2" id="text-org5cb42c8">
<p>
Go 语言支持两种浮点型数： <code>float32</code> 和 <code>float64</code> 。这两种浮点型数据格式遵循 <code>IEEE 754</code> 标准： <code>float32</code> 的浮点数的最大范围约为 <b>3.4e38</b> ，可以使用常量定义： <code>math.MaxFloat32</code> 。 <code>float64</code> 的浮点数的最大范围约为 <b>1.8e308</b> ，可以使用一个常量定义： <code>math.MaxFloat64</code> 。<br>
</p>
</div>
</div>
<div id="outline-container-org44ee388" class="outline-2">
<h2 id="org44ee388">复数</h2>
<div class="outline-text-2" id="text-org44ee388">
<p>
<code>complex64</code> 和 <code>complex128</code><br>
</p>

<p>
复数有实部和虚部， <code>complex64</code> 的实部和虚部为 32 位， <code>complex128</code> 的实部和虚部为 64 位。<br>
</p>
</div>
</div>
<div id="outline-container-org81879d5" class="outline-2">
<h2 id="org81879d5">布尔值</h2>
<div class="outline-text-2" id="text-org81879d5">
<p>
Go 语言中以 <code>bool</code> 类型进行声明布尔型数据，布尔型数据只有 true（真）和 false（假）两个值。<br>
</p>

<p>
<b>注意：</b><br>
</p>

<ul class="org-ul">
<li>布尔类型变量的默认值为 false。<br></li>
<li>Go 语言中不允许将整型强制转换为布尔型.<br></li>
<li>布尔型无法参与数值运算，也无法与其他类型进行转换。<br></li>
</ul>
</div>
</div>
<div id="outline-container-orgffa7e4f" class="outline-2">
<h2 id="orgffa7e4f">字符串</h2>
<div class="outline-text-2" id="text-orgffa7e4f">
<p>
Go 语言中的字符串以原生数据类型出现，使用字符串就像使用其他原生数据类型（ <code>int</code> 、 <code>bool</code> 、 <code>float32</code> 、 <code>float64</code>  等）一样。 Go 语言里的字符串的内部实现使用 UTF-8 编码。 字符串的值为双引号（"）中的内容，可以在 Go 语言的源码中直接添加非ASCII码字符。<br>
</p>
</div>
<div id="outline-container-org6d5d803" class="outline-3">
<h3 id="org6d5d803">字符串转义符</h3>
<div class="outline-text-3" id="text-org6d5d803">
<p>
Go 语言的字符串常见转义符包含回车、换行、单双引号、制表符等，如下表所示。<br>
</p>

<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">转义</th>
<th scope="col" class="org-left">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">\r</td>
<td class="org-left">回车符（返回行首）</td>
</tr>

<tr>
<td class="org-left">\n</td>
<td class="org-left">换行符（直接跳到下一行的同列位置）</td>
</tr>

<tr>
<td class="org-left">\t</td>
<td class="org-left">制表符</td>
</tr>

<tr>
<td class="org-left">\'</td>
<td class="org-left">单引号</td>
</tr>

<tr>
<td class="org-left">\"</td>
<td class="org-left">双引号</td>
</tr>

<tr>
<td class="org-left">\</td>
<td class="org-left">反斜杠</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-org447c9e5" class="outline-3">
<h3 id="org447c9e5">多行字符串</h3>
<div class="outline-text-3" id="text-org447c9e5">
<p>
Go 语言中要定义一个多行字符串时，就必须使用反引号字符：<br>
</p>

<div class="org-src-container">
<pre class="src src-go"><span style="color: #8787d7;">s</span> := <span style="color: #2aa198;">`&#31532;&#19968;&#34892;</span>
<span style="color: #2aa198;">&#31532;&#20108;&#34892;</span>
<span style="color: #2aa198;">&#31532;&#19977;&#34892;</span>
<span style="color: #2aa198;">`</span>
fmt.<span style="color: #d75fd7; font-weight: bold;">Println</span>(s)
</pre>
</div>

<p>
反引号间换行将被作为字符串中的换行，但是所有的转义字符均无效，文本将会原样输出。<br>
</p>
</div>
</div>
<div id="outline-container-org3e0fedc" class="outline-3">
<h3 id="org3e0fedc">字符串的常用操作</h3>
<div class="outline-text-3" id="text-org3e0fedc">
<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">方法</th>
<th scope="col" class="org-left">介绍</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">len(str)</td>
<td class="org-left">求长度</td>
</tr>

<tr>
<td class="org-left">+</td>
<td class="org-left">拼接字符串</td>
</tr>

<tr>
<td class="org-left">strings.Split</td>
<td class="org-left">分割</td>
</tr>

<tr>
<td class="org-left">strings.Contains</td>
<td class="org-left">判断是否包含</td>
</tr>

<tr>
<td class="org-left">strings.HasPrefix, strings.HasSuffix</td>
<td class="org-left">前缀/后缀判断</td>
</tr>

<tr>
<td class="org-left">strings.Index(), strings.LastIndex()</td>
<td class="org-left">子串出现的位置</td>
</tr>

<tr>
<td class="org-left">strings.Join(a[]string, sep string)</td>
<td class="org-left">join操作</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-orgf378c79" class="outline-3">
<h3 id="orgf378c79">字符串的遍历</h3>
<div class="outline-text-3" id="text-orgf378c79">
</div>
<div id="outline-container-org792dc4a" class="outline-4">
<h4 id="org792dc4a">for</h4>
<div class="outline-text-4" id="text-org792dc4a">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">package</span> main

<span style="color: #268bd2; font-weight: bold;">import</span> <span style="color: #2aa198;">"fmt"</span>

<span style="color: #268bd2; font-weight: bold;">func</span> <span style="color: #d75fd7; font-weight: bold;">main</span>() {
    <span style="color: #268bd2; font-weight: bold;">var</span> <span style="color: #8787d7;">str</span> <span style="color: #df005f; font-weight: bold;">string</span> = <span style="color: #2aa198;">"hello &#20320;&#22909;"</span>
    <span style="color: #268bd2; font-weight: bold;">for</span> <span style="color: #8787d7;">i</span> := <span style="color: #d75fd7;">0</span>; i &lt; <span style="color: #268bd2;">len</span>(str); i++ {
        fmt.<span style="color: #d75fd7; font-weight: bold;">Printf</span>(<span style="color: #2aa198;">"%c"</span>, str[i])
    }
}
</pre>
</div>

<p>
输出：<br>
</p>

<pre class="example" id="org47c2d90">
hello ä½ å¥½
</pre>

<p>
而使用 <code>for range</code> 就可以正常输出：<br>
</p>
</div>
</div>
<div id="outline-container-org0c84a5d" class="outline-4">
<h4 id="org0c84a5d">for range</h4>
<div class="outline-text-4" id="text-org0c84a5d">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">package</span> main

<span style="color: #268bd2; font-weight: bold;">import</span> <span style="color: #2aa198;">"fmt"</span>

<span style="color: #268bd2; font-weight: bold;">func</span> <span style="color: #d75fd7; font-weight: bold;">main</span>() {
    <span style="color: #268bd2; font-weight: bold;">var</span> <span style="color: #8787d7;">str</span> <span style="color: #df005f; font-weight: bold;">string</span> = <span style="color: #2aa198;">"hello &#20320;&#22909;"</span>
    <span style="color: #268bd2; font-weight: bold;">for</span> <span style="color: #8787d7;">_</span>, <span style="color: #8787d7;">v</span> := <span style="color: #268bd2; font-weight: bold;">range</span> str {
        fmt.<span style="color: #d75fd7; font-weight: bold;">Printf</span>(<span style="color: #2aa198;">"%c"</span>, v)
    }
}
</pre>
</div>

<pre class="example" id="org4653770">
hello 你好
</pre>

<p>
为什么会出现上面这种情况呢？为了理解这种问题，我们需要先了解 <code>byte</code> 和 <code>rune</code> ：<br>
</p>
</div>
</div>
</div>
</div>
<div id="outline-container-orge69e181" class="outline-2">
<h2 id="orge69e181">byte 和 rune 类型</h2>
<div class="outline-text-2" id="text-orge69e181">
<p>
组成每个字符串的元素叫做“字符”，可以通过遍历或者单个获取字符串元素获得字符。 字符用单引号（’）包裹起来，如：<br>
</p>

<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">var</span> <span style="color: #8787d7;">b</span> := <span style="color: #2aa198;">'x'</span>
<span style="color: #268bd2; font-weight: bold;">var</span> <span style="color: #8787d7;">a</span> := <span style="color: #2aa198;">'&#34892;'</span>
</pre>
</div>

<p>
Go 语言的字符有两种：<br>
</p>

<ol class="org-ol">
<li><code>uint8</code> 类型，或者叫做 <code>byte</code> 型，代表了 ASCII 码的一个字符<br></li>
<li><code>rune</code> 类型，代表一个 UTF-8 字符<br></li>
</ol>

<p>
在 Golang 中，汉字采用 utf-8 编码，占用三个字节（补充：若为 gbk 编码，汉字占两个字节），编码后是 <code>int</code> 类型。字母采用 ASCII 编码。<br>
</p>

<p>
不止是中文，当处理日文或者其他复合字符时，同样不能通过 <code>for</code> 循环以字节遍历，需要用到 <code>rune</code> 类型。 <code>rune</code> 类型实际是一个 <code>int32</code> 。<br>
</p>

<p>
<b>结合上面字符串的循环可知： <code>for</code> 循环通过 <code>byte</code> 遍历； <code>for range</code> 通过 <code>rune</code> 遍历</b><br>
</p>

<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">package</span> main

<span style="color: #268bd2; font-weight: bold;">import</span> <span style="color: #2aa198;">"fmt"</span>

<span style="color: #268bd2; font-weight: bold;">func</span> <span style="color: #d75fd7; font-weight: bold;">main</span>() {
    <span style="color: #8787d7;">s</span> := <span style="color: #2aa198;">"Go&#35821;&#35328;"</span>
    fmt.<span style="color: #d75fd7; font-weight: bold;">Print</span>(<span style="color: #2aa198;">"byte: "</span>)
    <span style="color: #268bd2; font-weight: bold;">for</span> <span style="color: #8787d7;">i</span> := <span style="color: #d75fd7;">0</span>; i &lt; <span style="color: #268bd2;">len</span>(s); i ++ { 
        fmt.<span style="color: #d75fd7; font-weight: bold;">Printf</span>(<span style="color: #2aa198;">"%v(%c) "</span>, s[i], s[i])
    }
    fmt.<span style="color: #d75fd7; font-weight: bold;">Println</span>()
    fmt.<span style="color: #d75fd7; font-weight: bold;">Print</span>(<span style="color: #2aa198;">"rune: "</span>)
    <span style="color: #268bd2; font-weight: bold;">for</span> <span style="color: #8787d7;">_</span>, <span style="color: #8787d7;">r</span> := <span style="color: #268bd2; font-weight: bold;">range</span> s { 
        fmt.<span style="color: #d75fd7; font-weight: bold;">Printf</span>(<span style="color: #2aa198;">"%v(%c) "</span>, r, r)
    }
    fmt.<span style="color: #d75fd7; font-weight: bold;">Println</span>()
}
</pre>
</div>

<p>
输出：<br>
</p>

<pre class="example" id="org05125cd">
byte: 71(G) 111(o) 232(è) 175(¯) 173(­) 232(è) 168(¨) 128() 
rune: 71(G) 111(o) 35821(语) 35328(言) 
</pre>

<p>
总结：字符串底层是一个 <code>byte</code> 数组，所以可以和 <code>[]byte</code> 类型相互转换。字符串是不能修改的 字符串是由 <code>byte</code> 字节组成，所以字符串的长度是 <code>byte</code> 字节的长度。 <code>rune</code> 类型用来表示 utf8 字符，一个 <code>rune</code> 字符由一个或多个 <code>byte</code> 组成。<br>
</p>
</div>
</div>
<div id="outline-container-org549cb83" class="outline-2">
<h2 id="org549cb83">修改字符串</h2>
<div class="outline-text-2" id="text-org549cb83">
<p>
要修改字符串，需要先将其转换成 <code>[]rune</code> 或 <code>[]byte</code> ，完成后再转换为 <code>string</code> 。无论哪种转换，都会重新分配内存，并复制字节数组。<br>
</p>

<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">package</span> main

<span style="color: #268bd2; font-weight: bold;">import</span> <span style="color: #2aa198;">"fmt"</span>

<span style="color: #268bd2; font-weight: bold;">func</span> <span style="color: #d75fd7; font-weight: bold;">main</span>() {
    <span style="color: #8787d7;">s1</span> := <span style="color: #2aa198;">"hello, world!"</span>
    <span style="color: #8787d7;">byteS1</span> := []<span style="color: #d75fd7; font-weight: bold;">byte</span>(s1)
    byteS1[<span style="color: #d75fd7;">0</span>] = <span style="color: #2aa198;">'H'</span>
    fmt.<span style="color: #d75fd7; font-weight: bold;">Println</span>(byteS1)
    fmt.<span style="color: #d75fd7; font-weight: bold;">Println</span>(<span style="color: #d75fd7; font-weight: bold;">string</span>(byteS1))

    <span style="color: #8787d7;">s2</span> := <span style="color: #2aa198;">"&#20320;&#22909;&#12290;&#19990;&#30028;&#65281;"</span>
    <span style="color: #8787d7;">runeS2</span> := []<span style="color: #d75fd7; font-weight: bold;">rune</span>(s2)
    runeS2[<span style="color: #d75fd7;">2</span>] = <span style="color: #2aa198;">'&#65292;'</span>
    fmt.<span style="color: #d75fd7; font-weight: bold;">Println</span>(runeS2)
    fmt.<span style="color: #d75fd7; font-weight: bold;">Println</span>(<span style="color: #d75fd7; font-weight: bold;">string</span>(runeS2))
}
</pre>
</div>
</div>
</div>
<div id="outline-container-org5209b63" class="outline-2">
<h2 id="org5209b63">类型转换</h2>
<div class="outline-text-2" id="text-org5209b63">
<p>
详细的类型转换介绍：<a href="Go-类型转换.html">类型转换</a><br>
</p>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Date: 2022-02-08 18:02 Tue</p>
<p class="author">Author: L.M.haoran</p>
<p class="date">Created: 2022-02-11 Fri 21:11</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
