<!DOCTYPE html>
<html lang="zh">
<head>
<!-- 2022-04-06 Wed 01:44 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>深度优先搜索</title>
<meta name="generator" content="Org mode">
<meta name="author" content="L.M.haoran &lt;haoran.mc@outlook.com&gt;">
<meta name="description" content="Copyright © 2021, L.M.haoran, all rights reserved."
>

                <link rel="stylesheet" href="static/css/org.css" type="text/css"  />
                <script type="module" src="static/js/main.js" defer></script>
                <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "0em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script type="text/javascript"
        src="static/MathJax/cdn.bootcdn.net/ajax/libs/mathjax/3.1.2/es5/tex-mml-chtml.min.js"></script>
</head>
<body>
<div id="content">
<h1 class="title">深度优先搜索</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org9d30ebe">深度优先搜索(Depth First Search)</a></li>
<li><a href="#orga7a3919">指数型搜索</a>
<ul>
<li><a href="#orgcb80499">vector</a></li>
<li><a href="#org05284a1">数组</a></li>
<li><a href="#org8009ab9">状压</a></li>
</ul>
</li>
<li><a href="#orga58bc6c">组合型搜索</a>
<ul>
<li><a href="#org64e3af6">数组</a></li>
<li><a href="#org26bc61c">状压</a></li>
<li><a href="#org13267c5">手动写栈</a></li>
</ul>
</li>
<li><a href="#orgbb71d08">排列型搜索</a>
<ul>
<li><a href="#org012e09e">经典递归实现全排列</a></li>
<li><a href="#orgf8568c3">swap</a></li>
<li><a href="#org3a2ba35">状压</a></li>
</ul>
</li>
<li><a href="#orgad494a1">例题1：全排列问题</a></li>
<li><a href="#orgb3140a8">例题2：N皇后问题</a></li>
</ul>
</div>
</div>

<div id="outline-container-org9d30ebe" class="outline-2">
<h2 id="org9d30ebe">深度优先搜索(Depth First Search)</h2>
<div class="outline-text-2" id="text-org9d30ebe">
<p>
深度优先搜索是一种枚举所有完整路径以遍历所有情况的搜索方法。对于当前状态来说，只选择所有可以到达的状态中的其中一种状态。每次搜索皆是如此，一直走到尽头。如果当前状态不满足目标，后退到上次搜索，选择上次搜索中没有选择的状态，如果所有状态都被选完，再次后退，直到搜索到目标。<br>
</p>

<ul class="org-ul">
<li>深度优先搜索可以使用栈来实现<br></li>
<li>递归是深度优先搜索的一种实现形式<br></li>
</ul>
</div>
</div>
<div id="outline-container-orga7a3919" class="outline-2">
<h2 id="orga7a3919">指数型搜索</h2>
<div class="outline-text-2" id="text-orga7a3919">
<p>
从 \(1 \sim n\) 这 \(n\) 个数中随机选取任意多个数，输出所有可能的方案，输出每个方案时按升序输出。<br>
</p>
</div>
<div id="outline-container-orgcb80499" class="outline-3">
<h3 id="orgcb80499">vector</h3>
<div class="outline-text-3" id="text-orgcb80499">
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #d75fd7;">#include</span> <span style="color: #2aa198;">&lt;cstdio&gt;</span>
<span style="color: #d75fd7;">#include</span> <span style="color: #2aa198;">&lt;vector&gt;</span>
<span style="color: #268bd2; font-weight: bold;">using</span> <span style="color: #268bd2; font-weight: bold;">namespace</span> <span style="color: #d75fd7;">std</span>;
<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">n</span>;
<span style="color: #df005f; font-weight: bold;">vector</span>&lt;<span style="color: #df005f; font-weight: bold;">int</span>&gt; <span style="color: #8787d7;">vec</span>;

<span style="color: #df005f; font-weight: bold;">void</span> <span style="color: #d75fd7; font-weight: bold;">DFS</span>(<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">x</span>) {
    <span style="color: #268bd2; font-weight: bold;">if</span> (x == n + 1) {
        <span style="color: #268bd2; font-weight: bold;">for</span> (<span style="color: #268bd2; font-weight: bold;">auto</span> <span style="color: #8787d7;">i</span> : vec)
            printf(<span style="color: #2aa198;">"%d "</span>, i);
        puts(<span style="color: #2aa198;">""</span>);
        <span style="color: #268bd2; font-weight: bold;">return</span>;
    }
    DFS(x + 1);         <span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">&#19981;&#36873;&#25321; x</span>
    vec.push_back(x);   <span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">&#36873;&#25321; x</span>
    DFS(x + 1);         <span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">&#36873;&#25321; x</span>
    vec.pop_back();     <span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">&#22238;&#28335;</span>
}

<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #d75fd7; font-weight: bold;">main</span>() {
    scanf(<span style="color: #2aa198;">"%d"</span>, &amp;n);
    DFS(1);   <span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">&#20915;&#31574;&#25968;&#23383;1</span>
    <span style="color: #268bd2; font-weight: bold;">return</span> 0;
}
</pre>
</div>
</div>
</div>
<div id="outline-container-org05284a1" class="outline-3">
<h3 id="org05284a1">数组</h3>
<div class="outline-text-3" id="text-org05284a1">
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #d75fd7;">#include</span> <span style="color: #2aa198;">&lt;cstdio&gt;</span>
<span style="color: #268bd2; font-weight: bold;">const</span> <span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">maxn</span> = 20;
<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">n</span>;
<span style="color: #df005f; font-weight: bold;">bool</span> <span style="color: #8787d7;">used</span>[maxn];

<span style="color: #df005f; font-weight: bold;">void</span> <span style="color: #d75fd7; font-weight: bold;">DFS</span>(<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">x</span>) {
    <span style="color: #268bd2; font-weight: bold;">if</span> (x == n + 1) {
        <span style="color: #268bd2; font-weight: bold;">for</span> (<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">i</span> = 1; i &lt;= n; ++ i)
            <span style="color: #268bd2; font-weight: bold;">if</span> (used[i])
                printf(<span style="color: #2aa198;">"%d "</span>, i);
        puts(<span style="color: #2aa198;">""</span>);
        <span style="color: #268bd2; font-weight: bold;">return</span>;
    }
    DFS(x + 1);
    used[x] = <span style="color: #d75fd7;">true</span>;
    DFS(x + 1);
    used[x] = <span style="color: #d75fd7;">false</span>;
}

<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #d75fd7; font-weight: bold;">main</span>() {
    scanf(<span style="color: #2aa198;">"%d"</span>, &amp;n);
    DFS(1);
    <span style="color: #268bd2; font-weight: bold;">return</span> 0;
}
</pre>
</div>
</div>
</div>
<div id="outline-container-org8009ab9" class="outline-3">
<h3 id="org8009ab9">状压</h3>
<div class="outline-text-3" id="text-org8009ab9">
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #d75fd7;">#include</span> <span style="color: #2aa198;">&lt;cstdio&gt;</span>
<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">n</span>;

<span style="color: #df005f; font-weight: bold;">void</span> <span style="color: #d75fd7; font-weight: bold;">DFS</span>(<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">u</span>, <span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">state</span>) {
    <span style="color: #268bd2; font-weight: bold;">if</span> (u == n) {
        <span style="color: #268bd2; font-weight: bold;">for</span> (<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">i</span> = 0; i &lt; n; ++ i)
            <span style="color: #268bd2; font-weight: bold;">if</span> (state &gt;&gt; i &amp; 1)
                printf(<span style="color: #2aa198;">"%d "</span>, i + 1);
        puts(<span style="color: #2aa198;">""</span>);
        <span style="color: #268bd2; font-weight: bold;">return</span>;
    }
    DFS(u + 1, state);   <span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">&#19981;&#36873;</span>
    DFS(u + 1, state | 1 &lt;&lt; u);   <span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">&#36873;</span>
}

<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #d75fd7; font-weight: bold;">main</span>() {
    scanf(<span style="color: #2aa198;">"%d"</span>, &amp;n);
    DFS(0, 0);
    <span style="color: #268bd2; font-weight: bold;">return</span> 0;
}
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orga58bc6c" class="outline-2">
<h2 id="orga58bc6c">组合型搜索</h2>
<div class="outline-text-2" id="text-orga58bc6c">
<p>
从 \(1 \sim n\) 这 \(n\) 个数中随机选取 \(m\) 个数，输出所有可能的方案，对于不同的方案，字典序小的方案先输出，输出每个方案时按升序输出。<br>
</p>
</div>
<div id="outline-container-org64e3af6" class="outline-3">
<h3 id="org64e3af6">数组</h3>
<div class="outline-text-3" id="text-org64e3af6">
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #d75fd7;">#include</span> <span style="color: #2aa198;">&lt;cstdio&gt;</span>
<span style="color: #268bd2; font-weight: bold;">const</span> <span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">maxn</span> = 30;
<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">n</span>, <span style="color: #8787d7;">m</span>;
<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">path</span>[maxn];

<span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">start &#34920;&#31034;&#25509;&#19979;&#26469;&#20174;&#21738;&#37324;&#24320;&#22987;&#25628;&#32034;</span>
<span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">cnt &#34920;&#31034;&#24050;&#32463;&#36873;&#25321;&#20102;&#20960;&#20010;&#25968;</span>
<span style="color: #df005f; font-weight: bold;">void</span> <span style="color: #d75fd7; font-weight: bold;">DFS</span>(<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">start</span>, <span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">cnt</span>) {
    <span style="color: #268bd2; font-weight: bold;">if</span> (cnt == m + 1) {
        <span style="color: #268bd2; font-weight: bold;">for</span> (<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">i</span> = 1; i &lt;= m; ++ i)
            printf(<span style="color: #2aa198;">"%d "</span>, path[i]);
        puts(<span style="color: #2aa198;">""</span>);
    }
    <span style="color: #268bd2; font-weight: bold;">else</span> {
        <span style="color: #268bd2; font-weight: bold;">for</span> (<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">i</span> = start; i &lt;= n; ++ i) {
            path[cnt] = i;
            DFS(i + 1, cnt + 1);
        }
    }
}

<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #d75fd7; font-weight: bold;">main</span>() {
    scanf(<span style="color: #2aa198;">"%d %d"</span>, &amp;n, &amp;m);
    DFS(1, 1);
    <span style="color: #268bd2; font-weight: bold;">return</span> 0;
}
</pre>
</div>
</div>
</div>
<div id="outline-container-org26bc61c" class="outline-3">
<h3 id="org26bc61c">状压</h3>
<div class="outline-text-3" id="text-org26bc61c">
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #d75fd7;">#include</span> <span style="color: #2aa198;">&lt;cstdio&gt;</span>
<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">n</span>, <span style="color: #8787d7;">m</span>;

<span style="color: #df005f; font-weight: bold;">void</span> <span style="color: #d75fd7; font-weight: bold;">DFS</span>(<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">start</span>, <span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">cnt</span>, <span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">state</span>) {
    <span style="color: #268bd2; font-weight: bold;">if</span> (n - start + cnt &lt; m)   <span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">&#21098;&#26525;</span>
        <span style="color: #268bd2; font-weight: bold;">return</span>;
    <span style="color: #268bd2; font-weight: bold;">if</span> (cnt == m) {
        <span style="color: #268bd2; font-weight: bold;">for</span> (<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">i</span> = 0; i &lt; n; ++ i)
            <span style="color: #268bd2; font-weight: bold;">if</span> (state &gt;&gt; i &amp; 1)
                printf(<span style="color: #2aa198;">"%d "</span>, i + 1);
        puts(<span style="color: #2aa198;">""</span>);
        <span style="color: #268bd2; font-weight: bold;">return</span>;
    }

    <span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">&#19979;&#38754;&#20004;&#21477;&#21453;&#36807;&#26469;&#35797;&#35797;&#65311;</span>
    DFS(start + 1, cnt + 1, state | 1 &lt;&lt; start);
    DFS(start + 1, cnt, state);
}

<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #d75fd7; font-weight: bold;">main</span>() {
    scanf(<span style="color: #2aa198;">"%d %d"</span>, &amp;n, &amp;m);
    DFS(0, 0, 0);
    <span style="color: #268bd2; font-weight: bold;">return</span> 0;
}
</pre>
</div>
</div>
</div>
<div id="outline-container-org13267c5" class="outline-3">
<h3 id="org13267c5">手动写栈</h3>
<div class="outline-text-3" id="text-org13267c5">
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #d75fd7;">#include</span> <span style="color: #2aa198;">&lt;cstdio&gt;</span>
<span style="color: #d75fd7;">#include</span> <span style="color: #2aa198;">&lt;stack&gt;</span>
<span style="color: #268bd2; font-weight: bold;">using</span> <span style="color: #268bd2; font-weight: bold;">namespace</span> <span style="color: #d75fd7;">std</span>;
<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">n</span>, <span style="color: #8787d7;">m</span>;

<span style="color: #268bd2; font-weight: bold;">struct</span> <span style="color: #df005f; font-weight: bold;">State</span> {
    <span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">pos</span>;
    <span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">start</span>, <span style="color: #8787d7;">cnt</span>, <span style="color: #8787d7;">state</span>;
};

<span style="color: #df005f; font-weight: bold;">void</span> <span style="color: #d75fd7; font-weight: bold;">DFS</span>(<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">start</span>, <span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">cnt</span>, <span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">state</span>) {
    <span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">0:</span>
    <span style="color: #268bd2; font-weight: bold;">if</span> (n - start + cnt  &lt; m)
        <span style="color: #268bd2; font-weight: bold;">return</span>;
    <span style="color: #268bd2; font-weight: bold;">if</span> (cnt == m) {
        <span style="color: #268bd2; font-weight: bold;">for</span> (<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">i</span> = 0; i &lt; n; ++ i)
            <span style="color: #268bd2; font-weight: bold;">if</span> (state &gt;&gt; i &amp; 1)
                printf(<span style="color: #2aa198;">"%d "</span>, i + 1);
        puts(<span style="color: #2aa198;">""</span>);
        <span style="color: #268bd2; font-weight: bold;">return</span>;
    }
    DFS(start + 1, cnt + 1, state | 1 &lt;&lt; start);
    <span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">1:</span>
    DFS(start + 1, cnt, state);
    <span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">2:</span>
}

<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #d75fd7; font-weight: bold;">main</span>() {
    scanf(<span style="color: #2aa198;">"%d %d"</span>, &amp;n, &amp;m);
    <span style="color: #df005f; font-weight: bold;">stack</span>&lt;<span style="color: #df005f; font-weight: bold;">State</span>&gt; <span style="color: #8787d7;">stk</span>;
    stk.push({0, 0, 0, 0});
    <span style="color: #268bd2; font-weight: bold;">while</span> (stk.size()) {
        <span style="color: #268bd2; font-weight: bold;">auto</span> <span style="color: #8787d7;">sta</span> = stk.top(); stk.pop();
        <span style="color: #268bd2; font-weight: bold;">if</span> (sta.pos == 0) {
            <span style="color: #268bd2; font-weight: bold;">if</span> (n - sta.start + sta.cnt &lt; m)
                <span style="color: #268bd2; font-weight: bold;">continue</span>;
            <span style="color: #268bd2; font-weight: bold;">if</span> (sta.cnt == m) {
                <span style="color: #268bd2; font-weight: bold;">for</span> (<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">i</span> = 0; i &lt; n; ++ i)
                    <span style="color: #268bd2; font-weight: bold;">if</span> (sta.state &gt;&gt; i &amp; 1)
                        printf(<span style="color: #2aa198;">"%d "</span>, i + 1);
                puts(<span style="color: #2aa198;">""</span>);
                <span style="color: #268bd2; font-weight: bold;">continue</span>;
            }
            sta.pos = 1; stk.push(sta);
            stk.push({0, sta.start + 1, sta.cnt + 1, sta.state | 1 &lt;&lt; sta.start});
        }
        <span style="color: #268bd2; font-weight: bold;">else</span> <span style="color: #268bd2; font-weight: bold;">if</span> (sta.pos == 1) {
            sta.pos = 2; stk.push(sta);
            stk.push({0, sta.start + 1, sta.cnt, sta.state});
        }
        <span style="color: #268bd2; font-weight: bold;">else</span> <span style="color: #268bd2; font-weight: bold;">if</span> (sta.pos == 2) {
            <span style="color: #268bd2; font-weight: bold;">continue</span>;
        }
    }
    <span style="color: #268bd2; font-weight: bold;">return</span> 0;
}
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgbb71d08" class="outline-2">
<h2 id="orgbb71d08">排列型搜索</h2>
<div class="outline-text-2" id="text-orgbb71d08">
</div>
<div id="outline-container-org012e09e" class="outline-3">
<h3 id="org012e09e">经典递归实现全排列</h3>
<div class="outline-text-3" id="text-org012e09e">
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #d75fd7;">#include</span> <span style="color: #2aa198;">&lt;cstdio&gt;</span>
<span style="color: #268bd2; font-weight: bold;">const</span> <span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">maxn</span> = 10;
<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">n</span>, <span style="color: #8787d7;">site</span>[maxn], <span style="color: #8787d7;">ha</span>[maxn];

<span style="color: #df005f; font-weight: bold;">void</span> <span style="color: #d75fd7; font-weight: bold;">DFS</span>(<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">idx</span>) {
    <span style="color: #268bd2; font-weight: bold;">if</span> (idx == n + 1) {
        <span style="color: #268bd2; font-weight: bold;">for</span> (<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">i</span> = 1; i &lt;= n; ++ i)
            printf(<span style="color: #2aa198;">"%d "</span>, site[i]);
        puts(<span style="color: #2aa198;">""</span>);
        <span style="color: #268bd2; font-weight: bold;">return</span>;
    }
    <span style="color: #268bd2; font-weight: bold;">for</span> (<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">i</span> = 1; i &lt;= n; ++ i) {
        <span style="color: #268bd2; font-weight: bold;">if</span> (<span style="color: #d75fd7;">!</span>ha[i]) {
            site[idx] = i;
            ha[i] = <span style="color: #d75fd7;">true</span>;
            DFS(idx + 1);
            ha[i] = <span style="color: #d75fd7;">false</span>;
        }
    }
}

<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #d75fd7; font-weight: bold;">main</span>() {
    scanf(<span style="color: #2aa198;">"%d"</span>, &amp;n);
    DFS(1);
    <span style="color: #268bd2; font-weight: bold;">return</span> 0;
}
</pre>
</div>
</div>
</div>
<div id="outline-container-orgf8568c3" class="outline-3">
<h3 id="orgf8568c3">swap</h3>
<div class="outline-text-3" id="text-orgf8568c3">
<p>
输出不是按照字典序小的先输出，而且不是很理解这样可以。<br>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #d75fd7;">#include</span> <span style="color: #2aa198;">&lt;cstdio&gt;</span>
<span style="color: #d75fd7;">#include</span> <span style="color: #2aa198;">&lt;algorithm&gt;</span>
<span style="color: #268bd2; font-weight: bold;">using</span> <span style="color: #268bd2; font-weight: bold;">namespace</span> <span style="color: #d75fd7;">std</span>;
<span style="color: #268bd2; font-weight: bold;">const</span> <span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">maxn</span> = 10;
<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">n</span>, <span style="color: #8787d7;">cnt</span>, <span style="color: #8787d7;">arr</span>[maxn];

<span style="color: #df005f; font-weight: bold;">void</span> <span style="color: #d75fd7; font-weight: bold;">DFS</span>(<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">idx</span>) {
    <span style="color: #268bd2; font-weight: bold;">if</span> (idx == n) {
        <span style="color: #268bd2; font-weight: bold;">for</span> (<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">i</span> = 0; i &lt; n; ++ i)
            printf(<span style="color: #2aa198;">"%d "</span>, arr[i]);
        puts(<span style="color: #2aa198;">""</span>);
        <span style="color: #268bd2; font-weight: bold;">return</span>;
    }
    <span style="color: #268bd2; font-weight: bold;">for</span> (<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">i</span> = idx; i &lt; n; ++ i) {
        swap(arr[i], arr[idx]);
        DFS(idx + 1);
        swap(arr[i], arr[idx]);
    }
}

<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #d75fd7; font-weight: bold;">main</span>() {
    scanf(<span style="color: #2aa198;">"%d"</span>, &amp;n);
    <span style="color: #268bd2; font-weight: bold;">for</span> (<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">i</span> = 0; i &lt; n; ++ i)
        arr[i] = i + 1;
    DFS(0);
    <span style="color: #268bd2; font-weight: bold;">return</span> 0;
}
</pre>
</div>
</div>
</div>
<div id="outline-container-org3a2ba35" class="outline-3">
<h3 id="org3a2ba35">状压</h3>
<div class="outline-text-3" id="text-org3a2ba35">
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #d75fd7;">#include</span> <span style="color: #2aa198;">&lt;cstdio&gt;</span>
<span style="color: #d75fd7;">#include</span> <span style="color: #2aa198;">&lt;vector&gt;</span>
<span style="color: #268bd2; font-weight: bold;">using</span> <span style="color: #268bd2; font-weight: bold;">namespace</span> <span style="color: #d75fd7;">std</span>;
<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">n</span>;
<span style="color: #df005f; font-weight: bold;">vector</span>&lt;<span style="color: #df005f; font-weight: bold;">int</span>&gt; <span style="color: #8787d7;">vec</span>;

<span style="color: #df005f; font-weight: bold;">void</span> <span style="color: #d75fd7; font-weight: bold;">DFS</span>(<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">idx</span>, <span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">state</span>) {
    <span style="color: #268bd2; font-weight: bold;">if</span> (idx == n) {
        <span style="color: #268bd2; font-weight: bold;">for</span> (<span style="color: #268bd2; font-weight: bold;">auto</span> <span style="color: #8787d7;">i</span> : vec)
            printf(<span style="color: #2aa198;">"%d "</span>, i);
        puts(<span style="color: #2aa198;">""</span>);
        <span style="color: #268bd2; font-weight: bold;">return</span>;
    }
    <span style="color: #268bd2; font-weight: bold;">for</span> (<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #8787d7;">i</span> = 0; i &lt; n; ++ i)
        <span style="color: #268bd2; font-weight: bold;">if</span> (<span style="color: #d75fd7;">!</span>(state &gt;&gt; i &amp; 1)) {
            vec.push_back(i + 1);
            DFS(idx + 1, state | 1 &lt;&lt; i);
            vec.pop_back();
        }
}

<span style="color: #df005f; font-weight: bold;">int</span> <span style="color: #d75fd7; font-weight: bold;">main</span>() {
    scanf(<span style="color: #2aa198;">"%d"</span>, &amp;n);
    DFS(0, 0);
    <span style="color: #268bd2; font-weight: bold;">return</span> 0;
}
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgad494a1" class="outline-2">
<h2 id="orgad494a1">例题1：全排列问题</h2>
<div class="outline-text-2" id="text-orgad494a1">
<p>
<a href="https://www.luogu.com.cn/problem/P1706">[Luogu P1706] 全排列问题</a><br>
</p>

<p>
可以使用上面排列型搜索。<br>
</p>
</div>
</div>
<div id="outline-container-orgb3140a8" class="outline-2">
<h2 id="orgb3140a8">例题2：N皇后问题</h2>
<div class="outline-text-2" id="text-orgb3140a8">
<p>
在棋盘上放置n个皇后，使得它们不同行、不同列、不同对角线。<br>
</p>

<ol class="org-ol">
<li>可以按全排列的方法解决<br></li>
<li>直接暴力<br></li>
</ol>
</div>
</div>
</div>
</body>
</html>
