<!DOCTYPE html>
<html lang="zh">
<head>
<!-- 2022-03-07 Mon 23:36 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>&lrm;</title>
<meta name="generator" content="Org mode">
<meta name="author" content="haoran">

                <link rel="stylesheet" href="static/css/org.css" type="text/css"  />
                <script type="module" src="static/js/main.js" defer></script>
                <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
</head>
<body>
<div id="content">
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org73db744">manjaro的安装与配置</a>
<ul>
<li><a href="#orgba0d3d5">确认硬盘分区表类型</a>
<ul>
<li><a href="#org9b3a0ce">方式一</a></li>
<li><a href="#orgcc708eb">方式二</a></li>
</ul>
</li>
<li><a href="#orge8aa408">确认BIOS模式</a></li>
<li><a href="#orgd47db47">创建USB启动盘</a>
<ul>
<li><a href="#orgcc1ed41">下载manjaro镜像</a></li>
<li><a href="#orgd7307af">下载Rufus</a></li>
<li><a href="#org69f07b4">使用Rufus创建USB启动盘</a></li>
</ul>
</li>
<li><a href="#org30b1922">为manjaro预留未分配磁盘空间</a></li>
<li><a href="#org2de6bf7">安装manjaro</a>
<ul>
<li><a href="#org184d120">使用USB启动盘</a></li>
<li><a href="#orga2508fd">在Welcome界面进行配置</a></li>
<li><a href="#org6ecd21a">打开Manjaro Linux Installer</a></li>
</ul>
</li>
<li><a href="#orgc7535fd">manjaro基本配置</a>
<ul>
<li><a href="#org89809da">修改镜像源</a></li>
<li><a href="#orgf6b4355">安装vim(也可以安装nvim)</a></li>
<li><a href="#org039fe91">安装输入法(以google拼音为例)</a></li>
<li><a href="#org41bbc10">上传SSH密钥到Github账户</a></li>
<li><a href="#orga52d155">配置Golang</a></li>
</ul>
</li>
<li><a href="#org3bbd9e0">Qv2ray</a></li>
</ul>
</li>
</ul>
</div>
</div>
<p>
&lt;!&#x2013;<br>
;; LINUX-MANJARO最简安装<br>
;; Author: L.M.haoran &lt;haoran.mc@outlook.com&gt;<br>
;; Copyright © 2021, L.M.haoran, all rights reserved.<br>
;; Created: 2021-07-11 14:07 日<br>
;; Summary:<br>
&#x2013;&gt;<br>
</p>

<div id="outline-container-org73db744" class="outline-2">
<h2 id="org73db744">manjaro的安装与配置</h2>
<div class="outline-text-2" id="text-org73db744">
</div>
<div id="outline-container-orgba0d3d5" class="outline-3">
<h3 id="orgba0d3d5">确认硬盘分区表类型</h3>
<div class="outline-text-3" id="text-orgba0d3d5">
<p>
适用于GPT + UEFI<br>
</p>
</div>
<div id="outline-container-org9b3a0ce" class="outline-4">
<h4 id="org9b3a0ce">方式一</h4>
<div class="outline-text-4" id="text-org9b3a0ce">
<p>
打开 DISKPART (按下 WIN + R，输入 "diskpart" 并点击确定)，输入如下命令：<br>
</p>

<p>
DISKPART&gt; list disk<br>
</p>

<p>
将有类似如下输出：<br>
</p>

<p>
磁盘 ###   状态            大小      可用     Dyn  Gpt<br>
---&#x2013;&#x2014;  --------&#x2013;&#x2014;  --&#x2013;&#x2014;  --&#x2013;&#x2014;  &#x2014;  &#x2014;<br>
磁盘 0     联机             476 GB   80 GB         *<br>
</p>

<p>
其中在 "Gpt" 列带有 "*" 的磁盘的分区表类型即为 GPT。<br>
</p>
</div>
</div>
<div id="outline-container-orgcc708eb" class="outline-4">
<h4 id="orgcc708eb">方式二</h4>
<div class="outline-text-4" id="text-orgcc708eb">
<p>
打开 磁盘管理 (按下 WIN + R，输入 "diskmgmt.msc" 并点击确定)：<br>
右击如下箭头指向区域：<br>
</p>

<p>
<a href="img/diskmgmt.png">img-diskmgmt</a><br>
</p>

<p>
选择 "属性" (⚠切勿选择 "转换到动态磁盘" )，选择 "卷"，有如下图红框中信息的，该硬盘分区表类型即为GPT。<br>
</p>

<p>
<a href="img/分区表.png">img-分区表</a><br>
</p>
</div>
</div>
</div>
<div id="outline-container-orge8aa408" class="outline-3">
<h3 id="orge8aa408">确认BIOS模式</h3>
<div class="outline-text-3" id="text-orge8aa408">
<p>
打开系统信息 (按下 WIN + R，输入 "msinfo32" 并点击确定)，找到如下图红框的信息：<br>
<a href="img/BIOS.png">img-Bios</a><br>
</p>
</div>
</div>
<div id="outline-container-orgd47db47" class="outline-3">
<h3 id="orgd47db47">创建USB启动盘</h3>
<div class="outline-text-3" id="text-orgd47db47">
</div>
<div id="outline-container-orgcc1ed41" class="outline-4">
<h4 id="orgcc1ed41">下载manjaro镜像</h4>
<div class="outline-text-4" id="text-orgcc1ed41">
<ul class="org-ul">
<li>KDE Plasma<br></li>
<li>GNOME<br></li>
<li>XFCE<br></li>
</ul>
</div>
</div>
<div id="outline-container-orgd7307af" class="outline-4">
<h4 id="orgd7307af">下载Rufus</h4>
<div class="outline-text-4" id="text-orgd7307af">
<p>
推荐使用Rufus3.4及以下版本，当然，也可以使用其他USB启动盘创建工具<br>
</p>
</div>
</div>
<div id="outline-container-org69f07b4" class="outline-4">
<h4 id="org69f07b4">使用Rufus创建USB启动盘</h4>
<div class="outline-text-4" id="text-org69f07b4">
<ul class="org-ul">
<li>打开 Rufus，插入你的 U 盘 (⚠请自行做好数据备份)，在 "设备" 中选择用以创建 USB 启动盘的 U 盘。<br></li>
<li>在 "引导类型选择" 下方选择 "选择"，选择刚才下载的 Manjaro 镜像文件。<br></li>
<li>按照刚才确定的硬盘分区表类型在 "分区类型" 中选择。<br></li>
<li>按照刚才确定的 BIOS 模式在 "目标系统类型" 中选择。<br></li>
<li><p>
下图示例 (GPT + UEFI)：<br>
</p>

<p>
<a href="img/Rufus.png">img-Rufus</a> <br>
</p></li>

<li>点击 "开始" ，选择 "以 DD镜像 模式写入" 以开始创建 USB 启动盘，等待数分钟即可。(⚠请再次确认数据安全)<br></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org30b1922" class="outline-3">
<h3 id="org30b1922">为manjaro预留未分配磁盘空间</h3>
<div class="outline-text-3" id="text-org30b1922">
<p>
打开 "磁盘管理"，右击一个合适的分区，选择 "压缩卷"，输入压缩空间量(MB)，如需要预留 80 GB 磁盘空间，则输入 81920，并点击 "压缩"。(⚠谨慎操作)<br>
如图，已预留 80GB 未分配磁盘空间：<br>
</p>

<p>
<a href="img/重装系统预留空间.png">img-重装系统预留空间</a><br>
</p>
</div>
</div>
<div id="outline-container-org2de6bf7" class="outline-3">
<h3 id="org2de6bf7">安装manjaro</h3>
<div class="outline-text-3" id="text-org2de6bf7">
</div>
<div id="outline-container-org184d120" class="outline-4">
<h4 id="org184d120">使用USB启动盘</h4>
<div class="outline-text-4" id="text-org184d120">
<ul class="org-ul">
<li>重启电脑<br></li>
<li>开机时按 F8 or F12 or DEL 键（不同厂商可能有所不同）进入 Boot Manager<br></li>
<li>选择刚才创建的 USB 启动盘<br></li>
<li>回车启动（如果失败需要进入 BIOS 设置，关闭 Secure Boot）<br></li>
</ul>
</div>
</div>
<div id="outline-container-orga2508fd" class="outline-4">
<h4 id="orga2508fd">在Welcome界面进行配置</h4>
<div class="outline-text-4" id="text-orga2508fd">
<ul class="org-ul">
<li>tz = Asia/Shanghai<br></li>
<li>keytable = us<br></li>
<li>lang = zh_CN<br></li>
<li>选中 "Boot: Manjaro.x86_64 kde"<br></li>
<li>回车启动<br></li>
</ul>
</div>
</div>
<div id="outline-container-org6ecd21a" class="outline-4">
<h4 id="org6ecd21a">打开Manjaro Linux Installer</h4>
<div class="outline-text-4" id="text-org6ecd21a">
<ul class="org-ul">
<li>时区、键盘设置<br></li>
<li>分区 (确认本机为 GPT + UEFI)<br>
<ul class="org-ul">
<li>选择 "手动分区"<br></li>
<li>选中刚才预留的未分配的磁盘空间<br>
<ul class="org-ul">
<li>swap 空间（可以不设置此步）<br>
<ul class="org-ul">
<li>选择 "创建"<br></li>
<li>修改"大小"为 8192 MiB (或其他大小)<br></li>
<li>文件系统选择 "linuxswap"<br></li>
<li>"标记" 选择 "swap"<br></li>
</ul></li>
<li>挂载根目录<br>
<ul class="org-ul">
<li>选择 "创建"<br></li>
<li>修改"大小"为 73728 MiB (或其他大小)<br></li>
<li>文件系统选择 "ext4"<br></li>
<li>"挂载点"选择"/"<br></li>
</ul></li>
<li>挂载引导<br>
<ul class="org-ul">
<li>选择 Windows 系统引导所在分区 (一般大小为100MiB ~ 500MiB，FAT32)<br></li>
<li>选择 "编辑"<br></li>
<li>选择 "保留"<br></li>
<li>"挂载点" 选择 "/boot/efi"<br></li>
<li>"标记" 选择 "boot"<br></li>
</ul></li>
</ul></li>
</ul></li>
<li>用户信息配置<br></li>
<li>点击 "安装"，等待数分钟后，重启电脑<br></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgc7535fd" class="outline-3">
<h3 id="orgc7535fd">manjaro基本配置</h3>
<div class="outline-text-3" id="text-orgc7535fd">
</div>
<div id="outline-container-org89809da" class="outline-4">
<h4 id="org89809da">修改镜像源</h4>
<div class="outline-text-4" id="text-org89809da">
<p>
$ sudo pacman-mirrors -i -c China -m rank<br>
</p>

<p>
测试sync，一般选择上海交大源或清华源<br>
修改配置文件 "/etc/pacman.conf"<br>
$ sudo nano /etc/pacman.conf<br>
</p>

<p>
在文件末尾添加：<br>
[archlinuxcn]<br>
SigLevel = Optional TrustAll<br>
Server = <a href="https://repo.archlinuxcn.org/$arch">https://repo.archlinuxcn.org/$arch</a><br>
</p>

<p>
按下 Ctrl + O，回车保存，按下 Ctrl + X 退出<br>
$ sudo pacman -Syy<br>
$ sudo pacman -S archlinuxcn-keyring<br>
</p>

<p>
$ sudo pacman-mirrors -g<br>
</p>

<p>
$ sudo pacman -Syyu<br>
</p>
</div>
</div>

<div id="outline-container-orgf6b4355" class="outline-4">
<h4 id="orgf6b4355">安装vim(也可以安装nvim)</h4>
<div class="outline-text-4" id="text-orgf6b4355">
<p>
$ sudo pacman -S vim<br>
</p>
</div>
</div>

<div id="outline-container-org039fe91" class="outline-4">
<h4 id="org039fe91">安装输入法(以google拼音为例)</h4>
<div class="outline-text-4" id="text-org039fe91">
<p>
$ # fcitx-im选择全部安装；fcitx-configtool安装图形化配置界面<br>
$ sudo pacman -S fcitx fcitx-googlepinyin fcitx-im fcitx-configtool<br>
</p>

<p>
$ sudo vim ~/.xprofile<br>
</p>

<p>
export GTK_IM_MODULE=fcitx<br>
export QT_IM_MODULE=fcitx<br>
export XMODIFIERS="@im=fcitx"<br>
</p>

<p>
重新启动电脑<br>
</p>
</div>
</div>
<div id="outline-container-org41bbc10" class="outline-4">
<h4 id="org41bbc10">上传SSH密钥到Github账户</h4>
<div class="outline-text-4" id="text-org41bbc10">
<p>
配置 git config<br>
$ git config &#x2013;global user.name "John Doe"<br>
$ git config &#x2013;global user.email johndoe@example.com<br>
</p>

<p>
安装 xclip<br>
$ sudo pacman -S xclip<br>
</p>

<p>
生成 SSH 密钥并添加到 ssh-agent<br>
$ ssh-keygen -t rsa -b 4096 -C "johndoe@example.com"<br>
</p>

<p>
$ eval "$(ssh-agent -s)"<br>
$ ssh-add ~/.ssh/id_rsa<br>
</p>

<p>
$ xclip -sel clip &lt; ~/.ssh/id_rsa.pub<br>
</p>

<ul class="org-ul">
<li>添加 SSH key 到 Github 账户<br>
<ul class="org-ul">
<li>在 Github 界面右上角单击头像，选择 "Settings"<br></li>
<li>在用户设置侧边栏中，单击 "SSH and GPG keys"<br></li>
<li>单击 "New SSH key" 或 "Add SSH key"<br></li>
<li>取一个具有设备辨识度的 Title，单击 "Key" 文本框，按下 Ctrl + V ，单击 "Add SSH key"，然后确认密码<br></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orga52d155" class="outline-4">
<h4 id="orga52d155">配置Golang</h4>
<div class="outline-text-4" id="text-orga52d155">
<p>
下载安装包<br>
$ wget <a href="https://dl.google.com/go/go1.14.2.linux-amd64.tar.gz">https://dl.google.com/go/go1.14.2.linux-amd64.tar.gz</a><br>
</p>

<p>
解压<br>
$ tar -C /usr/local -zxvf go1.14.2.linux-amd64.tar.gz<br>
</p>

<p>
上述命令在 root 用户下执行，否则命令前应加 "sudo"<br>
tar命令解压时如果失败，可以在xxxx.tar.gz后添加一个空格<br>
注：善用 TAB 补全<br>
</p>

<p>
启用 zsh<br>
$ chsh -s /bin/zsh<br>
</p>

<p>
配置 Golang 环境变量<br>
$ vim ~/.zshrc<br>
</p>

<p>
export GOROOT=/usr/local/go<br>
export GOPATH=$(go env GOPATH)<br>
export PATH=$PATH:$GOROOT/bin:$GOPATH/bin<br>
</p>

<p>
$ go env -w GO111MODULE=on<br>
$ go env -w GOPROXY="<a href="https://goproxy.cn,direct">https://goproxy.cn,direct</a>"<br>
</p>

<p>
更新Windows后开机出现grub rescue命令行，无法正常开机怎么办<br>
请参考：Linux引导失败，开机出现grub rescue怎么办<br>
</p>
</div>
</div>
</div>
<div id="outline-container-org3bbd9e0" class="outline-3">
<h3 id="org3bbd9e0">Qv2ray</h3>
<div class="outline-text-3" id="text-org3bbd9e0">
<p>
根据官网指示做<br>
</p>
<ol class="org-ol">
<li>安装qv2ray<br>
可以命令行安装，如果无法使用，就从命令行安装<br></li>

<li>根据系统看是否需要单独下载核心<br>
核心可执行文件路径/usr/bin/v2ray<br>
资源目录/usr/share/v2ray<br></li>

<li>传入订阅<br></li>

<li>观察是否需要设置手动<br></li>
</ol>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: haoran</p>
<p class="date">Created: 2022-03-07 Mon 23:36</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
