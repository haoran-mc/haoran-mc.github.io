<!DOCTYPE html>
<html lang="zh">
<head>
<!-- 2022-11-23 -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>文件权限与目录配置</title>
<meta name="author" content="L.M.haoran" />
<meta name="description" content="Copyright © 2022, L.M.haoran, all rights reserved." />
<meta name="generator" content="Org Mode" />
<link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
           <link rel="stylesheet" href="static/css/org.css" type="text/css"  />
           <script type="module" src="static/js/main.js" defer></script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "0em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script src="static/MathJax/cdn.bootcdn.net/ajax/libs/mathjax/3.1.2/es5/tex-mml-chtml.min.js"></script>
</head>
<body>
<div id="content" class="content">
<h1 class="title">文件权限与目录配置</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org6ad8cb1">用户与用户组</a></li>
<li><a href="#org1729fa2">Linux 文件权限概念</a>
<ul>
<li><a href="#orgf9f63d4">Linux 文件属性</a></li>
<li><a href="#org11b83b6">如何修改文件属性与权限</a>
<ul>
<li><a href="#org55fe133">修改所属用户组，chgrp</a></li>
<li><a href="#orgac06510">修改文件拥有者，chown</a></li>
<li><a href="#org7fdc82b">修改权限，chmod</a>
<ul>
<li><a href="#org4b37a0a">数字类型修改文件权限</a></li>
<li><a href="#org88d90bf">符号类型修改文件权限</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgfb7aa0b">Linux 文件种类与扩展名</a>
<ul>
<li><a href="#org034f030">文件种类</a></li>
<li><a href="#org1aa24bf">文件扩展名</a></li>
<li><a href="#orga97343e">文件名的限制</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org2c7c0cc">Linux 目录配置</a>
<ul>
<li><a href="#org8f133ad">Linux 目录配置的依据 &#x2013; FHS</a>
<ul>
<li><a href="#orgc507051">什么是 FHS</a></li>
<li><a href="#orga197300">根目录（/）的意义与内容</a></li>
<li><a href="#org7f22699">/usr 的意义与内容</a></li>
<li><a href="#org27b4b34">/var 的意义与内容</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-org6ad8cb1" class="outline-2">
<h2 id="org6ad8cb1">用户与用户组</h2>
<div class="outline-text-2" id="text-org6ad8cb1">
<p>
默认情况下，所有的系统上的账号与一般身份用户，还有 root 的相关信息，都记录在 /etc/passwd 这个文件内；至于个人的密码则是记录在 /etc/shadow 这个文件内；此外，Linux 所有的组名都记录在 /etc/group 中。<br>
</p>
</div>
</div>
<div id="outline-container-org1729fa2" class="outline-2">
<h2 id="org1729fa2">Linux 文件权限概念</h2>
<div class="outline-text-2" id="text-org1729fa2">
</div>
<div id="outline-container-orgf9f63d4" class="outline-3">
<h3 id="orgf9f63d4">Linux 文件属性</h3>
<div class="outline-text-3" id="text-orgf9f63d4">
<pre class="example" id="org24e665a">
drwxr-xr-x 1 haoran haoran  4096 Jun 18 17:37 ./
drwxr-xr-x 1 root   root    4096 Mar 31 12:00 ../
-rw------- 1 haoran haoran 10246 Jun 18 17:37 .bash_history
-rw-r--r-- 1 haoran haoran   220 Mar 31 12:00 .bash_logout
-rw-r--r-- 1 haoran haoran  3892 Apr 28 17:23 .bashrc
drwx------ 1 haoran haoran  4096 Mar 31 17:41 .config/
drwxr-xr-x 1 haoran haoran  4096 Apr 28 09:43 .cache/
drwxr-xr-x 1 haoran haoran  4096 Apr  4 17:59 gdb/
drwxr-xr-x 1 haoran haoran  4096 Apr 28 10:53 go/
drwxr-xr-x 1 haoran haoran  4096 Apr  3 12:03 haoran/
</pre>

<ul class="org-ul">
<li>第一栏代表这个文件的类型与权限（permission）<br>
<ul class="org-ul">
<li>此栏一共有十个字符：<br></li>
<li>第一个字符代表这个文件是目录、文件还是链接文件等，<a href="#orgeba95cb">文件种类</a>；<br></li>
<li>接下来的字符中，以三个为一组，且均为【rwx】的三个参数的组合。其中，[r] 代表可读（read）、[w] 代表可写（write）、[x] 代表可执行（execute）。三个权限的位置不会改变，如果没有权限，就会出现 [-] 代替；<br></li>
<li>第一组为文件拥有者可具备的权限；<br></li>
<li>第二组为加入此用户组账号的权限；<br></li>
<li>第三组为非本人且没有加入本用户组的其他账号的权限；<br></li>
</ul></li>
<li>第二栏表示有多少文件名链接到此节点（inode）<br>
每个文件都会将它的权限与属性记录到文件系统的 inode 中，不过，我们使用的目录树却是使用文件名来记录，因此每个文件名就会链接到一个 inode，这个属性记录的就是有多少不同的文件名链接到相同的 inode 号码。<br></li>
<li>第三栏表示这个文件（或目录）的拥有者账号<br></li>
<li>第四栏表示这个文件的所属用户组<br></li>
<li>第五栏位这个文件的容量大小，默认单位为 bytes<br></li>
<li>第六栏为这个文件的创建日期或是最近的修改日期<br>
这一栏的内容分别为日期（月/日）及时间，如果这个文件被修改的时间距离现在太久，那么时间部分会仅显示年份而已。<br></li>
<li>第七栏为这个文件的文件名<br></li>
</ul>
</div>
</div>
<div id="outline-container-org11b83b6" class="outline-3">
<h3 id="org11b83b6">如何修改文件属性与权限</h3>
<div class="outline-text-3" id="text-org11b83b6">
</div>
<div id="outline-container-org55fe133" class="outline-4">
<h4 id="org55fe133">修改所属用户组，chgrp<a id="orgfa8777a"></a></h4>
<div class="outline-text-4" id="text-org55fe133">
<p>
修改一个文件的用户组很简单，直接使用 chgrp 命令修改即可。不过，要被修改的组名必须要在 /etc/group 文件中存在才行，否则就会显示错误。<br>
</p>

<pre class="example" id="orgba9e060">
chgrp [-R] dirname/filename ...

-R: 进行递归（recursive）修改，亦即连同子目录下的所有文件、目录都更新成为这个用户组之意，常常用在修改某一目录内所有的文件之情况；
</pre>
</div>
</div>
<div id="outline-container-orgac06510" class="outline-4">
<h4 id="orgac06510">修改文件拥有者，chown<a id="org2c410bc"></a></h4>
<div class="outline-text-4" id="text-orgac06510">
<p>
同样，文件的拥有者也必须是已经存在系统中的账号，也就是在 /etc/passwd 这个文件中有记录的用户名称才能修改。<br>
</p>

<p>
chown 还可以顺便直接修改用户组的名称，此外，如果要连同目录下的所有子目录或文件同时更改文件拥有者的话，直接加上 -R 的选项即可。<br>
</p>

<pre class="example" id="org3e3d94f">
chown [-R] 账号名称 文件或目录
chown [-R] 账号名称:用户组名称 文件或目录

-R: 进行递归（recursive）修改，亦即连同子目录下的所有文件都修改；
</pre>
</div>
</div>
<div id="outline-container-org7fdc82b" class="outline-4">
<h4 id="org7fdc82b">修改权限，chmod<a id="orga271a62"></a></h4>
<div class="outline-text-4" id="text-org7fdc82b">
</div>
<div id="outline-container-org4b37a0a" class="outline-5">
<h5 id="org4b37a0a">数字类型修改文件权限</h5>
<div class="outline-text-5" id="text-org4b37a0a">
<p>
Linux 文件的基本权限就有 9 个，分别是拥有者（owner）、所属群组（group）、其他人（others）三种身份各有自己的读（read）、写（write）、执行（execute）权限，先复习一下刚刚上面提到的数据：文件的权限字符为：【-rwxrwxrwx】，这九个权限是三个三个一组。其中，我们可以使用数字来代表各个权限，各权限的数字对照表如下：<br>
</p>

<pre class="example" id="orgd2b62b6">
r:4
w:2
x:1
</pre>

<p>
每种身份（owner、group、others）各自的三个权限（r、w、x）数字是需要累加的，例如当权限为：【-rwxrwx&#x2014;】数字则是：<br>
</p>

<pre class="example" id="org07cf310">
owner = rwx = 4+2+1 = 7
group = rwx = 4+2+1 = 7
others = --- = 0+0+0 = 0
</pre>

<p>
所以我们设置权限时，该文件的权限数字就是 770，修改权限的命令 chmod 的语法是：<br>
</p>

<pre class="example" id="org904e384">
chmod [-R] xyz 文件或目录

xyz: 就是上面提到的数字类型的权限属性，为 rwx 属性数值的相加；
-R: 进行递归（recursive）修改，亦即连同子目录下的所有文件都会修改；
</pre>
</div>
</div>
<div id="outline-container-org88d90bf" class="outline-5">
<h5 id="org88d90bf">符号类型修改文件权限</h5>
<div class="outline-text-5" id="text-org88d90bf">
<p>
分别由 u（user）、g（group）、o（others）代表三种身份的权限，此外，a 则代表 all 亦即全部的身份，那么读写的权限就可以写成 r、w、x，也就是下面的方式来看：<br>
</p>

<dl class="org-dl">
<dt>+</dt><dd>加入<br></dd>
<dt>-</dt><dd>移除<br></dd>
<dt>=</dt><dd>设置<br></dd>
</dl>

<p>
实践一下，假如要设置一个文件的权限成为【-rwxr-xr-x】：<br>
</p>

<ul class="org-ul">
<li>user（u）：具有可读、可写、可执行的权限；<br></li>
<li>group 与 others（g/o）：具有可读与执行的权限；<br></li>
</ul>

<div class="org-src-container">
<pre class="src src-bash">chmod <span style="color: #ffcb6b;">u</span>=rwx,<span style="color: #ffcb6b;">go</span>=rx .bashrc
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-orgfb7aa0b" class="outline-3">
<h3 id="orgfb7aa0b">Linux 文件种类与扩展名</h3>
<div class="outline-text-3" id="text-orgfb7aa0b">
</div>
<div id="outline-container-org034f030" class="outline-4">
<h4 id="org034f030">文件种类<a id="orgeba95cb"></a></h4>
<div class="outline-text-4" id="text-org034f030">
<p>
使用 <code>ls -l</code> 观察到第一栏那十个字符中，第一个字符为文件的类型，除了常见的一般文件（-）与目录文件（d）之外，还有哪些种类的文件类型呢？<br>
</p>

<ul class="org-ul">
<li><p>
常规文件（regular file）<br>
</p>
<pre class="example" id="orgd7fd04e">
就是一般我们在进行读写的类型的文件，由 ls -al 所显示出来的属性方面，第一个字符为 [-]，例如 [-rwxrwxrwx]。另外，依照文件的内容，又大概可以分为：
</pre>

<dl class="org-dl">
<dt>纯文本文件（ASCII）</dt><dd>称为纯文本文件是因为内容为我们人类可以直接读到的数据，例如数字、字母等，几乎只要我们可以用来作为设置的文件都属于这一种文件类型；<br></dd>
<dt>二进制文件（binary）</dt><dd>Linux 中某些可执行文件（scripts，脚本文件不算）就是这种格式；<br></dd>
<dt>数据文件（data）</dt><dd>有些程序在运行的过程中会读取某些特定格式的文件，那些特定格式的文件可以称为数据文件（data file）；比如 /var/log/wtmp 这个文件是用来存储用户登录时的登录数据的，该文件是一个数据文件，它能够通过 last 这个命令读出来，但是使用 cat 时会读出乱码，因为它是属于一种特殊格式的文件；<br></dd>
</dl></li>
<li><p>
目录（directory）<br>
</p>
<pre class="example" id="org9250337">
就是目录，第一个属性为 [d]，例如 [drwxrwxrwx]；
</pre></li>
<li><p>
链接文件（link）<br>
</p>
<pre class="example" id="org165b514">
就是类似 Windows 系统下面的快捷方式，第一个属性为 [l]，例如 [lrwxrwxrwx]；
</pre></li>
<li><p>
设备与设备文件（device）<br>
</p>
<pre class="example" id="org2d2c80f">
与系统周边及存储等相关的一些文件，通常都集中在 /dev 这个目录下，通常又分成两种：
</pre>

<dl class="org-dl">
<dt>区块（block）设备文件</dt><dd>就是一些存储数据，以提供系统随机存取的接口设备，举例来说硬盘与软盘等就是；你可以随机地在硬盘的不同区块读写，这种设备就是块设备，第一个属性是 [b]；<br></dd>
<dt>字符（character）设备文件</dt><dd>亦即是一些串行端口的接口设备，例如键盘、鼠标等；这些设备的特色就是一次性读取，不能够截断输出；举例来说，你不能让鼠标跳到另一个画面，而是连续性华东到另一个地方，第一个属性为 [c]；<br></dd>
</dl></li>
<li><p>
数据接口文件（sockets）<br>
</p>
<pre class="example" id="orgc216a4e">
既然被称为数据接口文件，这种类型的文件通常被用在网络上的数据交换了；我们可以启动一个程序来监听客户端的要求，而客户端就可以通过这个 socket 来进行数据的沟通了；第一个属性为 [s]，最常在 /run 或 /tmp 这些个目录中看到这种文件类型；
</pre></li>
<li><p>
数据输送文件（FIFO，pipe）<br>
</p>
<pre class="example" id="orgb802444">
FIFO 也是一种特殊的文件类型，他主要的目的在解决多个程序同时存取一个文件所造成的错误问题， FIFO 是先进先出（first-in-first-out）的缩写，即管道，第一个属性为 [p]；
</pre></li>
</ul>
</div>
</div>
<div id="outline-container-org1aa24bf" class="outline-4">
<h4 id="org1aa24bf">文件扩展名</h4>
<div class="outline-text-4" id="text-org1aa24bf">
<p>
基本上，Linux 的文件是没有所谓的扩展名的， <span class="underline">一个 Linux 文件能不能被执行，与他的第一栏的十个属性有关， 与文件名根本一点关系也没有</span> 。这个观念跟 Windows 的情况不相同，在Windows下面， 能被执行的文件扩展名通常是 .com .exe .bat 等等；而在 Linux 下面，只要你的权限当中具有 x 的话，例如 [-rwxr-xr-x] 即代表这个文件具有可以被执行的能力。<br>
</p>
</div>
</div>
<div id="outline-container-orga97343e" class="outline-4">
<h4 id="orga97343e">文件名的限制</h4>
<div class="outline-text-4" id="text-orga97343e">
<p>
单一文件或目录的最大容许文件名为 255 字节，以一个 ASCII 英文占用 1 字节来说，则大约可达 255 个字符长度；若是以每个汉字占用 2 字节来说， 最大文件名就是大约是 128 个汉字。<br>
</p>

<p>
由于 Linux 在命令行下的一些指令操作关系，一般来说，你在设置 Linux 下面的文件名称时，最好可以避免一些特殊字符比较好！例如下面这些：<br>
</p>

<pre class="example" id="org7a8f4c5">
? &gt; &lt; ; &amp; ! [ ] | \ ' " ` （ ） { }
</pre>

<p>
因为这些符号在命令行下，是有特殊意义的。另外，文件名称的开头为小数点 <verbatim>.</verbatim> 时，代表这个文件为隐藏文件。同时，由于指令下达当中，常常会使用到 -option 之类的选项， 所以你最好也避免将文件文件名的开头以 - 或 + 来命名。<br>
</p>
</div>
</div>
</div>
</div>
<div id="outline-container-org2c7c0cc" class="outline-2">
<h2 id="org2c7c0cc">Linux 目录配置</h2>
<div class="outline-text-2" id="text-org2c7c0cc">
</div>
<div id="outline-container-org8f133ad" class="outline-3">
<h3 id="org8f133ad">Linux 目录配置的依据 &#x2013; FHS</h3>
<div class="outline-text-3" id="text-org8f133ad">
</div>
<div id="outline-container-orgc507051" class="outline-4">
<h4 id="orgc507051">什么是 FHS</h4>
<div class="outline-text-4" id="text-orgc507051">
<p>
Filesystem Hierarchy Standard（FHS），制定这个标准主要目的是希望 <span class="underline">让用户可以了解到已安装软件通常放置于哪个目录下</span> 。<br>
</p>

<p>
FHS 根据过去的经验一直在持续地改版，FHS 依据文件系统使用的频繁与否与是否允许用户随意修改，而将目录定义成为四种交互作用的形态：<br>
</p>

<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">

<col  class="org-left">
</colgroup>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">可分享（shareable）</td>
<td class="org-left">不可分享（unshareable）</td>
</tr>

<tr>
<td class="org-left">不变（static）</td>
<td class="org-left">/usr（软件存放处）</td>
<td class="org-left">/etc（配置文件）</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">/opt（第三方辅助软件）</td>
<td class="org-left">/boot（启动与内核文件）</td>
</tr>

<tr>
<td class="org-left">可变动（variable）</td>
<td class="org-left">/var/mail（用户邮箱）</td>
<td class="org-left">/var/run（程序相关）</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">/var/spool/news（新闻组）</td>
<td class="org-left">/var/lock（程序相关）</td>
</tr>
</tbody>
</table>

<ul class="org-ul">
<li>可分享：可以分享给其他系统挂载使用的目录，所以包括执行文件与用户的邮件等数据，是能够分享给网络上其他主机挂载用的目录；<br></li>
<li>不可分享：自己机器上面运行的设备文件或是与程序有关的 socket 文件等，由于仅与自身机器有关，所以当然就不适合分享给其他主机；<br></li>
<li>不变：有些数据是不会经常变动的，跟随着发行版而不变动。例如函数库、文件说明、系统管理员所管理的主机服务配置文件等；<br></li>
<li>可变动：经常修改的数据，例如日志文件、一般用户可自行接收的新闻组等；<br></li>
</ul>

<p>
事实上，FHS 针对目录树架构仅定义出三层目录下面应该放置什么数据而已，分别是下面这三个目录的定义：<br>
</p>

<ul class="org-ul">
<li>/：与启动系统有关；<br></li>
<li>/usr（unix software resource）：与软件安装、执行有关；<br></li>
<li>/var（variable）：与系统运行过程有关；<br></li>
</ul>
</div>
</div>
<div id="outline-container-orga197300" class="outline-4">
<h4 id="orga197300">根目录（/）的意义与内容</h4>
<div class="outline-text-4" id="text-orga197300">
<p>
第一部分：FHS 要求必须要存在的目录<br>
</p>

<ul class="org-ul">
<li>/bin：系统有很多放置可执行文件的目录，但 /bin 比较特殊。因为 /bin 放置的是在单人维护模式下还能够被使用的命令。在 /bin 下面的指令可以被 root 与一般帐号所使用，主要有：cat, chmod, chown, date, mv, mkdir, cp, bash 等等常用的命令；<br></li>
<li>/boot：这个目录主要在放置开机会使用到的文件，包括 Linux 核心文件以及开机菜单与开机所需配置文件等。Linux kernel 常用的文件名为：vmlinuz，如果使用的是 grub2 这个开机管理程序， 则还会存在/boot/grub2/这个目录；<br></li>
<li>/dev：在 Linux 系统上，任何设备与接口设备都是以文件的形式存在于这个目录当中的。你只要通过读写这个目录下面的某个文件，就等于读写某个设备。比要重要的文件有 /dev/null, /dev/zero, /dev/tty, /dev/loop*, /dev/sd* 等；<br></li>
<li>/etc：系统主要的配置文件几乎都放置在这个目录内，例如人员的帐号密码档、各种服务的启动文件等等。一般来说，这个目录下的各文件属性是可以让一般使用者查看的，但是只有 root 有权力修改。FHS 建议不要放置可执行文件（binary）在这个目录中。比较重要的文件有：/etc/modprobe.d/，/etc/passwd，/etc/fstab，/etc/issue 等等。另 FHS 还规范几个重要的目录最好要存在/etc/目录下：<br>
<ul class="org-ul">
<li>/etc/opt（必要）：这个目录在放置第三方辅助软件 /opt 的相关配置文件；<br></li>
<li>/etc/X11/（建议）：与 X Window 有关的各种配置文件都在这里，尤其是 xorg.conf 这个 X Server 的配置文件；<br></li>
<li>/etc/sgml/（建议）：与 SGML 格式有关的各项配置文件；<br></li>
<li>/etc/xml/（建议）：与 XML 格式有关的各项配置文件；<br></li>
</ul></li>
<li>/lib：系统的函数库非常的多，而 /lib 放置的则是在启动时会用到的函数库，以及在 /bin 或 /sbin 下面的命令会调用的函数库而已。什么是函数库呢？你可以将他想成是外挂，某些指令必须要有这些外挂才能够顺利完成程序的执行之意。另外 FSH 还要求下面的目录必须要存在：<br>
<ul class="org-ul">
<li>/lib/modules/：这个目录主要放置可抽换式的核心相关模块（驱动程序）；<br></li>
</ul></li>
<li>/media：media 是媒体的英文，顾名思义，这个 /media 下面放置的就是可移除的设备，包括软盘、光盘、DVD 等等设备都暂时挂载于此。常见的文件名有：/media/floppy, /media/cdrom 等；<br></li>
<li>/mnt：如果你想要暂时挂载某些额外的设备，一般建议你可以放置到这个目录中。在早些时候，这个目录的用途与 /media 相同，只是有了 /media 之后，这个目录就用来暂时挂载用了；<br></li>
<li>/opt：这个是给第三方辅助软件放置的目录。什么是第三方辅助软件？举例来说，KDE 这个桌面管理系统是一个独立的软件，不过他可以安装到 Linux 系统中，因此 KDE 的软件就建议放置到此目录下了。另外，如果你想要自行安装额外的软件（非原本的发行版提供的），那么也能够将你的软件安装到这里来。不过，以前的 Linux 系统中，我们还是习惯放置在 /usr/local 目录下；<br></li>
<li>/run：早期的 FHS 规定系统启动后产生的各项信息应该要放置到 /var/run 目录下，新版的 FHS 则规范到 /run 下面。由于 /run 可以使用内存来模拟，因此性能上会好很多；<br></li>
<li>/sbin：Linux 有非常多命令是用来设置系统环境的，这些指令只有 root 才能够利用来设置系统，其他使用者最多只能用来查询而已。 放在 /sbin 下面的为启动过程中所需要的，里面包括了开机、修复、还原系统所需要的命令。至于某些服务器软件程序，一般则放置到/usr/sbin/当中。至于本机自行安装的软件所产生的系统可执行文件（system binary），则放置到/usr/local/sbin/当中了。常见的指令包括：fdisk, fsck, ifconfig, mkfs等；<br></li>
<li>/srv：srv 可以视为 service 的缩写，是一些网络服务启动之后，这些服务所需要取用的数据目录。常见的服务例如 WWW, FTP 等等。举例来说，WWW 服务器需要的网页数据就可以放置在/srv/www/里面。不过，系统的服务数据如果尚未要提供给网际网络任何人浏览的话，默认还是建议放置到 /var/lib 下面即可；<br></li>
<li>/tmp：这是让一般使用者或者是正在执行的程序暂时放置文件的地方。这个目录是任何人都能够存取的，所以你需要定期的清理一下。当然，重要数据不可放置在此目录，因为 FHS 甚至建议在启动时，应该要将 /tmp 下的数据都删除；<br></li>
<li>/usr：第二层 FHS 设置，后续介绍<br></li>
<li>/var：第二曾 FHS 设置，主要为放置变动性的数据，后续介绍<br></li>
</ul>

<p>
第二部份：FHS 建议可以存在的目录<br>
</p>

<ul class="org-ul">
<li>/home：这是系统默认的使用者主文件夹（home directory）。在你新增一个一般使用者帐号时，默认的使用者主文件夹都会规范到这里来。比较重要的是，主文件夹有两种代号：<br>
<ul class="org-ul">
<li>~：代表目前这个使用者的主文件夹；<br></li>
<li>~haoran ：则代表 haoran 的主文件夹；<br></li>
</ul></li>
<li>/lib&lt;qual&gt;：用来存放与 /lib 不同的格式的二进制函数库，例如支持 64 位的 /lib64 函数库等；<br></li>
<li>/root：系统管理员（root）的家目录。之所以放在这里，是因为如果进入单人维护模式而仅挂载根目录时，该目录就能够拥有 root 的家目录，所以我们会希望 root 的家目录与根目录放置在同一个分区中；<br></li>
</ul>

<p>
事实上 FHS 针对根目录所定义的标准就仅有上面的东西，不过我们的 Linux 下面还有许多目录你也需要了解一下的。下面是几个在 Linux 当中也是非常重要的目录：<br>
</p>

<ul class="org-ul">
<li>/lost+found：这个目录是使用标准的 ext2/ext3/ext4 文件系统格式才会产生的一个目录，目的在于当文件系统发生错误时，将一些遗失的片段放置到这个目录下。不过如果使用的是 xfs 文件系统的话，就不会存在这个目录了；<br></li>
<li>/proc：这个目录本身是一个虚拟文件系统（virtual filesystem），他放置的数据都是在内存当中， 例如系统核心、行程信息（process）、周边设备的状态及网络状态等。因为这个目录下的数据都是在内存当中，所以本身不占任何硬盘空间，比较重要的文件例如：/proc/cpuinfo, /proc/dma, /proc/interrupts, /proc/ioports, /proc/net/* 等；<br></li>
<li>/sys：这个目录跟 /proc 非常类似，也是一个虚拟的文件系统，主要也是记录核心与系统硬件信息相关的信息。包括目前已加载的内核模块与内核侦测到的硬件设备信息等。这个目录同样不占硬盘容量；<br></li>
</ul>

<p>
早期 Linux 在设计的时候，若发生问题时，救援模式通常仅挂载根目录而已，因此有五个重要的目录被要求一定要与根目录放置在一起， 那就是 /etc, /bin, /dev, /lib, /sbin 这五个重要目录。现在许多的 Linux distributions 由于已经将许多非必要的文件移出 /usr 之外了， 所以 /usr 也是越来越精简，同时因为 /usr 被建议为即使挂载成为只读，系统还是可以正常运行的模样，所以救援模式也能同时挂载 /usr。<br>
</p>
</div>
</div>
<div id="outline-container-org7f22699" class="outline-4">
<h4 id="org7f22699">/usr 的意义与内容</h4>
<div class="outline-text-4" id="text-org7f22699">
<p>
依据 FHS 的基本定义，/usr 里面放置的数据属于可分享的与不可变动的（shareable, static）， 如果你知道如何通过网络进行分区的挂载（例如在服务器篇会谈到的 NFS 服务器），那么 /usr 确实可以分享给区域网络内的其他主机来使用。<br>
</p>

<p>
很多读者都会误会 /usr 为 user 的缩写，其实 usr 是 Unix Software Resource 的缩写， 也就是 Unix 操作系统软件资源所放置的目录，而不是使用者的数据。FHS 建议所有软件开发者，应该将他们的数据合理的分别放置到这个目录下的次目录，而不要自行创建该软件自己独立的目录。<br>
</p>

<p>
因为是所有系统默认的软件（distribution发布者提供的软件）都会放置到 /usr 下面，因此这个目录有点类似 Windows 系统的 C:\Windows\（当中的一部份）+ C:\Program files\ 这两个目录的综合体，系统刚安装完毕时，这个目录会占用最多的硬盘容量。一般来说，/usr 的次目录建议有下面这些：<br>
</p>

<p>
第一部份：FHS 要求必须要存在的目录<br>
</p>

<ul class="org-ul">
<li>/usr/bin/：所有一般用户能够使用的指令都放在这里，目前新的 CentOS 7 已经将全部的使用者指令放置于此，而使用链接文件的方式将 /bin 链接至此，也就是说， /usr/bin 与 /bin 是一模一样了。另外，FHS 要求在此目录下不应该有子目录；<br></li>
<li>/usr/lib/：基本上，与 /lib 功能相同，所以 /lib 就是链接到此目录中的；<br></li>
<li>/usr/local/：系统管理员在本机自行安装自己下载的软件（非发行版默认提供者），建议安装到此目录， 这样会比较便于管理。举例来说，你的发行版提供的软件较旧，你想安装较新的软件但又不想移除旧版，此时你可以将新版软件安装于/usr/local/目录下，可与原先的旧版软件有分别。你可以自行到 /usr/local 去看看，该目录下也是具有 bin, etc, include, lib&#x2026; 的子目录；<br></li>
<li>/usr/sbin/：非系统正常运行所需要的系统指令。最常见的就是某些网络服务器软件的服务指令（daemon），不过基本功能与 /sbin 也差不多， 因此目前 /sbin 就是链接到此目录中的；<br></li>
<li>/usr/share/：主要放置只读架构的数据文件，当然也包括共享文件。在这个目录下放置的数据几乎是不分硬件架构均可读取的数据，因为几乎都是文字文件，在此目录下常见的还有这些次目录：<br>
<ul class="org-ul">
<li>/usr/share/man：线上说明文档<br></li>
<li>/usr/share/doc：软件杂项的文件说明<br></li>
<li>/usr/share/zoneinfo：与时区有关的时区文件<br></li>
</ul></li>
</ul>

<p>
第二部份：FHS 建议可以存在的目录<br>
</p>

<ul class="org-ul">
<li>/usr/games/：与游戏比较相关的数据放置处<br></li>
<li>/usr/include/：c/c++ 等程序语言的文件开始（header）与包含档（include）放置处，当我们以 tarball 方式（*.tar.gz 的方式安装软件）安装某些数据时，会使用到里头的许多包含档；<br></li>
<li>/usr/libexec/：某些不被一般使用者惯用的可执行文件或脚本（script）等等，都会放置在此目录中。例如大部分的 X 窗口下面的操作指令， 很多都是放在此目录下的；<br></li>
<li>/usr/lib&lt;qual&gt;/：与/lib&lt;qual&gt;/功能相同，因此目前 /lib&lt;qual&gt; 就是链接到此目录中；<br></li>
<li>/usr/src/：一般源代码建议放置到这里，src 有 source 的意思。至于核心源代码则建议放置到/usr/src/linux/目录下；<br></li>
</ul>
</div>
</div>
<div id="outline-container-org27b4b34" class="outline-4">
<h4 id="org27b4b34">/var 的意义与内容</h4>
<div class="outline-text-4" id="text-org27b4b34">
<p>
如果 /usr 是安装时会占用较大硬盘容量的目录，那么 /var 就是在系统运行后才会渐渐占用硬盘容量的目录。 因为 /var 目录主要针对常态性变动的文件，包括高速缓存（cache）、登录文件（log file）以及某些软件运行所产生的文件， 包括程序文件（lock file, run file），或者例如 MySQL 数据库的文件等等。常见的子目录有：<br>
</p>

<p>
第一部份：FHS 要求必须要存在的<br>
</p>

<ul class="org-ul">
<li>/var/cache/：应用程序本身运行过程中会产生的一些缓存；<br></li>
<li>/var/lib/：程序本身执行的过程中，需要使用到的数据文件放置的目录。在此目录下各自的软件应该要有各自的目录。举例来说，MySQL 的数据库放置到/var/lib/mysql/而 rpm 的数据库则放到 /var/lib/rpm 中；<br></li>
<li>/var/lock/：某些设备或者是文件资源一次只能被一个应用程序所使用，如果同时有两个程序使用该设备时，就可能产生一些错误的状况，因此就得要将该设备上锁（lock），以确保该设备只会给单一软件所使用。 举例来说，烧录机正在烧录一块光盘，你想一下，会不会有两个人同时在使用一个烧录机烧片？如果两个人同时烧录，那片子写入的是谁的数据？所以当第一个人在烧录时该烧录机就会被上锁，第二个人就得要该设备被解除锁定（就是前一个人用完了）才能够继续使用。目前此目录也已经挪到 /run/lock 中；<br></li>
<li>/var/log/：重要到不行！这是登录文件放置的目录，里面比较重要的文件如 /var/log/messages, /var/log/wtmp（记录登陆者的信息）等；<br></li>
<li>/var/mail/：放置个人电子邮件信箱的目录，不过这个目录也被放置到/var/spool/mail/目录中，通常这两个目录是互为链接文件啦；<br></li>
<li>/var/run/：某些程序或者是服务启动后，会将他们的 PID 放置在这个目录下，至于 PID 的意义我们会在后续章节提到的。与 /run 相同，这个目录链接到 /run 去了；<br></li>
<li>/var/spool/：这个目录通常放置一些队列数据，所谓的队列就是排队等待其他程序使用的数据，这些数据被使用后通常都会被删除。举例来说，系统收到新信会放置到/var/spool/mail/中， 但使用者收下该信件后该封信原则上就会被删除。信件如果暂时寄不出去会被放到/var/spool/mqueue/中， 等到被送出后就被删除。如果是工作调度数据（crontab），就会被放置到/var/spool/cron/目录中；<br></li>
</ul>

<p>
建议在你读完整个基础篇之后，可以挑战FHS官方英文文件（参考本章参考数据），相信会让你对于 Linux 操作系统的目录有更深入的了解喔！<br>
</p>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: L.M.haoran</p>
<p class="date">Created: 2022-11-23</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
