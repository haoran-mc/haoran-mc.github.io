<!DOCTYPE html>
<html lang="zh">
<head>
<!-- 2023-01-31 -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>GO WIKI</title>
<meta name="author" content="L.M.haoran" />
<meta name="description" content="Copyright © 2022, L.M.haoran, all rights reserved." />
<meta name="generator" content="Org Mode" />
<link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
           <link rel="stylesheet" href="static/css/org.css" type="text/css"  />
           <script type="module" src="static/js/main.js" defer></script>
</head>
<body>
<div id="content" class="content">
<h1 class="title">GO WIKI</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org64973e1"><i><span class="timestamp-wrapper"><span class="timestamp">[2023-01-31 Tue 11:08]</span></span></i> ioutil 包被废弃</a></li>
<li><a href="#org8b3e44f"><i><span class="timestamp-wrapper"><span class="timestamp">[2023-01-02 Mon 10:53]</span></span></i> 什么时候使用指针？</a></li>
<li><a href="#org7ec914b"><i><span class="timestamp-wrapper"><span class="timestamp">[2022-05-03 Tue 01:44]</span></span></i> go 反汇编</a></li>
</ul>
</div>
</div>
<style>
#table-of-contents i {
    display: none;
}
</style>

<div id="outline-container-org64973e1" class="outline-2">
<h2 id="org64973e1"><i><span class="timestamp-wrapper"><span class="timestamp">[2023-01-31 Tue 11:08]</span></span></i> ioutil 包被废弃<a id="orgc6eeb14"></a></h2>
<div class="outline-text-2" id="text-org64973e1">
<blockquote>
<p>
io/ioutil, like most things with util in the name, has turned out to be a poorly defined and hard to understand collection of things.<br>
</p>
</blockquote>

<p>
io/ioutil 中的函数/方法/类型应用包 io 以及 os 中的相应对象替代。<br>
</p>

<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">io/ioutil 中的对象（deprecated）</th>
<th scope="col" class="org-left">io 或 os 中的对象</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Discard</td>
<td class="org-left">io.Discard</td>
</tr>

<tr>
<td class="org-left">NopCloser</td>
<td class="org-left">io.NopCloser</td>
</tr>

<tr>
<td class="org-left">ReadAll</td>
<td class="org-left">io.ReadAll</td>
</tr>

<tr>
<td class="org-left">ReadDir</td>
<td class="org-left">os.ReadDir</td>
</tr>

<tr>
<td class="org-left">ReadFile</td>
<td class="org-left">os.ReadFile</td>
</tr>

<tr>
<td class="org-left">TempDir</td>
<td class="org-left">os.MkdirTemp</td>
</tr>

<tr>
<td class="org-left">TempFile</td>
<td class="org-left">os.CreateTemp</td>
</tr>

<tr>
<td class="org-left">WriteFile</td>
<td class="org-left">os.WriteFile</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-org8b3e44f" class="outline-2">
<h2 id="org8b3e44f"><i><span class="timestamp-wrapper"><span class="timestamp">[2023-01-02 Mon 10:53]</span></span></i> 什么时候使用指针？</h2>
<div class="outline-text-2" id="text-org8b3e44f">
<ul class="org-ul">
<li>使用值接收器可以减少垃圾的生成；<br></li>
<li>如果需要修改外部变量的值，我们需要使用指针；<br></li>
<li>不需要对 <code>map</code> ， <code>slice</code> 等引用类型使用指针，因为他们本身就是一个指针，这个我下一篇再分享；<br></li>
<li>如果有超级大的结构体需要作为函数的参数，使用指针可以节省内存开销；<br></li>
<li>因为指针可以修改其指向数据的值，所以最好不要随意在并发场景下使用；<br></li>
<li>最好不要嵌套使用指针，比如 <code>b := &amp;a, c := &amp;b</code> ，这样代码会比较复杂难懂；<br></li>
<li>对于一个结构体，不要混用指针和值；<br></li>
</ul>

<p>
<a href="https://github.com/golang/go/wiki/CodeReviewComments#receiver-type">https://github.com/golang/go/wiki/CodeReviewComments#receiver-type</a><br>
</p>
</div>
</div>
<div id="outline-container-org7ec914b" class="outline-2">
<h2 id="org7ec914b"><i><span class="timestamp-wrapper"><span class="timestamp">[2022-05-03 Tue 01:44]</span></span></i> go 反汇编</h2>
<div class="outline-text-2" id="text-org7ec914b">
<ul class="org-ul">
<li>方法一：go tool compile<br>
<ul class="org-ul">
<li><code>go tool compile -N -l -S test.go</code><br></li>
</ul></li>
<li>方法二：go tool objdump<br>
<ol class="org-ol">
<li><code>go tool compile -N -l test.go</code><br></li>
<li><code>go tool objdump test.o</code> 反汇编所有代码<br></li>
<li>或者 <code>go tool objdump -s func1 test.o</code> 反汇编特定的函数<br></li>
</ol></li>
<li>方法三：go build -gcflags -S<br>
<ul class="org-ul">
<li><code>go build -gcflags -S test.go</code><br></li>
</ul></li>
</ul>

<p>
<code>go tool compile</code> 和 <code>go build -gcflags -S</code> 生成的是过程中的汇编，和最终的机器码的汇编可以通过 <code>go tool objdump</code> 生成。<br>
</p>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Date: 2022-05-03 01:05 Tue</p>
<p class="author">Author: L.M.haoran</p>
<p class="date">Created: 2023-01-31</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
