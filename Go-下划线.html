<!DOCTYPE html>
<html lang="zh">
<head>
<!-- 2023-01-30 -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>下划线</title>
<meta name="author" content="L.M.haoran" />
<meta name="description" content="Copyright © 2022, L.M.haoran, all rights reserved." />
<meta name="generator" content="Org Mode" />
<link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
           <link rel="stylesheet" href="static/css/org.css" type="text/css"  />
           <script type="module" src="static/js/main.js" defer></script>
</head>
<body>
<div id="content" class="content">
<h1 class="title">下划线</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#orgd2979c6">下划线在 import 中</a></li>
<li><a href="#orgfea16c4">下划线在代码中</a></li>
<li><a href="#org3a30ebc">补充</a></li>
</ul>
</div>
</div>

<div id="outline-container-orgd2979c6" class="outline-2">
<h2 id="orgd2979c6">下划线在 import 中</h2>
<div class="outline-text-2" id="text-orgd2979c6">
<p>
在Golang里，import的作用是导入其他package。<br>
</p>

<p>
import 下划线（如：import hello/imp）的作用：当导入一个包时，该包下的文件里所有 init() 函数都会被执行，然而，有些时候我们并不需要把整个包都导入进来，仅仅是是希望它执行 init() 函数而已。这个时候就可以使用 import 引用该包。即使用【import _ 包路径】只是引用该包，仅仅是为了调用 init() 函数，所以无法通过包名来调用包中的其他函数。示例：<br>
</p>

<div class="org-src-container">
<pre class="src src-go"><span style="color: #ff2afc; font-weight: bold;">package</span> main

<span style="color: #ff2afc; font-weight: bold;">import</span> _ <span style="color: #7984D1;">"./hello"</span>

<span style="color: #ff2afc; font-weight: bold;">func</span> <span style="color: #42c6ff;">main</span>() {
    <span style="color: #546A90;">// </span><span style="color: #546A90;">hello.Print()</span>
    <span style="color: #546A90;">//</span><span style="color: #546A90;">&#32534;&#35793;&#25253;&#38169;&#65306;./main.go:6:5: undefined: hello</span>
}
</pre>
</div>

<div class="org-src-container">
<pre class="src src-go"><span style="color: #ff2afc; font-weight: bold;">package</span> hello

<span style="color: #ff2afc; font-weight: bold;">import</span> <span style="color: #7984D1;">"fmt"</span>

<span style="color: #ff2afc; font-weight: bold;">func</span> <span style="color: #42c6ff;">init</span>() {
    fmt.<span style="color: #42c6ff;">Println</span>(<span style="color: #7984D1;">"imp-init() come here."</span>)
}

<span style="color: #ff2afc; font-weight: bold;">func</span> <span style="color: #42c6ff;">Print</span>() {
    fmt.<span style="color: #42c6ff;">Println</span>(<span style="color: #7984D1;">"Hello!"</span>)
}
</pre>
</div>

<p>
输出结果：<br>
</p>

<pre class="example" id="org48e4103">
imp-init() come here.
</pre>
</div>
</div>
<div id="outline-container-orgfea16c4" class="outline-2">
<h2 id="orgfea16c4">下划线在代码中</h2>
<div class="outline-text-2" id="text-orgfea16c4">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #ff2afc; font-weight: bold;">package</span> main

<span style="color: #ff2afc; font-weight: bold;">import</span> (
    <span style="color: #7984D1;">"os"</span>
)

<span style="color: #ff2afc; font-weight: bold;">func</span> <span style="color: #42c6ff;">main</span>() {
    <span style="color: #df85ff;">buf</span> := <span style="color: #1ea8fc;">make</span>([]<span style="color: #ffd400;">byte</span>, 1024)
    <span style="color: #df85ff;">f</span>, <span style="color: #df85ff;">_</span> := os.<span style="color: #42c6ff;">Open</span>(<span style="color: #7984D1;">"/Users/***/Desktop/text.txt"</span>)
    <span style="color: #ff2afc; font-weight: bold;">defer</span> f.<span style="color: #42c6ff;">Close</span>()
    <span style="color: #ff2afc; font-weight: bold;">for</span> {
        <span style="color: #df85ff;">n</span>, <span style="color: #df85ff;">_</span> := f.<span style="color: #42c6ff;">Read</span>(buf)
        <span style="color: #ff2afc; font-weight: bold;">if</span> n == 0 {
            <span style="color: #ff2afc; font-weight: bold;">break</span>

        }
        os.Stdout.<span style="color: #42c6ff;">Write</span>(buf[:n])
    }
}
</pre>
</div>

<p>
下划线意思是忽略这个变量，在这里的 <code>os.Open</code> ，返回值为 <code>*os.File，error</code> ，普通写法是 <code>f, err := os.Open("xxxxxxx")</code> ，如果此时不需要知道返回的错误值，就可以用 <code>f, _ := os.Open("xxxxxx")</code> ，如此则忽略了 <code>error</code> 变量。<br>
</p>
</div>
</div>
<div id="outline-container-org3a30ebc" class="outline-2">
<h2 id="org3a30ebc">补充</h2>
<div class="outline-text-2" id="text-org3a30ebc">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #ff2afc; font-weight: bold;">import</span> <span style="color: #7984D1;">"database/sql"</span>
<span style="color: #ff2afc; font-weight: bold;">import</span> _ <span style="color: #7984D1;">"github.com/go-sql-driver/mysql"</span>
</pre>
</div>

<p>
第二个 import 就是不直接使用 mysql 包，只是执行一下这个包的 init 函数，把 mysql 的驱动注册到 sql 包里，然后程序里就可以使用 sql 包来访问 mysql 数据库了。<br>
</p>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Date: 2022-02-11 00:02 Fri</p>
<p class="author">Author: L.M.haoran</p>
<p class="date">Created: 2023-01-30</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
